<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>R para Análisis Científicos Reproducibles: Todo en una sola página</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/swc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/swc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/swc/favicon-16x16.png">
<link rel="manifest" href="favicons/swc/site.webmanifest">
<link rel="mask-icon" href="favicons/swc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Vista de la instructora</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      R para Análisis Científicos Reproducibles
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            R para Análisis Científicos Reproducibles
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glosario</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Perfiles de estudiante</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Referencia</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Buscar en la página All In One">Buscar en la página All In One</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R para Análisis Científicos Reproducibles
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Vista de la instructora</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y configuración</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-rstudio-intro.html">1. Introducción a R y RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-project-intro.html">2. Gestión de proyectos con RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-seeking-help.html">3. Buscando ayuda</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-data-structures-part1.html">4. Estructuras de datos</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-data-structures-part2.html">5. Explorando data frames</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-data-subsetting.html">6. Haciendo subconjuntos de datos</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-control-flow.html">7. Control de flujo</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-plot-ggplot2.html">8. Creando gráficas con calidad para publicación con ggplot2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-vectorization.html">9. Vectorización</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-functions.html">10. Funciones</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-writing-data.html">11. Guardando datos</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-plyr.html">12. División y combinación de data frames con plyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-dplyr.html">13. Manipulación de data frames con dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-tidyr.html">14. Manipulación de data frames usando tidyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-knitr-markdown.html">15. Produciendo informes con knitr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="16-wrap-up.html">16. Escribiendo buen software</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glosario</a>
                      </li>
                      <li>
                        <a href="profiles.html">Perfiles de estudiante</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Referencia</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-rstudio-intro"><p>Content from <a href="01-rstudio-intro.html">Introducción a R y RStudio</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/01-rstudio-intro.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo orientarse en RStudio?</li>
<li>¿Cómo interactuar con R?</li>
<li>¿Cómo administrar tu entorno?</li>
<li>¿Cómo instalar paquetes?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Describir el propósito y el uso de cada panel del RStudio IDE</li>
<li>Ubicar botones y opciones en RStudio IDE</li>
<li>Definir una variable</li>
<li>Asignar un dato a una variable</li>
<li>Administrar un espacio de trabajo en una sesión R interactiva</li>
<li>Usar operadores matemáticos y de comparación</li>
<li>Llamar funciones</li>
<li>Gestionar paquetes</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="motivación">Motivación<a class="anchor" aria-label="anchor" href="#motivaci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>La ciencia es un proceso de varios pasos: una vez que hayas diseñado
un experimento y recopilado datos, ¡comienza la verdadera diversión!
Esta lección te enseñará cómo comenzar este proceso usando R y RStudio.
Comenzaremos con datos brutos, realizaremos análisis exploratorios y
aprenderemos a trazar gráficamente los resultados. Este ejemplo comienza
con un conjunto de datos de <a href="https://www.gapminder.org" class="external-link">gapminder.org</a> que contiene
información sobre la población de muchos países a lo largo del tiempo.
¿Puedes leer estos datos en R? ¿Puedes hacer un gráfico de la población
de Senegal? ¿Puedes calcular el ingreso promedio de los países del
continente asiático? Al final de estas lecciones, ¡podrás hacer cosas
como graficar datos de poblaciones de estos países en menos de un
minuto!</p>
</section><section><h2 class="section-heading" id="antes-de-empezar-el-taller">Antes de empezar el taller<a class="anchor" aria-label="anchor" href="#antes-de-empezar-el-taller"></a>
</h2>
<hr class="half-width">
<p>Asegúrate de tener instalada la última versión de R y RStudio en tu
máquina. Esto es importante, ya que algunos paquetes utilizados en el
taller pueden no instalarse correctamente (o no funcionar) si R no está
actualizado.</p>
<p><a href="https://www.r-project.org/" class="external-link">Descarga e instala la última
versión de R aquí</a>, <a href="https://www.rstudio.com/" class="external-link">descarga e
instala RStudio aquí</a></p>
</section><section><h2 class="section-heading" id="introducción-a-rstudio">Introducción a RStudio<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n-a-rstudio"></a>
</h2>
<hr class="half-width">
<p>Bienvenido a la parte R del taller de Software Carpentry.</p>
<p>A lo largo de esta lección, vamos a enseñarte algunos de los
fundamentos del lenguaje R, así como algunas buenas prácticas para
organizar el código de proyectos científicos que harán tu vida más
fácil.</p>
<p>Usaremos RStudio: un entorno de desarrollo integrado y gratuito de
código abierto. RStudio proporciona un editor incorporado, funciona en
todas las plataformas (incluso en servidores) y ofrece muchas ventajas,
como la integración de control de versiones y gestión de proyectos.</p>
<p><strong>Diseño básico</strong></p>
<p>Cuando abres por primera vez el RStudio, serás recibido por tres
paneles:</p>
<ul>
<li>La consola interactiva de R (a la izquierda)</li>
<li>Ambiente/Historial (en la esquina superior derecha)</li>
<li>Archivos/Gráficos/Paquetes/Ayuda/Visor (abajo a la derecha)</li>
</ul>
<figure><img src="fig/01-rstudio.png" alt="RStudio layout" class="figure mx-auto d-block"></figure><p>Si abres archivos, como los scripts R, también se abrirá un panel de
editor en la esquina superior izquierda.</p>
<figure><img src="fig/01-rstudio-script.png" alt="RStudio layout with .R file open" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="flujo-de-trabajo-dentro-de-rstudio">Flujo de trabajo dentro de RStudio<a class="anchor" aria-label="anchor" href="#flujo-de-trabajo-dentro-de-rstudio"></a>
</h2>
<hr class="half-width">
<p>Hay dos formas principales en que uno puede trabajar dentro de
RStudio.</p>
<ol style="list-style-type: decimal">
<li>Probar y jugar dentro de la consola interactiva de R y luego copiar
el código en un archivo .R para ejecutarlo más tarde.</li>
</ol>
<ul>
<li>Esto funciona bien cuando se hacen pequeñas pruebas y/o se está
comenzando.</li>
<li>Rápidamente se vuelve laborioso.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Comienza a escribir un archivo en .R y usa las teclas de acceso
directo de RStudio para ejecutar la línea actual, las líneas
seleccionadas o modificadas en la consola interactiva.</li>
</ol>
<ul>
<li>Esta es una buena forma de comenzar; todo tu código estará guardado
para después.</li>
<li>Podrás ejecutar el archivo que quieres desde RStudio o mediante la
función <code>source ()</code> de R.</li>
</ul>
<div id="sugerencia-ejecutando-segmentossecciones-de-tu-código" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-ejecutando-segmentossecciones-de-tu-código" class="callout-inner">
<h3 class="callout-title">Sugerencia: Ejecutando segmentos/secciones de tu código</h3>
<div class="callout-content">
<p>RStudio ofrece gran flexibilidad para ejecutar código desde dentro de
la ventana del editor Hay botones, opciones de menú y atajos de teclado.
Para ejecutar la línea actual, puedes</p>
<ol style="list-style-type: decimal">
<li>hacer clic en el botón <code>Run</code> arriba en el panel del
Editor, o 2. Seleccionar “Run Lines” desde el menú “Code”, o 3.
Presionar Ctrl-Enter en Windows o Linux o Command-Enter en OS X. (Este
atajo también se puede hacer colocando el mouse sobre el botón). Para
ejecutar un bloque de código, selecciónalo y luego pulsa
<code>Run</code>. Si has modificado una línea de código dentro de un
bloque que acabas de ejecutar, no es necesario re-seleccionar el bloque
y <code>Run</code>, puedes usar el botón
<code>Re-run the previous region</code>. Esto ejecutará el bloque de
código anterior, incluidas las modificaciones que hayas realizado.</li>
</ol>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="introducción-a-r">Introducción a R<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n-a-r"></a>
</h2>
<hr class="half-width">
<p>Gran parte de tu tiempo en R lo gastarás en la consola interactiva de
R. Aquí es donde ejecutarás todo tu código, y puede ser un entorno útil
para probar ideas antes de guardarlas en un script R. La consola en
RStudio es la misma que obtendrías si escribieras <code>R</code> en la
terminal de shell/linea de comandos.</p>
<p>Lo primero que verás en la sesión interactiva de R es un montón de
información, seguido por un “&gt;” y un cursor parpadeante. Esto es
similar al entorno de la terminal de shell que aprendiste durante las
lecciones de shell: R opera con la misma idea de “leer, evaluar,
mostrar” (tú escribes comandos, R intenta ejecutarlos y luego devuelve
un resultado).</p>
</section><section><h2 class="section-heading" id="usando-r-como-una-calculadora">Usando R como una calculadora<a class="anchor" aria-label="anchor" href="#usando-r-como-una-calculadora"></a>
</h2>
<hr class="half-width">
<p>Lo más simple que podrías hacer con R es aritmética:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="fl">100</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 101</code></pre>
</div>
<p>R te mostrará la respuesta, precedido de un “[1]”. No te preocupes
por esto por ahora, lo explicaremos más adelante. Por ahora piensa en
eso como parte de la salida.</p>
<p>Al igual que bash, si escribes un comando incompleto R esperará a que
lo completes:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">+</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>+</code></pre>
</div>
<p>Cada vez que presionas Enter y R te muestra un “+” en lugar de
“&gt;”, significa que está esperando que completes el comando. Si deseas
cancelar un comando, simplemente presiona “Esc” y RStudio te devolverá
el “&gt;” <strong>prompt</strong>.</p>
<div id="sugerencia-cancelando-comandos" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-cancelando-comandos" class="callout-inner">
<h3 class="callout-title">Sugerencia: Cancelando comandos</h3>
<div class="callout-content">
<p>Si usas R desde la línea de comandos en lugar de estar dentro de
RStudio, debes usar <code>Ctrl + C</code> en lugar de<code>Esc</code>
para cancelar el comando. ¡Esto se aplica también a los usuarios de
Mac!</p>
<p>La cancelación de un comando no sólo es útil para matar comandos
incompletos: también puedes usarlo para decirle a R que deje de ejecutar
el código (por ejemplo, si tarda mucho más de lo que esperabas), o para
deshacerte del código que estás escribiendo actualmente.</p>
</div>
</div>
</div>
<p>Cuando usas R como calculadora, el orden de las operaciones es el
mismo que has aprendido en la escuela.</p>
<p>De mayor a menor precedencia:</p>
<ul>
<li>Paréntesis: <code>(</code>, <code>)</code>
</li>
<li>Exponente: <code>^</code> o <code>**</code>
</li>
<li>División: <code>/</code>
</li>
<li>Multiplicación: <code>*</code>
</li>
<li>Suma: <code>+</code>
</li>
<li>Resta: <code>-</code>
</li>
</ul>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 13</code></pre>
</div>
<p>Usa paréntesis para agrupar las operaciones a fin de forzar el orden
de la evaluación o para aclarar lo que deseas hacer.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 16</code></pre>
</div>
<p>Esto puede ser difícil de manejar cuando no es necesario, pero aclara
tus intenciones. Recuerda que otros pueden leer tu código.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="op">(</span><span class="fl">5</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># difícil de leer</span></span>
<span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span>       <span class="co"># claro, si recuerdas las reglas</span></span>
<span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span>     <span class="co"># si olvidas algunas reglas, esto podría ayudar</span></span></code></pre>
</div>
<p>El texto después de cada línea de código se llama “comentario”. Todo
lo que sigue después del símbolo hash (o numeral) <code>#</code> es
ignorado por R cuando se ejecuta el código.</p>
<p>Los números pequeños o grandes tienen una notación científica:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">/</span><span class="fl">10000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2e-04</code></pre>
</div>
<p>Es la abreviatura de “multiplicado por <code>10 ^ XX</code>”.
Entonces <code>2e-4</code> es la abreviatura de
<code>2 * 10^(-4)</code>.</p>
<p>Tú también puedes escribir números en notación científica:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">5e3</span>  <span class="co"># nota la falta del signo menos aquí</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5000</code></pre>
</div>
</section><section><h2 class="section-heading" id="funciones-matemáticas">Funciones matemáticas<a class="anchor" aria-label="anchor" href="#funciones-matem%C3%A1ticas"></a>
</h2>
<hr class="half-width">
<p>R tiene muchas funciones matemáticas integradas. Para llamar a una
función, simplemente escribimos su nombre seguido de paréntesis ( ).
Todo lo que escribas dentro de los paréntesis se llaman argumentos de la
función:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sin</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># función trigonométrica</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.841471</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># logaritmo natural</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log10</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># logaritmo en base-10</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">exp</span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span> <span class="co"># e^(1/2)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.648721</code></pre>
</div>
<p>No te preocupes si no recuerdas todas las funciones en R. Simplemente
puedes buscarlas en Google, o si puedes recordar el comienzo del nombre
de la función, puedes usar el tabulador para completar su nombre en
RStudio.</p>
<p>Esta es una de las ventajas que RStudio tiene sobre R, tiene
capacidades de autocompletado que te permiten buscar funciones, sus
argumentos y los valores que toman más fácilmente.</p>
<p>Escribir un <code>?</code> antes del nombre de un comando abrirá la
página de ayuda para ese comando. Además de proporcionar una descripción
detallada del comando y cómo funciona, al desplazarse hacia la parte
inferior de la página de ayuda generalmente se mostrarán ejemplos que
ilustran el uso del comando. Veremos un ejemplo más adelante. Puedes
consultar también <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/translations/spanish/introduccion-a-r.pdf" class="external-link">las
guías rápidas</a> disponibles en el sitio de RStudio.</p>
</section><section><h2 class="section-heading" id="comparando">Comparando<a class="anchor" aria-label="anchor" href="#comparando"></a>
</h2>
<hr class="half-width">
<p>Podemos realizar comparaciones en R:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">==</span> <span class="fl">1</span>  <span class="co"># igualdad (observa dos signos iguales, se lee como "es igual a")</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">!=</span> <span class="fl">2</span>  <span class="co"># desigualdad (leída como "no es igual a")</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span>  <span class="co"># menor que</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;=</span> <span class="fl">1</span>  <span class="co"># menor o igual que</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>  <span class="co"># mayor que</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">9</span> <span class="co"># mayor o igual que</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div id="sugerencia-comparando-números" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-comparando-números" class="callout-inner">
<h3 class="callout-title">Sugerencia: Comparando números</h3>
<div class="callout-content">
<p>Una advertencia sobre la comparación de números: nunca debes usar
<code>==</code> para comparar dos números a menos que sean enteros
(<strong>integer</strong> es un tipo de datos que específica números
enteros).</p>
<p>Las computadoras sólo pueden representar números decimales con un
cierto grado de precisión, así que dos números que parecen iguales
cuando se muestran por R, pueden tener diferentes representaciones
subyacentes y por lo tanto ser diferentes por un pequeño margen de error
(llamado tolerancia numérica de la máquina).</p>
<p>En su lugar, debes usar la función <code>all.equal</code>.</p>
<p>Lectura adicional: <a href="https://floating-point-gui.de/" class="external-link">http://floating-point-gui.de/</a></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="variables-y-asignaciones">Variables y asignaciones<a class="anchor" aria-label="anchor" href="#variables-y-asignaciones"></a>
</h2>
<hr class="half-width">
<p>Podemos almacenar valores en variables usando el operador de
asignación <code>&lt;-</code>. Veamos un ejemplo:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">40</span></span></code></pre>
</div>
<p>Observa que la asignación no muestra el valor. En cambio, lo almacena
para más adelante en algo llamado <strong>variable</strong>.
<code>x</code> ahora contiene el <strong>valor</strong>
<code>0.025</code>:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.025</code></pre>
</div>
<p>Más precisamente, el valor almacenado es una <em>aproximación
decimal</em> de esta fracción, llamado <a href="https://en.wikipedia.org/wiki/Floating_point" class="external-link">número de coma
flotante o <strong>floating point</strong></a>.</p>
<p>Busca la pestaña <code>Environment</code> en uno de los paneles de
RStudio, y verás que <code>x</code> y su valor han aparecido. Nuestra
variable <code>x</code> se puede usar en lugar de un número en cualquier
cálculo que espere un número:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -3.688879</code></pre>
</div>
<p>Ten en cuenta que las variables pueden reasignarse, es decir, puedes
cambiar el valor almacenado en la variable:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></code></pre>
</div>
<p><code>x</code> tenía el valor <code>0.025</code> y ahora tiene el
valor <code>100</code>.</p>
<p>También, los valores de asignación pueden contener la variable
asignada:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> <span class="co"># observa cómo RStudio actualiza la descripción de x en la pestaña superior derecha</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<p>El lado derecho de la asignación puede ser cualquier expresión de R
válida. La expresión del lado derecho <em>se evalúa por completo</em>
antes de que se realice la asignación.</p>
<p>Los nombres de las variables pueden contener letras, números, guiones
bajos y puntos. No pueden comenzar con un número ni contener espacios en
absoluto. Diferentes personas usan diferentes convenciones para nombres
largos de variables, estos incluyen</p>
<ul>
<li>puntos.entre.palabras</li>
<li>guiones_bajos_entre_palabras</li>
<li>MayúsculasMinúsculasParaSepararPalabras</li>
</ul>
<p>Lo que uses depende de ti, pero <strong>sé consistente</strong>.</p>
<p>También es posible utilizar el operador <code>=</code> para la
asignación:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">40</span></span></code></pre>
</div>
<p>Esta forma es menos común entre los usuarios R. Lo más importante es
<strong>ser consistente</strong> con el operador que usas.
Ocasionalmente hay lugares donde es menos confuso usar
<code>&lt;-</code> que <code>=</code>, y es el símbolo más común usado
en la comunidad. Entonces la recomendación es usar
<code>&lt;-</code>.</p>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>De los siguientes ejemplos, ¿Cuáles son nombres de variables válidas
en R?</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>min_height</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>max.height</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>_age</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>.mass</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>MaxLength</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a><span class="dv">2</span>widths</span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a>celsius2kelvin</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Los siguientes nombres de variables son válidos en R:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_height</span></span>
<span><span class="va">max.height</span></span>
<span><span class="va">MaxLength</span></span>
<span><span class="va">celsius2kelvin</span></span></code></pre>
</div>
<p>El punto al inicio crea una variable oculta:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.mass</span></span></code></pre>
</div>
<p>Los siguientes no son nombres de variables válidos en R:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>_age</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="dv">2</span>widths</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="vectorización">Vectorización<a class="anchor" aria-label="anchor" href="#vectorizaci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>Es muy importante tener en cuenta que R es <em>vectorizado</em>, lo
que significa que las variables y funciones pueden tener vectores como
valores y R puede operar en vectores completos a la vez. En contraste
con los conceptos de vectores de física y matemáticas, un vector en R
describe un conjunto de valores del mismo tipo de datos en un cierto
orden. Por ejemplo:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4  8 16 32</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="fl">2</span><span class="op">^</span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4  8 16 32</code></pre>
</div>
<p>Esto es increíblemente poderoso; discutiremos esto en una próxima
lección.</p>
</section><section><h2 class="section-heading" id="administrando-tu-entorno">Administrando tu entorno<a class="anchor" aria-label="anchor" href="#administrando-tu-entorno"></a>
</h2>
<hr class="half-width">
<p>Hay algunos comandos útiles que puedes usar para interactuar con la
sesión de R.</p>
<p><code>ls</code> listará todas las variables y funciones almacenadas
en el entorno global (tu sesión de trabajo en R):</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ls</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "object" "x"      "y"     </code></pre>
</div>
<div id="sugerencia-ocultando-objetos" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-ocultando-objetos" class="callout-inner">
<h3 class="callout-title">Sugerencia: ocultando objetos</h3>
<div class="callout-content">
<p>Al igual que en el shell, <code>ls</code> oculta por defecto
cualquier variable o función que comience con un “.”. Para listar todos
los objetos, escribe <code>ls(all.names = TRUE)</code></p>
</div>
</div>
</div>
<p>Ten en cuenta que no se dió ningún argumento a <code>ls</code>, pero
sí se necesita poner los paréntesis para decirle a R que llame a la
función.</p>
<p>Si escribimos <code>ls</code> nada más, ¡R mostrará el código fuente
de esa función!</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ls</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (name, pos = -1L, envir = as.environment(pos), all.names = FALSE,
    pattern, sorted = TRUE)
{
    if (!missing(name)) {
        pos &lt;- tryCatch(name, error = function(e) e)
        if (inherits(pos, "error")) {
            name &lt;- substitute(name)
            if (!is.character(name))
                name &lt;- deparse(name)
            warning(gettextf("%s converted to character string",
                sQuote(name)), domain = NA)
            pos &lt;- name
        }
    }
    all.names &lt;- .Internal(ls(envir, all.names, sorted))
    if (!missing(pattern)) {
        if ((ll &lt;- length(grep("[", pattern, fixed = TRUE))) &amp;&amp;
            ll != length(grep("]", pattern, fixed = TRUE))) {
            if (pattern == "[") {
                pattern &lt;- "\\["
                warning("replaced regular expression pattern '[' by  '\\\\['")
            }
            else if (length(grep("[^\\\\]\\[&lt;-", pattern))) {
                pattern &lt;- sub("\\[&lt;-", "\\\\\\[&lt;-", pattern)
                warning("replaced '[&lt;-' by '\\\\[&lt;-' in regular expression pattern")
            }
        }
        grep(pattern, all.names, value = TRUE)
    }
    else all.names
}
&lt;bytecode: 0x55b26aa87d80&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
<p>Puedes usar <code>rm</code> para eliminar objetos que ya no
necesitas:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<p>Si tienes muchas cosas en tu entorno y deseas borrarlas todas, puedes
pasar los resultados de <code>ls</code> y mandarlos a la función
<code>rm</code>:</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span>list <span class="op">=</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>En este caso, hemos combinado los dos. Al igual que el orden de las
operaciones, todo lo que se encuentre dentro de los paréntesis más
internos se evalúa primero, y así sucesivamente.</p>
<p>En este caso, hemos especificado que los resultados de
<code>ls</code> se deben usar para el argumento <code>list</code> y
luego remover la lista con <code>rm</code>. Cuando asignes valores a
argumentos por su nombre, <em>debes</em> usar el operador
<code>=</code>.</p>
<p>Si, en cambio, usamos <code>&lt;-</code>, habrá efectos secundarios
no deseados, o puedes recibir un mensaje de error:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">list</span> <span class="op">&lt;-</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in rm(list &lt;- ls()): ... must contain names or character strings</code></pre>
</div>
<div id="sugerencia-advertencias-vs.-errores" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-advertencias-vs.-errores" class="callout-inner">
<h3 class="callout-title">Sugerencia: Advertencias vs. Errores</h3>
<div class="callout-content">
<p>¡Presta atención cuando R hace algo inesperado! Los errores, como el
anterior, se lanzan cuando R no puede proceder a un cálculo. Por otro
lado, las advertencias generalmente significan que la función se ha
ejecutado, pero probablemente no funcionó como se esperaba.</p>
<p>En ambos casos, el mensaje que muestra R usualmente te da pistas
sobre cómo solucionar el problema.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="paquetes-en-r">Paquetes en R<a class="anchor" aria-label="anchor" href="#paquetes-en-r"></a>
</h2>
<hr class="half-width">
<p>Es posible agregar funciones a R escribiendo un paquete u obteniendo
un paquete escrito por otra persona. Hay más de 10.000 paquetes
disponibles en CRAN (la red completa de archivos R). R y RStudio tienen
funcionalidad para administrar paquetes:</p>
<ul>
<li>Puedes ver qué paquetes están instalados escribiendo
<code>installed.packages()</code>
</li>
<li>Puedes instalar paquetes escribiendo
<code>install.packages("nombre_de_paquete")</code>
</li>
<li>Puedes actualizar los paquetes instalados escribiendo
<code>update.packages()</code>
</li>
<li>Puedes eliminar un paquete con
<code>remove.packages("nombre_de_paquete")</code>
</li>
<li>Puedes hacer que un paquete esté disponible para su uso con
<code>library(nombre_de_paquete)</code>
</li>
</ul>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>¿Cuál será el valor de cada variable después de cada comando en el
siguiente programa?</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fl">122</span></span>
<span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.3</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span></code></pre>
</div>
<p>Esto dará un valor de 47.5 para la variable mass</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fl">122</span></span></code></pre>
</div>
<p>Esto dará un valor de 122 para la variable age</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.3</span></span></code></pre>
</div>
<p>Multiplica el valor existente en mass 47.5 por 2.3 para dar un nuevo
valor 109.25 a la variable mass.</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
<p>Resta 20 del valor existente de 122 para obtener un nuevo valor de
102 para la variable age.</p>
</div>
</div>
</div>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Ejecuta el código del desafío anterior y escribe un comando para
comparar la variable <code>mass</code> con <code>age</code>. ¿Es la
variable <code>mass</code> más grande que <code>age</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución del desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Una forma de responder esta pregunta en R es usar <code>&gt;</code>
para hacer lo siguiente:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&gt;</span> <span class="va">age</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<p>Esto debería dar un valor booleano <code>TRUE</code> ya que 109.25 es
mayor que 102.</p>
</div>
</div>
</div>
</div>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>Limpia tu entorno de trabajo borrando las variables de
<code>mass</code> y <code>age</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Podemos usar el comando <code>rm</code> para realizar esta tarea:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">age</span>, <span class="va">mass</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-5" class="callout-inner">
<h3 class="callout-title">Desafío 5</h3>
<div class="callout-content">
<p>Instala los siguientes paquetes: <code>ggplot2</code>,
<code>plyr</code>, <code>gapminder</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución al desafío 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Puedes utilizar el comando <code>install.packages()</code> para
instalar los paquetes requeridos.</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"plyr"</span><span class="op">)</span></span>
<span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"gapminder"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usa RStudio para escribir y correr programas en R.</li>
<li>R tiene operadores aritméticos y funciones matemáticas usuales.</li>
<li>Utilizar <code>&lt;-</code> para asignar valores a variables.</li>
<li>Utilizar <code>ls()</code> para listar las variables en el
programa.</li>
<li>Utilizar <code>rm()</code> para eliminar objetos en el
programa.</li>
<li>Utilizar <code>install.packages()</code> para instalar paquetes
(libraries).</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-project-intro"><p>Content from <a href="02-project-intro.html">Gestión de proyectos con RStudio</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/02-project-intro.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo gestionar mis proyectos en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Crear proyectos independientes en RStudio</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>El proceso científico es naturalmente incremental, y la vida de
muchos proyectos comienza como notas aleatorias, algún código, luego un
manuscrito, y eventualmente todo está mezclado.</p>
<blockquote class="twitter-tweet">
<p>
Managing your projects in a reproducible fashion doesn’t just make your
science reproducible, it makes your life easier.
</p>
— Vince Buffalo (<span class="citation">@vsbuffalo</span>)
<a href="https://twitter.com/vsbuffalo/status/323638476153167872" class="external-link">April
15, 2013</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><p>La mayoría de la gente tiende a organizar sus proyectos de esta
manera:</p>
<figure><img src="fig/bad_layout.png" class="figure mx-auto d-block"></figure><p>Hay muchas razones de por qué debemos <strong>siempre</strong> evitar
esto:</p>
<ol style="list-style-type: decimal">
<li>Es realmente difícil saber cuál versión de tus datos es la original
y cuál es la modificada.</li>
<li>Es muy complicado porque se mezclan archivos con varias extensiones
juntas.</li>
<li>Probablemente te lleve mucho tiempo encontrar realmente cosas, y
relacionar las figuras correctas con el código exacto que ha sido
utilizado para generarlas.</li>
</ol>
<p>Un buen diseño del proyecto finalmente hará tu vida más fácil:</p>
<ul>
<li>Ayudará a garantizar la integridad de tus datos.</li>
<li>Hace que sea más simple compartir tu código con alguien más (un
compañero de laboratorio, colaborador o supervisor).</li>
<li>Permite cargar fácilmente tu código junto con el envío de tu
manuscrito.</li>
<li>Hace que sea más fácil retomar un proyecto después de un
descanso.</li>
</ul></section><section><h2 class="section-heading" id="una-posible-solución">Una posible solución<a class="anchor" aria-label="anchor" href="#una-posible-soluci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>Afortunadamente hay herramientas y paquetes que pueden ayudarte a
gestionar tu trabajo con efectividad.</p>
<p>Uno de los aspectos más poderosos y útiles de RStudio es su
funcionalidad de gestión de proyectos. Lo utilizaremos hoy para crear un
proyecto autocontenido y reproducible.</p>
<div id="desafío-creando-un-proyecto-autocontenido" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-creando-un-proyecto-autocontenido" class="callout-inner">
<h3 class="callout-title">Desafío: Creando un proyecto autocontenido</h3>
<div class="callout-content">
<p>Vamos a crear un proyecto en RStudio:</p>
<ol style="list-style-type: decimal">
<li>Hacer clic en el menú “File”, luego en “New Project”.</li>
<li>Hacer clic en “New Directory”.</li>
<li>Hacer clic en “Empty Project”.</li>
<li>Introducir el nombre del directorio para guardar tu proyecto, por
ejemplo: “my_project”.</li>
<li>Si está disponible, seleccionar la casilla de verificación “Create a
git repository.”</li>
<li>Hacer clic en el botón “Create Project”.</li>
</ol>
</div>
</div>
</div>
<p>Ahora cuando inicies R en este directorio de proyectos, o abras este
proyecto con RStudio, todo nuestro trabajo estará completamente
autocontenido en este directorio.</p>
</section><section><h2 class="section-heading" id="buenas-prácticas-para-la-organización-del-proyecto">Buenas prácticas para la organización del proyecto<a class="anchor" aria-label="anchor" href="#buenas-pr%C3%A1cticas-para-la-organizaci%C3%B3n-del-proyecto"></a>
</h2>
<hr class="half-width">
<p>Aunque no existe una “mejor” forma de diseñar un proyecto, existen
algunos principios generales que deben cumplirse para facilitar su
gestión:</p>
<div class="section level3">
<h3 id="tratar-los-datos-como-de-sólo-lectura">Tratar los datos como de sólo lectura<a class="anchor" aria-label="anchor" href="#tratar-los-datos-como-de-s%C3%B3lo-lectura"></a>
</h3>
<p>Este es probablemente el objetivo más importante al configurar un
proyecto. Los datos suelen consumir mucho tiempo y/o ser costosos de
recolectar. Trabajar con ellos en un formato en el que pueden ser
modificados (por ejemplo, en Excel) significa que nunca estás seguro de
donde provienen, o cómo han sido modificados desde su recolección. Por
lo tanto, es una buena idea manejar tus datos como de “sólo
lectura”.</p>
</div>
<div class="section level3">
<h3 id="limpieza-de-datos">Limpieza de datos<a class="anchor" aria-label="anchor" href="#limpieza-de-datos"></a>
</h3>
<p>En muchos casos tus datos estarán “sucios” y necesitarán un
preprocesamiento significativo para obtener un formato R (o cualquier
otro lenguaje de programación) que te resulte útil. Esta tarea es
algunas veces llamada <strong>“data munging”</strong>. Es útil almacenar
estos <strong>scripts</strong> en una carpeta separada y crear una
segunda carpeta de datos de “sólo lectura” para contener los
<strong>datasets</strong> “limpios”.</p>
</div>
<div class="section level3">
<h3 id="tratar-la-salida-generada-como-descartable">Tratar la salida generada como descartable<a class="anchor" aria-label="anchor" href="#tratar-la-salida-generada-como-descartable"></a>
</h3>
<p>Todo lo generado por tus <strong>scripts</strong> debe tratarse como
descartable: todo debería poder regenerarse a partir de tus
<strong>scripts</strong>.</p>
<p>Hay muchas diferentes maneras de gestionar esta salida. Es útil tener
una carpeta de salida con diferentes subdirectorios para cada análisis
por separado. Esto hace que sea más fácil después, ya que muchos de
nuestros análisis son exploratorios y no terminan siendo utilizados en
el proyecto final, y algunos de los análisis se comparten entre
proyectos.</p>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout-inner">
<h3 class="callout-title">Tip: Good Enough Practices for Scientific Computing</h3>
<div class="callout-content">
<p><a href="https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/good-enough-practices-for-scientific-computing.pdf" class="external-link">Good
Enough Practices for Scientific Computing</a> brinda las siguientes
recomendaciones para la organización de proyectos:</p>
<ol style="list-style-type: decimal">
<li>Coloque cada proyecto en su propio directorio, el cual lleva el
nombre del proyecto.</li>
<li>Coloque documentos de texto asociados con proyecto en el directorio
<code>doc</code>.</li>
<li>Coloque los datos sin procesar y los metadatos en el directorio
<code>data</code>, y archivos generados durante la limpieza y análisis
en el directorio <code>results</code> .</li>
<li>Coloque los <strong>scripts</strong> fuente del proyecto y los
programas en el directorio <code>src</code>, y programas traídos de otra
parte o compilados localmente en el directorio <code>bin</code>.</li>
<li>Nombre todos archivos de tal manera que reflejen su contenido o
función.</li>
</ol>
</div>
</div>
</div>
<div id="tip-projecttemplate---una-posible-solución" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-projecttemplate---una-posible-solución" class="callout-inner">
<h3 class="callout-title">Tip: ProjectTemplate - una posible solución</h3>
<div class="callout-content">
<p>Una manera de automatizar la gestión de un proyecto es instalar el
paquete <code>ProjectTemplate</code>. Este paquete configurará una
estructura de directorios ideal para la gestión de proyectos. Esto es
muy útil ya que te permite tener tu <strong>pipeline/workflow</strong>
de análisis organizado y estructurado. Junto con la funcionalidad
predeterminada del proyecto RStudio y Git, podrás realizar el
seguimiento de tu trabajo y compartirlo con colaboradores.</p>
<ol style="list-style-type: decimal">
<li>Instala <code>ProjectTemplate</code>.</li>
<li>Carga la librería.</li>
<li>Inicializa el proyecto:</li>
</ol>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"ProjectTemplate"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"ProjectTemplate"</span><span class="op">)</span></span>
<span><span class="fu">create.project</span><span class="op">(</span><span class="st">"../my_project"</span>, merge.strategy <span class="op">=</span> <span class="st">"allow.non.conflict"</span><span class="op">)</span></span></code></pre>
</div>
<p>Para más información de ProjectTemplate y su functionalidad visita la
página <a href="https://projecttemplate.net/index.html" class="external-link">ProjectTemplate</a>.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="separar-la-definición-de-funciones-y-la-aplicación">Separar la definición de funciones y la aplicación<a class="anchor" aria-label="anchor" href="#separar-la-definici%C3%B3n-de-funciones-y-la-aplicaci%C3%B3n"></a>
</h3>
<p>Una de las maneras más efectivas de trabajar con R es comenzar
escribiendo el código que deseas que se ejecute directamente en un
<strong>script</strong> .R, y enseguida ejecutar las líneas
seleccionadas (ya sea utilizando los atajos del teclado en RStudio o
haciendo clic en el botón “Run”) en la consola interactiva de R.</p>
<p>Cuando tu proyecto se encuentra en sus primeras etapas, el archivo
<strong>script</strong> inicial .R generalmente contendrá muchas líneas
de código ejecutadas directamente. Conforme vaya madurando, fragmentos
reutilizables podrán ser llevados a sus propias funciones. Es buena idea
separar estas funciones en dos carpetas separadas; una para guardar
funciones útiles que reutilizarás a través del análisis y proyectos, y
una para guardar los <strong>scripts</strong> de análisis.</p>
<div id="tip-evitando-la-duplicación" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-evitando-la-duplicación" class="callout-inner">
<h3 class="callout-title">Tip: Evitando la duplicación</h3>
<div class="callout-content">
<p>Puedes encontrarte utilizando datos o <strong>scripts</strong> de
análisis a través de varios proyectos. Normalmente, deseas evitar la
duplicación para ahorrar espacio y evitar actualizar el código en
múltiples lugares.</p>
<p>En este caso, es útil hacer “links simbólicos”, los cuales son
esencialmente accesos directos a archivos en otro lugar en un sistema de
archivos. En Linux y OS X puedes utilizar el comando <code>ln -s</code>,
y en Windows crear un acceso directo o utilizar el comando
<code>mklink</code> desde la terminal de Windows.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="guardar-los-datos-en-el-directorio-de-datos">Guardar los datos en el directorio de datos<a class="anchor" aria-label="anchor" href="#guardar-los-datos-en-el-directorio-de-datos"></a>
</h3>
<p>Ahora que tenemos una buena estructura de directorios
colocaremos/guardaremos los archivos de datos en el directorio
<code>data/</code>.</p>
<div id="desafío-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Descargar los datos gapminder de <a href="https://raw.githubusercontent.com/resbaz/r-novice-gapminder-files/master/data/gapminder-FiveYearData.csv" class="external-link">aquí</a>.</p>
<ol style="list-style-type: decimal">
<li>Descargar el archivo (CTRL + S, clic botón derecho del ratón -&gt;
“Guardar como…”, o Archivo -&gt; “Guardar página como…”)</li>
<li>Asegúrate de que esté guardado con el nombre
<code>gapminder-FiveYearData.csv</code>
</li>
<li>Guardar el archivo en la carpeta <code>data/</code> dentro de tu
proyecto.</li>
</ol>
<p>Más delante cargaremos e inspeccionaremos estos datos.</p>
</div>
</div>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Es útil tener una idea general sobre el <strong>dataset</strong>,
directamente desde la línea de comandos, antes de cargarlo en R.
Comprender mejor el <strong>dataset</strong> será útil al tomar
decisiones sobre cómo cargarlo en R. Utiliza la terminal de línea de
comandos para contestar las siguientes preguntas:</p>
<ol style="list-style-type: decimal">
<li>¿Cuál es el tamaño del archivo?</li>
<li>¿Cuántas líneas de datos contiene?</li>
<li>¿Cuáles tipos de valores están almacenados en este archivo?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Al ejecutar estos comandos en la terminal:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lh</span> data/gapminder-FiveYearData.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-r--r-- 1 runner docker 80K Oct 16 16:27 data/gapminder-FiveYearData.csv</code></pre>
</div>
<p>El tamaño del archivo es 80K.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> data/gapminder-FiveYearData.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1705 data/gapminder-FiveYearData.csv</code></pre>
</div>
<p>Hay 1705 líneas. Los datos se ven así:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">head</span> data/gapminder-FiveYearData.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country,year,pop,continent,lifeExp,gdpPercap
Afghanistan,1952,8425333,Asia,28.801,779.4453145
Afghanistan,1957,9240934,Asia,30.332,820.8530296
Afghanistan,1962,10267083,Asia,31.997,853.10071
Afghanistan,1967,11537966,Asia,34.02,836.1971382
Afghanistan,1972,13079460,Asia,36.088,739.9811058
Afghanistan,1977,14880372,Asia,38.438,786.11336
Afghanistan,1982,12881816,Asia,39.854,978.0114388
Afghanistan,1987,13867957,Asia,40.822,852.3959448
Afghanistan,1992,16317921,Asia,41.674,649.3413952</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="tip-línea-de-comandos-en-r-studio" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-línea-de-comandos-en-r-studio" class="callout-inner">
<h3 class="callout-title">Tip: Línea de comandos en R Studio</h3>
<div class="callout-content">
<p>Puedes abrir rápidamente una terminal en RStudio usando la opción del
menú <strong>Tools -&gt; Shell…</strong>.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="control-de-versiones">Control de versiones<a class="anchor" aria-label="anchor" href="#control-de-versiones"></a>
</h3>
<p>Es importante llevar a cabo el control de versiones en un proyecto.
Ve <a href="https://swcarpentry.github.io/git-novice-es/14-supplemental-rstudio/" class="external-link">aquí</a>
para una buena lección donde se describe el uso de Git con R Studio.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar RStudio para crear y gestionar proyectos con un diseño
consistente.</li>
<li>Tratar los datos brutos como de sólo lectura.</li>
<li>Tratar la salida generada como disponible.</li>
<li>Definición y aplicación de funciones separadas.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-seeking-help"><p>Content from <a href="03-seeking-help.html">Buscando ayuda</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/03-seeking-help.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo obtener ayuda en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Poder leer archivos de ayuda de R, para funciones y operadores
especiales</li>
<li>Poder usar vistas de tareas CRAN para identificar paquetes para
resolver un problema</li>
<li>Para poder buscar ayuda de tus compañeros</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="palabras-clave" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="palabras-clave" class="callout-inner">
<h3 class="callout-title">Palabras clave</h3>
<div class="callout-content">
<p>Comando : Traducción</p>
<p><code>help</code> : ayuda</p>
<p><code>vignette</code> : viñeta</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="lectura-de-archivos-de-ayuda">Lectura de archivos de ayuda<a class="anchor" aria-label="anchor" href="#lectura-de-archivos-de-ayuda"></a>
</h2>
<hr class="half-width">
<p>R, y cada paquete, proporciona archivos de ayuda para las funciones.
La sintaxis general para buscar ayuda en cualquier función,
“function_name”, de una función específica que esté en un paquete
cargado dentro de tu <strong>namespace</strong> (tu sesión interactiva
en R):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">function_name</span></span>
<span><span class="fu">help</span><span class="op">(</span><span class="va">function_name</span><span class="op">)</span></span></code></pre>
</div>
<p>Esto cargará una página de ayuda en RStudio (o como texto sin formato
en R por sí mismo).</p>
<p>Cada página de ayuda se divide en secciones:</p>
<ul>
<li>Descripción: una descripción extendida de lo que hace la
función.</li>
<li>Uso: los argumentos de la función y sus valores
predeterminados.</li>
<li>Argumentos: una explicación de los datos que espera cada
argumento.</li>
<li>Detalles: cualquier detalle importante a tener en cuenta.</li>
<li>Valor: los datos que regresa la función.</li>
<li>Ver también: cualquier función relacionada que pueda serte
útil.</li>
<li>Ejemplos: algunos ejemplos de cómo usar la función.</li>
</ul>
<p>Las diferentes funciones pueden tener diferentes secciones, pero
estas son las principales que debes tener en cuenta.</p>
<div id="sugerencia-lectura-de-archivos-de-ayuda" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-lectura-de-archivos-de-ayuda" class="callout-inner">
<h3 class="callout-title">Sugerencia: Lectura de archivos de ayuda</h3>
<div class="callout-content">
<p>Uno de los aspectos más desalentadores de R es la gran cantidad de
funciones disponibles. Es muy difícil, si no imposible, recordar el uso
correcto para cada función que usas. Afortunadamente, están los archivos
de ayuda ¡lo que significa, que no tienes que hacerlo!</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="operadores-especiales">Operadores especiales<a class="anchor" aria-label="anchor" href="#operadores-especiales"></a>
</h2>
<hr class="half-width">
<p>Para buscar ayuda en operadores especiales, usa comillas:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="st">"&lt;-"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="obteniendo-ayuda-en-los-paquetes">Obteniendo ayuda en los paquetes<a class="anchor" aria-label="anchor" href="#obteniendo-ayuda-en-los-paquetes"></a>
</h2>
<hr class="half-width">
<p>Muchos paquetes vienen con “viñetas”: tutoriales y documentación de
ejemplo extendida. Sin ningún argumento, <code>vignette()</code> listará
todas las viñetas disponibles para todos los paquetes instalados;
<code>vignette(package="package-name")</code> listará todas las viñetas
disponibles para <code>package-name</code>, y
<code>vignette("vignette-name")</code> abrirá la viñeta
especificada.</p>
<p>Si un paquete no tiene viñetas, generalmente puedes encontrar ayuda
escribiendo <code>help("package-name")</code>.</p>
</section><section><h2 class="section-heading" id="cuando-recuerdas-un-poco-sobre-la-función">Cuando recuerdas un poco sobre la función<a class="anchor" aria-label="anchor" href="#cuando-recuerdas-un-poco-sobre-la-funci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>Si no estás seguro de en qué paquete está una función, o cómo se
escribe específicamente, puedes hacer una búsqueda difusa:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="op">?</span><span class="va">function_name</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="cuando-no-tienes-idea-de-dónde-comenzar">Cuando no tienes idea de dónde comenzar<a class="anchor" aria-label="anchor" href="#cuando-no-tienes-idea-de-d%C3%B3nde-comenzar"></a>
</h2>
<hr class="half-width">
<p>Si no sabes qué función o paquete necesitas usar, utiliza <a href="https://cran.at.r-project.org/web/views" class="external-link">CRAN Task Views</a> es
una lista especialmente mantenida de paquetes agrupados en campos. Este
puede ser un buen punto de partida.</p>
</section><section><h2 class="section-heading" id="cuando-tu-código-no-funciona-busca-ayuda-de-tus-compañeros">Cuando tu código no funciona: busca ayuda de tus compañeros<a class="anchor" aria-label="anchor" href="#cuando-tu-c%C3%B3digo-no-funciona-busca-ayuda-de-tus-compa%C3%B1eros"></a>
</h2>
<hr class="half-width">
<p>Si tienes problemas para usar una función, 9 de cada 10 veces, las
respuestas que estas buscando ya han sido respondidas en <a href="https://stackoverflow.com/" class="external-link">Stack Overflow</a>. Puedes buscar
usando la etiqueta <code>[r]</code>.</p>
<p>Si no puedes encontrar la respuesta, hay algunas funciones útiles
para ayudarte a hacer una pregunta a tus compañeros:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">dput</span></span></code></pre>
</div>
<p>Descargará los datos con los que estás trabajando en un formato para
que puedan ser copiados y pegados por cualquier otra persona en su
sesión de R.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessionInfo</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>R version 4.4.1 (2024-06-14)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 22.04.5 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.4.1 tools_4.4.1    yaml_2.3.10    knitr_1.48     xfun_0.47
[6] renv_1.0.11    evaluate_1.0.0</code></pre>
</div>
<p>Imprimirá tu versión actual de R, así como cualquier paquete que
hayas cargado. Esto puede ser útil para otros para ayudar a reproducir y
depurar tu problema.</p>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Buscar la ayuda para la función <code>c</code>. ¿Qué tipo de vector
crees que crearás si evalúas lo siguiente?:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">c</span><span class="op">(</span><span class="st">'d'</span>, <span class="st">'e'</span>, <span class="st">'f'</span><span class="op">)</span></span>
<span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="st">'f'</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>La función <code>c()</code> crea un vector, en el cual todos los
elementos son del mismo tipo. En el primer caso, los elementos son
numéricos, en el segundo, son <strong>character</strong>, y en el
tercero son <strong>character</strong>: los valores numéricos son
“forzados” para ser <strong>characters</strong>.</p>
</div>
</div>
</div>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Buscar la ayuda para la función <code>paste</code>. Tendrás que usar
esto más tarde. ¿Cuál es la diferencia entre los argumentos
<code>sep</code> y <code>collapse</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución para el desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Busca la ayuda de la función <code>paste()</code>, usa:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">help</span><span class="op">(</span><span class="st">"paste"</span><span class="op">)</span></span>
<span><span class="op">?</span><span class="va">paste</span></span></code></pre>
</div>
<p>La diferencia entre <code>sep</code> y <code>collapse</code> es un
poco complicada. La función <code>paste</code> acepta cualquier número
de argumentos, cada uno de los cuales puede ser un vector de cualquier
longitud. El argumento <code>sep</code> especifica la cadena usada entre
términos concatenados — por defecto, un espacio. El resultado es un
vector tan largo como el argumento más largo proporcionado a
<code>paste</code>. En cambio, <code>collapse</code> especifica que
después de la concatenación los elementos son <em>colapsados</em> juntos
utilizando el separador dado, y el resultado es una sola cadena.
e.g.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a c" "b c"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a,c" "b,c"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a c|b c"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, sep <span class="op">=</span> <span class="st">","</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a,c|b,c"</code></pre>
</div>
<p>(Para más información, ve a la parte inferior de la página de ayuda
<code>?paste</code> y busca los ejemplos, o prueba
<code>example('paste')</code>.)</p>
</div>
</div>
</div>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Usa la ayuda para encontrar una función (y sus parámetros asociados)
que tu puedas usar para cargar datos de un archivo csv en los cuales las
columnas están delimitadas con “\ t” (tab) y el punto decimal es un “.”
(punto). Esta comprobación para el separador decimal es importante,
especialmente si estás trabajando con colegas internacionales ya que
diferentes países tienen diferentes convenciones para el punto decimal
(i.e. coma vs. punto). sugerencia: usa <code>??csv</code> para buscar
funciones relacionadas con csv.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución para el desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>La función R estándar para leer archivos delimitados por tabuladores
con un separador de punto decimal es <code>read.delim()</code>. Tu
puedes hacer esto también con <code>read.table(file, sep="\t")</code>
(el punto es el separador decimal por defecto para
<code>read.table()</code>, aunque es posible que tengas que cambiar
también el argumento <code>comment.char</code> si tu archivo de datos
contiene caracteres numeral (#)</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="otros-recursos-útiles">Otros recursos útiles<a class="anchor" aria-label="anchor" href="#otros-recursos-%C3%BAtiles"></a>
</h2>
<hr class="half-width">
<ul>
<li><a href="https://www.statmethods.net/" class="external-link">Quick R</a></li>
<li><a href="https://www.rstudio.com/resources/cheatsheets/" class="external-link">RStudio
cheat sheets</a></li>
<li><a href="https://www.cookbook-r.com/" class="external-link">Cookbook for R</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar <code>help()</code> para obtener ayuda online de R.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04-data-structures-part1"><p>Content from <a href="04-data-structures-part1.html">Estructuras de datos</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/04-data-structures-part1.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo leer datos en R?</li>
<li>¿Cuáles son los tipos de datos básicos en R?</li>
<li>¿Cómo represento la información categórica en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Conocer los distintos tipos de datos.</li>
<li>Comenzar a explorar los <em>data frames</em> y entender cómo se
relacionan con <strong>vectors</strong>, <strong>factors</strong> y
<strong>lists</strong>.</li>
<li>Ser capaz de preguntar sobre el tipo, clase y estructura de un
objeto en R.</li>
<li>Conocer y entender qué es coerción y cuáles son los distintos tipos
de coerciones.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="palabras-clave" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="palabras-clave" class="callout-inner">
<h3 class="callout-title">Palabras clave</h3>
<div class="callout-content">
<p>Comando : Significado</p>
<p><em>data set</em> : conjunto de datos</p>
<p><code>c</code> : combinar</p>
<p><code>dim</code> : dimensión</p>
<p><code>nrow</code> : número de filas</p>
<p><code>ncol</code>: número de columnas</p>
</div>
</div>
</div>
<p>Una de las características más poderosas de R es su habilidad para
manejar datos tabulares - como los que puedes tener en una planilla de
cálculo o un archivo CSV. Comencemos creando un <strong>dataset</strong>
llamado <code>gatos</code> que se vea de la siguiente forma:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>color,peso,le_gusta_cuerda</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>mixto,<span class="fl">2.1</span>,<span class="dv">1</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>negro,<span class="fl">5.0</span>,<span class="dv">0</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>atigrado,<span class="fl">3.2</span>,<span class="dv">1</span></span></code></pre>
</div>
<p>Podemos usar la función <code>data.frame</code> para crearlo.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>color <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"mixto"</span>, <span class="st">"negro"</span>, <span class="st">"atigrado"</span><span class="op">)</span>,</span>
<span>                      peso <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2.1</span>, <span class="fl">5.0</span>, <span class="fl">3.2</span><span class="op">)</span>,</span>
<span>                      le_gusta_cuerda <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>                    </span>
<span><span class="va">gatos</span>                   </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso le_gusta_cuerda
1    mixto  2.1               1
2    negro  5.0               0
3 atigrado  3.2               1</code></pre>
</div>
<div id="consejo-edición-de-archivos-de-texto-en-r" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="consejo-edición-de-archivos-de-texto-en-r" class="callout-inner">
<h3 class="callout-title">Consejo: Edición de archivos de texto en R</h3>
<div class="callout-content">
<p>Crea el archivo <code>data/gatos-data.csv</code> en RStudio usando el
ítem del Menú <strong>Files -&gt; New folder</strong>. Ahid debes crear
el directorio data para poder guardar dentro el archivo gatos-data.csv.
Ahora sí usa
<code>write.csv(gatos, "data/gatos-data.csv", row.names=FALSE)</code>
para crear el archivo</p>
</div>
</div>
</div>
<p>Podemos leer el archivo en R con el siguiente comando:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/gatos-data.csv"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">gatos</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso le_gusta_cuerda
1    mixto  2.1               1
2    negro  5.0               0
3 atigrado  3.2               1</code></pre>
</div>
<p>La función <code>read.table</code> se usa para leer datos tabulares
almacenados en un archivo de texto donde las columnas de datos están
separadas por caracteres de puntuación, por ejemplo archivos CSV (csv =
valores separados por comas). Las tabulaciones y las comas son los
caracteres de puntuación más utilizados para separar o delimitar datos
en archivos csv. Para mayor comodidad, R proporciona otras 2 versiones
de “read.table”. Estos son: <code>read.csv</code> para archivos donde
los datos están separados por comas y <code>read.delim</code> para
archivos donde los datos están separados por tabulaciones. De estas tres
funciones, <code>read.csv</code> es el más utilizado. Si fuera
necesario, es posible anular o modificar el delimitador predeterminado
para <code>read.csv</code> y <code>read.delim</code>.</p>
<p>Podemos empezar a explorar el <strong>dataset</strong> inmediatamente
proyectando las columnas usando el operador <code>$</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">peso</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2.1 5.0 3.2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto    negro    atigrado
Levels: atigrado mixto negro</code></pre>
</div>
<p>Podemos hacer otras operaciones sobre las columnas. Por ejemplo,
podemos aumentar el peso de todos los gatos con:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">peso</span> <span class="op">+</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4.1 7.0 5.2</code></pre>
</div>
<p>Podemos imprimir los resultados en una oración</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="st">"El color del gato es"</span>, <span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "El color del gato es mixto"    "El color del gato es negro"
[3] "El color del gato es atigrado"</code></pre>
</div>
<p>Pero qué pasa con:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">peso</span> <span class="op">+</span> <span class="va">gatos</span><span class="op">$</span><span class="va">color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in Ops.factor(gatos$peso, gatos$color): '+' not meaningful for factors</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA NA NA</code></pre>
</div>
<p>Si adivinaste que el último comando iba a resultar en un error porque
<code>2.1</code> más <code>"negro"</code> no tiene sentido, estás en lo
cierto - y ya tienes alguna intuición sobre un concepto importante en
programación que se llama <em>tipos de datos</em>.</p>
<p>No importa cuán complicado sea nuestro análisis, todos los datos en R
se interpretan con uno de estos tipos de datos básicos. Este rigor tiene
algunas consecuencias importantes.</p>
<p>Hay 5 tipos de datos principales: <code>double</code>,
<code>integer</code>, <code>complex</code>, <code>logical</code> and
<code>character</code>.</p>
<p>Podemos preguntar cuál es la estructura de datos si usamos la función
<code>class</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "factor"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">peso</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "numeric"</code></pre>
</div>
<p>También podemos ver que <code>gatos</code> es un
<strong>data.frame</strong> si usamos la función <code>class</code>:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "data.frame"</code></pre>
</div>
<section><h2 class="section-heading" id="vectores-y-coerción-de-tipos">Vectores y Coerción de Tipos<a class="anchor" aria-label="anchor" href="#vectores-y-coerci%C3%B3n-de-tipos"></a>
</h2>
<hr class="half-width">
<p>Para entender mejor este comportamiento, veamos otra de las
estructuras de datos en R: el <strong>vector</strong>.</p>
<p>Un vector en R es esencialmente una lista ordenada de cosas, con la
condición especial de que <em>todos los elementos en un vector tienen
que ser del mismo tipo de datos básico</em>. Si no eliges un tipo de
datos, por defecto R elige el tipo de datos <strong>logical</strong>.
También puedes declarar un vector vacío de cualquier tipo que
quieras.</p>
<p>Una indicación del número de elementos en el vector - específicamente
los índices del vector, en este caso <code>[1:3]</code> y unos pocos
ejemplos de los elementos del vector - en este caso
<strong>strings</strong> vacíos.</p>
<p>Podemos ver que <code>gatos$peso</code> es un vector usando la
funcion <code>str</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">peso</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3] 2.1 5 3.2</code></pre>
</div>
<p>Las columnas de datos que cargamos en <strong>data.frames</strong> de
R son todas vectores y este es el motivo por el cual R requiere que
todas las columnas sean del mismo tipo de datos básico.</p>
<div id="discusión-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="discusión-1" class="callout-inner">
<h3 class="callout-title">Discusión 1</h3>
<div class="callout-content">
<p>¿Por qué R es tan obstinado acerca de lo que ponemos en nuestras
columnas de datos? ¿Cómo nos ayuda esto?</p>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Discusión 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Al mantener todos los elementos de una columna del mismo tipo,
podemos hacer suposiciones simples sobre nuestros datos; si puedes
interpretar un elemento en una columna como un número, entonces puedes
interpretar <em>todos</em> los elementos como números, y por tanto no
hace falta comprobarlo cada vez. Esta consistencia es lo que se suele
mencionar como <em>datos limpios</em>; a la larga, la consistencia
estricta hace nuestras vidas más fáciles cuando usamos R.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>También puedes crear vectores con contenido explícito con la función
<strong>combine</strong> o <code>c()</code>:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mi_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">mi_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2 6 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">mi_vector</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3] 2 6 3</code></pre>
</div>
<p>Dado lo que aprendimos hasta ahora, ¿qué crees que hace el siguiente
código?</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">otro_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span>,<span class="st">'3'</span><span class="op">)</span></span></code></pre>
</div>
<p>Esto se denomina <em>coerción de tipos de datos</em> y es motivo de
muchas sorpresas y la razón por la cual es necesario conocer los tipos
de datos básicos y cómo R los interpreta. Cuando R encuentra una mezcla
de tipos de datos (en este caso <strong>numeric</strong> y
<strong>character</strong>) para combinarlos en un vector, va a
forzarlos a ser del mismo tipo.</p>
<p>Considera:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vector_coercion</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">vector_coercion</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:2] "a" "TRUE"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">otro_vector_coercion</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">otro_vector_coercion</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:2] 0 1</code></pre>
</div>
<p>Las reglas de coerción son: <code>logical</code> -&gt;
<code>integer</code> -&gt; <code>numeric</code> -&gt;
<code>complex</code> -&gt; <code>character</code>, donde -&gt; se puede
leer como <em>se transforma en</em>. Puedes intentar forzar la coerción
de acuerdo a esta cadena usando las funciones <code>as.</code>:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vector_caracteres</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'0'</span>,<span class="st">'2'</span>,<span class="st">'4'</span><span class="op">)</span></span>
<span><span class="va">vector_caracteres</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "0" "2" "4"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">vector_caracteres</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:3] "0" "2" "4"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">caracteres_coercionados_numerico</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">vector_caracteres</span><span class="op">)</span></span>
<span><span class="va">caracteres_coercionados_numerico</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0 2 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">numerico_coercionado_logico</span> <span class="op">&lt;-</span> <span class="fu">as.logical</span><span class="op">(</span><span class="va">caracteres_coercionados_numerico</span><span class="op">)</span></span>
<span><span class="va">numerico_coercionado_logico</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE</code></pre>
</div>
<p>Como puedes notar, es sorprendete ver qué pasa cuando R forza la
conversión de un tipo de datos a otro. Es decir, si tus datos no lucen
como pensabas que deberían lucir, puede ser culpa de la coerción de
tipos. Por lo tanto, asegúrate que todos los elementos de tus vectores y
las columnas de tus <strong>data.frames</strong> sean del mismo tipo o
te encontrarás con sorpresas desagradables.</p>
<p>Pero la coerción de tipos también puede ser muy útil. Por ejemplo, en
los datos de <code>gatos</code>, <code>le_gusta_cuerda</code> es
numérica, pero sabemos que los 1s y 0s en realidad representan
<strong><code>TRUE</code></strong> y <strong><code>FALSE</code></strong>
(una forma habitual de representarlos). Deberíamos usar el tipo de datos
<strong><code>logical</code></strong> en este caso, que tiene dos
estados: <strong><code>TRUE</code></strong> o
<strong><code>FALSE</code></strong>, que es exactamente lo que nuestros
datos representan. Podemos convertir esta columna al tipo de datos
<strong><code>logical</code></strong> usando la función
<code>as.logical</code>:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">le_gusta_cuerda</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 0 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">le_gusta_cuerda</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">le_gusta_cuerda</span> <span class="op">&lt;-</span> <span class="fu">as.logical</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">le_gusta_cuerda</span><span class="op">)</span></span>
<span><span class="va">gatos</span><span class="op">$</span><span class="va">le_gusta_cuerda</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  TRUE FALSE  TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">le_gusta_cuerda</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "logical"</code></pre>
</div>
<p>La función <strong>combine</strong>, <code>c()</code>, también
agregará elementos al final de un vector existente:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ab</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span></span>
<span><span class="va">ab</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a" "b"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abc</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">ab</span>, <span class="st">'c'</span><span class="op">)</span></span>
<span><span class="va">abc</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a" "b" "c"</code></pre>
</div>
<p>También puedes hacer una serie de números así:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mySerie</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="va">mySerie</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">mySerie</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> int [1:5] 1 2 3 4 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">mySerie</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<p>Finalmente, puedes darle nombres a los elementos de tu vector:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">mySerie</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span><span class="op">)</span></span>
<span><span class="va">mySerie</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a b c d e
1 2 3 4 5 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">mySerie</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Named int [1:5] 1 2 3 4 5
 - attr(*, "names")= chr [1:5] "a" "b" "c" "d" ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">mySerie</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Comienza construyendo un vector con los números del 1 al 26.
Multiplica el vector por 2 y asigna al vector resultante, los nombres de
A hasta Z (Pista: hay un vector pre-definido llamado
<strong><code>LETTERS</code></strong>)</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución del desafío 1
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">26</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="factores">Factores<a class="anchor" aria-label="anchor" href="#factores"></a>
</h2>
<hr class="half-width">
<p>Otra estructura de datos importante se llama
<strong>factor</strong>.</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Factor w/ 3 levels "atigrado","mixto",..: 2 3 1</code></pre>
</div>
<p>Los factores usualmente parecen caracteres, pero se usan para
representar información categórica. Por ejemplo, construyamos un vector
de <strong>strings</strong> con etiquetas para las coloraciones para
todos los gatos en nuestro estudio:</p>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">capas</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'atigrado'</span>, <span class="st">'carey'</span>, <span class="st">'carey'</span>, <span class="st">'negro'</span>, <span class="st">'atigrado'</span><span class="op">)</span></span>
<span><span class="va">capas</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "atigrado" "carey"    "carey"    "negro"    "atigrado"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">capas</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:5] "atigrado" "carey" "carey" "negro" "atigrado"</code></pre>
</div>
<p>Podemos convertir un vector en un <strong>factor</strong> de la
siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">categorias</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">capas</span><span class="op">)</span></span>
<span><span class="fu">class</span><span class="op">(</span><span class="va">categorias</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "factor"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">categorias</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Factor w/ 3 levels "atigrado","carey",..: 1 2 2 3 1</code></pre>
</div>
<p>Ahora R puede interpretar que hay tres posibles categorías en
nuestros datos - pero también hizo algo sorprendente: en lugar de
imprimir los <strong>strings</strong> como se las dimos, imprimió una
serie de números. R ha reemplazado las categorías con índices numéricos,
lo cual es necesario porque muchos cálculos estadísticos usan esa
representación para datos categóricos:</p>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">capas</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">categorias</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "factor"</code></pre>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>¿Hay algún <strong>factor</strong> en nuestro
<strong>data.frame</strong> <code>gatos</code>? ¿Cuál es el nombre?
Intenta usar <code>?read.csv</code> para darte cuenta cómo mantener las
columnas de texto como vectores de caracteres en lugar de factores;
luego escribe uno o más comandos para mostrar que el
<strong>factor</strong> en <code>gatos</code> es en realidad un vector
de caracteres cuando se carga de esta manera.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Una solución es usar el argumento <code>stringAsFactors</code>:</p>
<div class="codewrapper sourceCode" id="cb81">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file<span class="op">=</span><span class="st">"data/gatos-data.csv"</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<p>Otra solución es usar el argumento <code>colClasses</code> que
permiten un control más fino.</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file<span class="op">=</span><span class="st">"data/gatos-data.csv"</span>, colClasses<span class="op">=</span><span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"character"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<p>Nota: Los nuevos estudiantes encuentran los archivos de ayuda
difíciles de entender; asegúrese de hacerles saber que esto es normal, y
anímelos a que tomen su mejor opción en función del significado
semántico, incluso si no están seguros.</p>
</div>
</div>
</div>
</div>
<p>En las funciones de modelado, es importante saber cuáles son los
niveles de referencia. Se asume que es el primer factor, pero por
defecto los factores están etiquetados en orden alfabetico. Puedes
cambiar esto especificando los niveles:</p>
<div class="codewrapper sourceCode" id="cb83">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">misdatos</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"caso"</span>, <span class="st">"control"</span>, <span class="st">"control"</span>, <span class="st">"caso"</span><span class="op">)</span></span>
<span><span class="va">factor_orden</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">misdatos</span>, levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"caso"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">factor_orden</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Factor w/ 2 levels "control","caso": 2 1 1 2</code></pre>
</div>
<p>En este caso, le hemos dicho explícitamente a R que “control” debería
estar representado por 1, y “caso” por 2. Esta designación puede ser muy
importante para interpretar los resultados de modelos estadísticos!</p>
</section><section><h2 class="section-heading" id="listas">Listas<a class="anchor" aria-label="anchor" href="#listas"></a>
</h2>
<hr class="half-width">
<p>Otra estructura de datos que querrás en tu bolsa de trucos es
<code>list</code>. Una lista es más simple en algunos aspectos que los
otros tipos, porque puedes poner cualquier cosa que tú quieras en
ella:</p>
<div class="codewrapper sourceCode" id="cb85">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lista</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span>, <span class="cn">TRUE</span>, <span class="fl">1</span><span class="op">+</span><span class="fl">4i</span><span class="op">)</span></span>
<span><span class="va">lista</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[1]]
[1] 1

[[2]]
[1] "a"

[[3]]
[1] TRUE

[[4]]
[1] 1+4i</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb87">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">otra_lista</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Numbers"</span>, numbers <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span>
<span><span class="va">otra_lista</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$title
[1] "Numbers"

$numbers
 [1]  1  2  3  4  5  6  7  8  9 10

$data
[1] TRUE</code></pre>
</div>
<p>Ahora veamos algo interesante acerca de nuestro
<strong>data.frame</strong>; ¿Qué pasa si corremos la siguiente
línea?</p>
<div class="codewrapper sourceCode" id="cb89">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<p>Vemos que los <strong>data.frames</strong> parecen listas ‘en su cara
oculta’ - esto es porque un <strong>data.frame</strong> es realmente una
lista de vectores y factores, como debe ser - para mantener esas
columnas que son una combinación de vectores y factores, el
<strong>data.frame</strong> necesita algo más flexible que un vector
para poner todas las columnas juntas en una tabla. En otras palabras, un
<code>data.frame</code> es una lista especial en la que todos los
vectores deben tener la misma longitud.</p>
<p>En nuestro ejemplo de <code>gatos</code>, tenemos una variable
<strong>integer</strong>, una <strong>double</strong> y una
<strong>logical</strong>. Como ya hemos visto, cada columna del
<strong>data.frame</strong> es un vector.</p>
<div class="codewrapper sourceCode" id="cb91">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto    negro    atigrado
Levels: atigrado mixto negro</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb93">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto    negro    atigrado
Levels: atigrado mixto negro</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb95">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gatos</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb97">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> Factor w/ 3 levels "atigrado","mixto",..: 2 3 1</code></pre>
</div>
<p>Cada fila es una <em>observación</em> de diferentes variables del
mismo <strong>data.frame</strong>, y por lo tanto puede estar compuesto
de elementos de diferentes tipos.</p>
<div class="codewrapper sourceCode" id="cb99">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  color peso le_gusta_cuerda
1 mixto  2.1            TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb101">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gatos</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb103">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1 obs. of  3 variables:
 $ color          : Factor w/ 3 levels "atigrado","mixto",..: 2
 $ peso           : num 2.1
 $ le_gusta_cuerda: logi TRUE</code></pre>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Hay varias maneras sutilmente diferentes de indicar variables,
observaciones y elementos de <strong>data.frames</strong>:</p>
<ul>
<li><code>gatos[1]</code></li>
<li><code>gatos[[1]]</code></li>
<li><code>gatos$color</code></li>
<li><code>gatos["color"]</code></li>
<li><code>gatos[1, 1]</code></li>
<li><code>gatos[, 1]</code></li>
<li><code>gatos[1, ]</code></li>
</ul>
<p>Investiga cada uno de los ejemplos anteriores y explica el resultado
de cada uno.</p>
<p><em>Sugerencia:</em> Usa la función
<strong><code>typeof()</code></strong> para examinar el resultado en
cada caso.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 3
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb105">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color
1    mixto
2    negro
3 atigrado</code></pre>
</div>
<p>Podemos interpretar un <strong>data frame</strong> como una lista de
vectores. Un único par de corchetes <code>[1]</code> resulta en la
primera proyección de la lista, como otra lista. En este caso es la
primera columna del <strong>data frame</strong>.</p>
<div class="codewrapper sourceCode" id="cb107">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto    negro    atigrado
Levels: atigrado mixto negro</code></pre>
</div>
<p>El doble corchete <code>[[1]]</code> devuelve el contenido del
elemento de la lista. En este caso, es el contenido de la primera
columna, un <em>vector</em> de tipo <em>factor</em>.</p>
<div class="codewrapper sourceCode" id="cb109">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto    negro    atigrado
Levels: atigrado mixto negro</code></pre>
</div>
<p>Este ejemplo usa el caracter <code>$</code> para direccionar
elementos por nombre. <em>color</em> es la primera columna del <em>data
frame</em>, de nuevo un <em>vector</em> de tipo <em>factor</em>.</p>
<div class="codewrapper sourceCode" id="cb111">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span><span class="st">"color"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color
1    mixto
2    negro
3 atigrado</code></pre>
</div>
<p>Aquí estamos usando un solo corchete <code>["color"]</code>
reemplazando el número del índice con el nombre de la columna. Como el
ejemplo 1, el objeto devuelto es un <em>list</em>.</p>
<div class="codewrapper sourceCode" id="cb113">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto
Levels: atigrado mixto negro</code></pre>
</div>
<p>Este ejemplo usa un solo corchete, pero esta vez proporcionamos
coordenadas de fila y columna. El objeto devuelto es el valor en la fila
1, columna 1. El objeto es un <em>integer</em> pero como es parte de un
<em>vector</em> de tipo <em>factor</em>, R muestra la etiqueta “mixto”
asociada con el valor entero.</p>
<div class="codewrapper sourceCode" id="cb115">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] mixto    negro    atigrado
Levels: atigrado mixto negro</code></pre>
</div>
<p>Al igual que en el ejemplo anterior, utilizamos corchetes simples y
proporcionamos las coordenadas de fila y columna. La coordenada de la
fila no se especifica, R interpreta este valor faltante como todos los
elementos en este <em>column</em> <em>vector</em>.</p>
<div class="codewrapper sourceCode" id="cb117">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  color peso le_gusta_cuerda
1 mixto  2.1            TRUE</code></pre>
</div>
<p>De nuevo, utilizamos el corchete simple con las coordenadas de fila y
columna. La coordenada de la columna no está especificada. El valor de
retorno es una <em>list</em> que contiene todos los valores en la
primera fila.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="matrices">Matrices<a class="anchor" aria-label="anchor" href="#matrices"></a>
</h2>
<hr class="half-width">
<p>Por último, pero no menos importante, están las matrices. Podemos
declarar una matriz llena de ceros de la siguiente forma:</p>
<div class="codewrapper sourceCode" id="cb119">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_example</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">0</span>, ncol<span class="op">=</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">matrix_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    0    0    0    0    0    0
[2,]    0    0    0    0    0    0
[3,]    0    0    0    0    0    0</code></pre>
</div>
<p>Y de manera similar a otras estructuras de datos, podemos preguntar
cosas sobre la matriz:</p>
<div class="codewrapper sourceCode" id="cb121">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "matrix" "array" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb123">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb125">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3, 1:6] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb127">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3 6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb129">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb131">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ncol</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>¿Cuál crees que es el resultado del comando
<code>length(matrix_example)</code>? Inténtalo. ¿Estabas en lo correcto?
¿Por qué / por qué no?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución al desafío 4
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>¿Cuál crees que es el resultado del comando
<code>length(matrix_example)</code>?</p>
<div class="codewrapper sourceCode" id="cb133">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_example</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">0</span>, ncol<span class="op">=</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">length</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 18</code></pre>
</div>
<p>Debido a que una matriz es un vector con atributos de dimensión
añadidos, <code>length</code> proporciona la cantidad total de elementos
en la matriz.</p>
</div>
</div>
</div>
</div>
<div id="desafío-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-5" class="callout-inner">
<h3 class="callout-title">Desafío 5</h3>
<div class="callout-content">
<p>Construye otra matriz, esta vez conteniendo los números 1:50, con 5
columnas y 10 renglones. ¿Cómo llenó la función
<strong><code>matrix</code></strong> de manera predeterminada la matriz,
por columna o por renglón? Investiga como cambiar este comportamento.
(Sugerencia: lee la documentación de la función
<strong><code>matrix</code></strong>.)</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Solución al desafío 5
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Construye otra matriz, esta vez conteniendo los números 1:50, con 5
columnas y 10 renglones. ¿Cómo llenó la función
<strong><code>matrix</code></strong> de manera predeterminada la matriz,
por columna o por renglón? Investiga como cambiar este comportamento.
(Sugerencia: lee la documentación de la función
<strong><code>matrix</code></strong>.)</p>
<div class="codewrapper sourceCode" id="cb135">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, ncol<span class="op">=</span><span class="fl">5</span>, nrow<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, ncol<span class="op">=</span><span class="fl">5</span>, nrow<span class="op">=</span><span class="fl">10</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># to fill by row</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-6" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-6" class="callout-inner">
<h3 class="callout-title">Desafío 6</h3>
<div class="callout-content">
<p>Crea una lista de longitud dos que contenga un vector de caracteres
para cada una de las secciones en esta parte del curso:</p>
<ul>
<li>tipos de datos</li>
<li>estructura de datos</li>
</ul>
<p>Inicializa cada vector de caracteres con los nombres de los tipos de
datos y estructuras de datos que hemos visto hasta ahora.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Solución al desafío 6
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb136">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataTypes</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'double'</span>, <span class="st">'complex'</span>, <span class="st">'integer'</span>, <span class="st">'character'</span>, <span class="st">'logical'</span><span class="op">)</span></span>
<span><span class="va">dataStructures</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'data.frame'</span>, <span class="st">'vector'</span>, <span class="st">'factor'</span>, <span class="st">'list'</span>, <span class="st">'matrix'</span><span class="op">)</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="va">dataTypes</span>, <span class="va">dataStructures</span><span class="op">)</span></span></code></pre>
</div>
<p>Nota: es útil hacer una lista en el pizarrón o en papel colgado en la
pared listando todos los tipos y estructuras de datos y mantener la
lista durante el resto del curso para recordar la importancia de estos
elementos básicos.</p>
</div>
</div>
</div>
</div>
<div id="desafío-7" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-7" class="callout-inner">
<h3 class="callout-title">Desafío 7</h3>
<div class="callout-content">
<p>Considera la salida de R para la siguiente matriz:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2]
[1,]    4    1
[2,]    9    5
[3,]   10    7</code></pre>
</div>
<p>¿Cuál fué el comando correcto para escribir esta matriz? Examina cada
comando e intenta determinar el correcto antes de escribirlos. Piensa en
qué matrices producirán los otros comandos.</p>
<ol style="list-style-type: decimal">
<li><code>matrix(c(4, 1, 9, 5, 10, 7), nrow = 3)</code></li>
<li><code>matrix(c(4, 9, 10, 1, 5, 7), ncol = 2, byrow = TRUE)</code></li>
<li><code>matrix(c(4, 9, 10, 1, 5, 7), nrow = 2)</code></li>
<li><code>matrix(c(4, 1, 9, 5, 10, 7), ncol = 2, byrow = TRUE)</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Solución al desafío 7
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<p>Considera la salida de R para la siguiente matriz:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2]
[1,]    4    1
[2,]    9    5
[3,]   10    7</code></pre>
</div>
<p>¿Cuál era el comando correcto para escribir esta matriz? Examina cada
comando e intenta determinar el correcto antes de escribirlos. Piensa en
qué matrices producirán los otros comandos.</p>
<div class="codewrapper sourceCode" id="cb139">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">7</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar <code>read.csv</code> para leer los datos tabulares en R.</li>
<li>Los vectores, factores, listas y dataframes son estructuras de datos
en R</li>
<li>Los tipos de datos básicos en R son <strong>double</strong>,
<strong>integer</strong>, <strong>complex</strong>,
<strong>logical</strong>, y <strong>character</strong>.</li>
<li>Los <strong>factors</strong> representan variables categóricas en
R.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-data-structures-part2"><p>Content from <a href="05-data-structures-part2.html">Explorando data frames</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/05-data-structures-part2.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo manipular un <em>data frame</em>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Poder agregar y quitar filas y columnas.</li>
<li>Poder quitar filas con valores <code>NA</code>.</li>
<li>Poder anexar dos <em>data frames</em>.</li>
<li>Poder articular qué es un <code>factor</code> y cómo convertir entre
<code>factor</code> y <code>character</code>.</li>
<li>Poder entender las propiedades básicas de un <em>data frame</em>,
incluyendo tamaño, clase o tipo de columnas, nombres y primeras
filas.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>A esta altura, ya viste los tipos y estructuras de datos básicos de R
y todo lo que hagas va a ser una manipulación de esas herramientas.
Ahora pasaremos a aprender un par de cosas sobre cómo trabajar con la
clase <em>data frame</em> (la estructura de datos que usarás la mayoría
del tiempo y que será la estrella del show). Un <em>data frame</em> es
la tabla que creamos al cargar información de un archivo csv.</p>
<div id="palabras-clave" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="palabras-clave" class="callout-inner">
<h3 class="callout-title">Palabras clave</h3>
<div class="callout-content">
<p>Comando : Traducción</p>
<p><code>nrow</code>: número de filas</p>
<p><code>ncol</code>: número de columnas</p>
<p><code>rbind</code>: combinar filas</p>
<p><code>cbind</code>: combinar columnas</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="agregando-columnas-y-filas-a-un-data-frame">Agregando columnas y filas a un data frame<a class="anchor" aria-label="anchor" href="#agregando-columnas-y-filas-a-un-data-frame"></a>
</h2>
<hr class="half-width">
<p>Aprendimos que las columnas en un <em>data frame</em> son vectores.
Por lo tanto, sabemos que nuestros datos son consistentes con el tipo de
dato dentro de esa columna. Si queremos agregar una nueva columna,
podemos empezar por crear un nuevo vector:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda
1    mixto  2.1                 1
2    negro  5.0                 0
3 atigrado  3.2                 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span></span></code></pre>
</div>
<p>Podemos entonces agregarlo como una columna via:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="va">edad</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda edad
1    mixto  2.1                 1    2
2    negro  5.0                 0    3
3 atigrado  3.2                 1    5</code></pre>
</div>
<p>Tenga en cuenta que fallará si tratamos de agregar un vector con un
número diferente de entradas que el número de filas en el marco de
datos.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu">cbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="va">edad</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(..., check.names = FALSE): arguments imply differing number of rows: 3, 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">cbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="va">edad</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(..., check.names = FALSE): arguments imply differing number of rows: 3, 2</code></pre>
</div>
<p>¿Por qué no funcionó? Claro, R quiere ver un elemento en nuestra
nueva columna para cada fila de la tabla:</p>
<p>Para que funcione, debemos tener <code>nrow(gatos)</code> =
<code>length(edad)</code>. Vamos a sobrescribir el contenido de los
gatos con nuestro nuevo marco de datos.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="va">edad</span><span class="op">)</span></span>
<span><span class="va">gatos</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda edad
1    mixto  2.1                 1    2
2    negro  5.0                 0    3
3 atigrado  3.2                 1    5</code></pre>
</div>
<p>Ahora, qué tal si agregamos filas, en este caso, la última vez vimos
que las filas de un <em>data frame</em> están compuestas por listas:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nueva_fila</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="st">"carey"</span>, <span class="fl">3.3</span>, <span class="cn">TRUE</span>, <span class="fl">9</span><span class="op">)</span></span>
<span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="va">nueva_fila</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in `[&lt;-.factor`(`*tmp*`, ri, value = "carey"): invalid factor level, NA
generated</code></pre>
</div>
<p>Qué significa el error que nos da R? ‘invalid factor level’ nos dice
algo acerca de factores (factors)… pero qué es un factor? Un factor es
un tipo de datos en R. Un factor es una categoría (por ejemplo, color)
con la que R puede hacer ciertas operaciones. Por ejemplo:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">colores</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"negro"</span>,<span class="st">"canela"</span>,<span class="st">"canela"</span>,<span class="st">"negro"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">levels</span><span class="op">(</span><span class="va">colores</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "canela" "negro" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nlevels</span><span class="op">(</span><span class="va">colores</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>Se puede reorganizar el orden de los factores para que en lugar de
que aparezcan por orden alfabético sigan el orden elegido por el
usuario.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">colores</span> <span class="co">## el orden actual</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] negro  canela canela negro
Levels: canela negro</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">colores</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">colores</span>, levels <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"negro"</span>, <span class="st">"canela"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">colores</span> <span class="co"># despues de re-organizar</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] negro  canela canela negro
Levels: negro canela</code></pre>
</div>
</section><section><h2 class="section-heading" id="factores">Factores<a class="anchor" aria-label="anchor" href="#factores"></a>
</h2>
<hr class="half-width">
<p>Los objetos de la clase <em>factor</em> son otro tipo de datos que
debemos usar con cuidado. Cuando R crea un <em>factor</em>, únicamente
permite los valores que originalmente estaban allí cuando cargamos los
datos. Por ejemplo, en nuestro caso ‘negro’, ‘canela’ y ‘atigrado’.
Cualquier categoría nueva que no entre en esas categorías será rechazada
(y se conviertirá en NA).</p>
<p>La advertencia (<em>Warning</em>) nos está diciendo que agregamos
‘carey’ a nuestro factor <em>color</em>. Pero los otros valores, 3.3 (de
tipo <em>numeric</em>), TRUE (de tipo <em>logical</em>), y 9 (de tipo
<em>numeric</em>) se añadieron exitosamente a <em>peso</em>,
<em>le_gusta_cuerda</em>, y <em>edad</em>, respectivamente, dado que
esos valores no son de tipo <em>factor</em>. Para añadir una nueva
categoría ‘carey’ al <em>data frame</em> gatos en la columna
<em>color</em>, debemos agregar explícitamente a ‘carey’ como un nuevo
nivel (<em>level</em>) en el factor:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "atigrado" "mixto"    "negro"   </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">levels</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fu">levels</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span>, <span class="st">'carey'</span><span class="op">)</span></span>
<span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="fu">list</span><span class="op">(</span><span class="st">"carey"</span>, <span class="fl">3.3</span>, <span class="cn">TRUE</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>De manera alternativa, podemos cambiar la columna a tipo
<em>character</em>. En este caso, perdemos las categorías, pero a partir
de ahora podemos incorporar cualquier palabra a la columna, sin
problemas con los niveles del factor.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	5 obs. of  4 variables:
 $ color            : Factor w/ 4 levels "atigrado","mixto",..: 2 3 1 NA 4
 $ peso             : num  2.1 5 3.2 3.3 3.3
 $ legusta_la_cuerda: num  1 0 1 1 1
 $ edad             : num  2 3 5 9 9</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu">as.character</span><span class="op">(</span><span class="va">gatos</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	5 obs. of  4 variables:
 $ color            : chr  "mixto" "negro" "atigrado" NA ...
 $ peso             : num  2.1 5 3.2 3.3 3.3
 $ legusta_la_cuerda: num  1 0 1 1 1
 $ edad             : num  2 3 5 9 9</code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Imaginemos que, como los perros, 1 año humano es equivalente a 7 años
en los gatos (La compañía Purina usa <a href="https://www.proplan.com/gatos/cat-edad-calculator" class="external-link">un algoritmo
más sofisticado</a>).</p>
<ol style="list-style-type: decimal">
<li>Crea un vector llamado <code>human.edad</code> multiplicando
<code>gatos$edad</code> por 7.</li>
<li>Convierte <code>human.edad</code> a <em>factor</em>.</li>
<li>Convierte <code>human.edad</code> de nuevo a un vector numérico
usando la función <code>as.numeric()</code>. Ahora, divide por 7 para
regresar a las edades originales. Explica lo sucedido.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al Desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><code>human.edad &lt;- gatos$edad * 7</code></li>
<li>
<code>human.edad &lt;- factor(human.edad)</code> o
<code>as.factor(human.edad)</code> las dos opciones funcionan igual de
bien.</li>
<li>
<code>as.numeric(human.edad)</code> produce <code>1 2 3 4 4</code>
porque los factores se guardan como objetos de tipo entero
<em>integer</em> (1:4), cada uno de los cuales tiene asociado una
etiqueta <em>label</em> (28, 35, 56, y 63). Convertir un objeto de un
tipo de datos a otro, por ejemplo de <em>factor</em> a <em>numeric</em>
nos dá los enteros, no las etiquetas <em>labels</em>. Si queremos los
números originales, necesitamos un paso intermedio, debemos convertir
<code>human.edad</code> al tipo <em>character</em> y luego a
<em>numeric</em> (¿cómo funciona esto?). Esto aparece en la vida real
cuando accidentalmente incluimos un <em>character</em> en alguna columna
de nuestro archivo .csv, que se suponía que únicamente contendría
números. Tendremos este problema, si al leer el archivo olvidamos
incluir <code>stringsAsFactors=FALSE</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="quitando-filas">Quitando filas<a class="anchor" aria-label="anchor" href="#quitando-filas"></a>
</h2>
<hr class="half-width">
<p>Ahora sabemos cómo agregar filas y columnas a nuestro <em>data
frame</em> en R, pero en nuestro primer intento para agregar un gato
llamado ‘carey’ agregamos una fila que no sirve.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda edad
1    mixto  2.1                 1    2
2    negro  5.0                 0    3
3 atigrado  3.2                 1    5
4     &lt;NA&gt;  3.3                 1    9
5    carey  3.3                 1    9</code></pre>
</div>
<p>Podemos pedir el <em>data frame</em> sin la fila errónea:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span><span class="op">-</span><span class="fl">4</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda edad
1    mixto  2.1                 1    2
2    negro  5.0                 0    3
3 atigrado  3.2                 1    5
5    carey  3.3                 1    9</code></pre>
</div>
<p>Notar que -4 significa que queremos remover la cuarta fila, la coma
sin nada detrás indica que se aplica a todas las columnas. Podríamos
remover ambas filas en un llamado usando ambos números dentro de un
vector: <code>gatos[c(-4,-5),]</code></p>
<p>Alternativamente, podemos eliminar filas que contengan valores
<code>NA</code>:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">na.omit</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda edad
1    mixto  2.1                 1    2
2    negro  5.0                 0    3
3 atigrado  3.2                 1    5
5    carey  3.3                 1    9</code></pre>
</div>
<p>Volvamos a asignar el nuevo resultado <em>output</em> al <em>data
frame</em> <code>gatos</code>, así nuestros cambios son permanentes:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">na.omit</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="eliminando-columnas">Eliminando columnas<a class="anchor" aria-label="anchor" href="#eliminando-columnas"></a>
</h2>
<hr class="half-width">
<p>También podemos eliminar columnas en un <em>data frame</em>. Hay dos
formas de eliminar una columna: por número o nombre de índice.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span><span class="op">[</span>,<span class="op">-</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda
1    mixto  2.1                 1
2    negro  5.0                 0
3 atigrado  3.2                 1
5    carey  3.3                 1</code></pre>
</div>
<p>Observa la coma sin nada antes, lo que indica que queremos mantener
todas las filas.</p>
<p>Alternativamente, podemos quitar la columna usando el nombre del
índice.</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">drop</span> <span class="op">&lt;-</span> <span class="fu">names</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"edad"</span><span class="op">)</span></span>
<span><span class="va">gatos</span><span class="op">[</span>,<span class="op">!</span><span class="va">drop</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda
1    mixto  2.1                 1
2    negro  5.0                 0
3 atigrado  3.2                 1
5    carey  3.3                 1</code></pre>
</div>
</section><section><h2 class="section-heading" id="añadiendo-filas-o-columnas-a-un-data-frame">Añadiendo filas o columnas a un data frame<a class="anchor" aria-label="anchor" href="#a%C3%B1adiendo-filas-o-columnas-a-un-data-frame"></a>
</h2>
<hr class="half-width">
<p>La clave que hay que recordar al añadir datos a un <em>data
frame</em> es que <em>las columnas son vectores o factores, mientras que
las filas son listas</em>. Podemos pegar dos <em>data frames</em> usando
<code>rbind</code> que significa unir las filas (verticalmente):</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gatos</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">gatos</span>, <span class="va">gatos</span><span class="op">)</span></span>
<span><span class="va">gatos</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      color peso legusta_la_cuerda edad
1     mixto  2.1                 1    2
2     negro  5.0                 0    3
3  atigrado  3.2                 1    5
5     carey  3.3                 1    9
11    mixto  2.1                 1    2
21    negro  5.0                 0    3
31 atigrado  3.2                 1    5
51    carey  3.3                 1    9</code></pre>
</div>
<p>Pero ahora los nombres de las filas <em>rownames</em> son
complicados. Podemos removerlos y R los nombrará nuevamente, de manera
secuencial:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rownames</span><span class="op">(</span><span class="va">gatos</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">gatos</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     color peso legusta_la_cuerda edad
1    mixto  2.1                 1    2
2    negro  5.0                 0    3
3 atigrado  3.2                 1    5
4    carey  3.3                 1    9
5    mixto  2.1                 1    2
6    negro  5.0                 0    3
7 atigrado  3.2                 1    5
8    carey  3.3                 1    9</code></pre>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Puedes crear un nuevo <em>data frame</em> desde R con la siguiente
sintaxis:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span><span class="op">)</span>,</span>
<span>                 x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>                 y <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>                 stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>Crear un data frame que contenga la siguiente información
personal:</p>
<ul>
<li>nombre</li>
<li>apellido</li>
<li>número favorito</li>
</ul>
<p>Luego usa <code>rbind</code> para agregar una entrada para la gente
sentada alrededor tuyo. Finalmente, usa <code>cbind</code> para agregar
una columna con espacio para que cada persona conteste a la siguiente
pregunta: “¿Es hora de una pausa?”</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al Desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>first <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">'Grace'</span><span class="op">)</span>,</span>
<span>                 apellido <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">'Hopper'</span><span class="op">)</span>,</span>
<span>                 numero_favorito <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>                 stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">df</span>, <span class="fu">list</span><span class="op">(</span><span class="st">'Marie'</span>, <span class="st">'Curie'</span>, <span class="fl">238</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">df</span>, cafe <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="ejemplo-realista">Ejemplo realista<a class="anchor" aria-label="anchor" href="#ejemplo-realista"></a>
</h2>
<hr class="half-width">
<p>Hasta ahora, hemos visto las manipulaciones básicas que pueden
hacerse en un <em>data frame</em>. Ahora, vamos a extender esas
habilidades con un ejemplo más real. Vamos a importar el
<strong>gapminder dataset</strong> que descargamos previamente:</p>
<p>La función <code>read.table</code> se usa para leer datos tabulares
que están guardados en un archivo de texto, donde las columnas de datos
están separadas por un signo de puntuación como en los archivos CSV
(donde <strong>csv</strong> es <strong>comma-separated values</strong>
en inglés, es decir, valores separados por comas).</p>
<p>Los signos de puntuación más comunmente usados para separar o
delimitar datos en archivos de texto son tabuladores y comas. Por
conveniencia, R provee dos versiones de la función
<code>read.table</code>. Estas versiones son: <code>read.csv</code> para
archivos donde los datos están separados por comas y
<code>read.delim</code> para archivos donde los datos están separados
por tabuladores. De las tres variantes, <code>read.csv</code> es la más
comúnmente usada. De ser necesario, es posible sobrescribir el signo de
puntuación usado por defecto para ambas funciones: <code>read.csv</code>
y <code>read.delim</code>.</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div id="tips-misceláneos" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tips-misceláneos" class="callout-inner">
<h3 class="callout-title">Tips misceláneos</h3>
<div class="callout-content">
<ul>
<li><p>Otro tipo de archivo que puedes encontrar es el separado por
tabuladores (.tsv). Para especificar este separador, usa
<code>"\t"</code> o <code>read.delim()</code>.</p></li>
<li><p>Los archivos pueden descargarse de Internet a una carpeta local
usando <code>download.file</code>. La función <code>read.csv</code>
puede ser ejecutada para leer el archivo descargado, por
ejemplo:</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/gh-pages/_episodes_rmd/data/gapminder-FiveYearData.csv"</span>, destfile <span class="op">=</span> <span class="st">"data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span>
<span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>De manera alternativa, puedes leer los archivos directamente en R,
usando una dirección web y <code>read.csv</code>. Es importante notar
que, si se hace esto último, no habrá una copia local del archivo csv en
tu computadora. Por ejemplo,</li>
</ul>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/gh-pages/_episodes_rmd/data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Puedes leer directamente planillas de Excel sin necesidad de
convertirlas a texto plano usando el paquete <a href="https://cran.r-project.org/package=readxl" class="external-link">readxl</a>.</li>
</ul>
</div>
</div>
</div>
<p>Vamos a investigar gapminder un poco; lo primero que hay que hacer
siempre es ver cómo se ve el dataset usando <code>str</code>:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1704 obs. of  6 variables:
 $ country  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num  8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr  "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<p>También podemos examinar columnas individuales del <em>data
frame</em> con la función <code>typeof</code>:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:1704] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</code></pre>
</div>
<p>También podemos interrogar al <em>data frame</em> por la información
sobre sus dimensiones; recordando que <code>str(gapminder)</code> dijo
que había 1704 observaciones de 6 variables en gapminder, ¿qué piensas
que el siguiente código producirá y por qué?</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<p>Un intento certero hubiera sido decir que el largo
(<code>length</code>) de un <em>data frame</em> es el número de filas
(1704), pero no es el caso; recuerda, un <em>data frame es una lista de
vectores y factors</em>.</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<p>Cuando <code>length</code> devuelve 6, es porque gapminder está
construida por una lista de 6 columnas. Para conseguir el número de
filas, intenta:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ncol</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<p>O, para obtener ambos de una vez:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704    6</code></pre>
</div>
<p>Probablemente queremos saber los nombres de las columnas. Para
hacerlo, podemos pedir:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">colnames</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "country"   "year"      "pop"       "continent" "lifeExp"   "gdpPercap"</code></pre>
</div>
<p>A esta altura, es importante preguntarnos si la estructura de R está
en sintonía con nuestra intuición y nuestras expectativas, ¿tienen
sentido los tipos de datos reportados para cada columna? Si no lo
tienen, necesitamos resolver cualquier problema antes de que se
conviertan en sorpresas ingratas luego. Podemos hacerlo usando lo que
aprendimos sobre cómo R interpreta los datos y la importancia de la
estricta consistencia con la que registramos los datos.</p>
<p>Una vez que estamos contentos con el tipo de datos y que la
estructura parece razonable, es tiempo de empezar a investigar nuestros
datos. Mira las siguientes líneas:</p>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007
4 Afghanistan 1967 11537966      Asia  34.020  836.1971
5 Afghanistan 1972 13079460      Asia  36.088  739.9811
6 Afghanistan 1977 14880372      Asia  38.438  786.1134</code></pre>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>También es útil revisar algunas líneas en el medio y el final del
<strong>data frame</strong> ¿Cómo harías eso?</p>
<p>Buscar líneas exactamente en el medio no es tan difícil, pero
simplemente revisar algunas lineas al azar es suficiente. ¿cómo harías
eso?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Para revisar las últimas líneas del <em>data frame</em> R tiene una
función para esto:</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tail</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1699 Zimbabwe 1982  7636524    Africa  60.363  788.8550
1700 Zimbabwe 1987  9216418    Africa  62.351  706.1573
1701 Zimbabwe 1992 10704340    Africa  60.377  693.4208
1702 Zimbabwe 1997 11404948    Africa  46.809  792.4500
1703 Zimbabwe 2002 11926563    Africa  39.989  672.0386
1704 Zimbabwe 2007 12311143    Africa  43.487  469.7093</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tail</span><span class="op">(</span><span class="va">gapminder</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1690   Zambia 1997  9417789    Africa  40.238 1071.3538
1691   Zambia 2002 10595811    Africa  39.193 1071.6139
1692   Zambia 2007 11746035    Africa  42.384 1271.2116
1693 Zimbabwe 1952  3080907    Africa  48.451  406.8841
1694 Zimbabwe 1957  3646340    Africa  50.469  518.7643
1695 Zimbabwe 1962  4277736    Africa  52.358  527.2722
1696 Zimbabwe 1967  4995432    Africa  53.995  569.7951
1697 Zimbabwe 1972  5861135    Africa  55.635  799.3622
1698 Zimbabwe 1977  6642107    Africa  57.674  685.5877
1699 Zimbabwe 1982  7636524    Africa  60.363  788.8550
1700 Zimbabwe 1987  9216418    Africa  62.351  706.1573
1701 Zimbabwe 1992 10704340    Africa  60.377  693.4208
1702 Zimbabwe 1997 11404948    Africa  46.809  792.4500
1703 Zimbabwe 2002 11926563    Africa  39.989  672.0386
1704 Zimbabwe 2007 12311143    Africa  43.487  469.7093</code></pre>
</div>
<p>Para revisar algunas lineas al azar?</p>
<div class="section level2">
<h2 id="sugerencia-hay-muchas-maneras-de-hacer-esto">sugerencia: Hay muchas maneras de hacer esto<a class="anchor" aria-label="anchor" href="#sugerencia-hay-muchas-maneras-de-hacer-esto"></a>
</h2>
<p>La solución que presentamos aquí utiliza funciones anidadas, por
ejemplo una función es el argumento de otra función. Esto te puede
parecer nuevo, pero ya lo haz usado. Recuerda <em>my_dataframe[rows,
cols]</em> imprime el <em>data frame</em> con la sección de filas y
columnas definidas (incluso puedes seleccionar un rando de filas y
columnas usando <strong>:</strong> por ejemplo). Para obtener un número
al azar o varios números al azar R tiene una función llamada
<em>sample</em>.</p>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fu">sample</span><span class="op">(</span><span class="fu">nrow</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         country year       pop continent lifeExp gdpPercap
209      Burundi 1972   3529983    Africa  44.057  464.0995
172       Brazil 1967  88049823  Americas  57.632 3429.8644
8    Afghanistan 1987  13867957      Asia  40.822  852.3959
1139     Nigeria 2002 119901274    Africa  46.608 1615.2864
499      Eritrea 1982   2637297    Africa  43.890  524.8758</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Para que nuestro análisis sea reproducible debemos poner el código en
un <em>script</em> al que podremos volver y editar en el futuro.</p>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>Ve a Archivo -&gt; nuevo -&gt; R script, y crea un script de R
llamado load-gapminder.R para cargar el dataset gapminder. Ponlo en el
directorio <code>scripts/</code> y agrégalo al control de versiones.</p>
<p>Ejecuta el script usando la función <code>source</code>, usando el
path como su argumento o apretando el botón de “source” en RStudio.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Los contenidos de <code>scripts/load-gapminder.R</code>:</p>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/gh-pages/_episodes_rmd/data/gapminder-FiveYearData.csv"</span>, destfile <span class="op">=</span> <span class="st">"data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span>
<span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>Para ejecutar el script y cargar los archivos en la variable
<code>gapminder</code>:</p>
<p>Para ejecutar el script y cargar los archivos en la variable
<code>gapminder</code>:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">source</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"scripts/load-gapminder.R"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-5" class="callout-inner">
<h3 class="callout-title">Desafío 5</h3>
<div class="callout-content">
<p>Leer el output de <code>str(gapminder)</code> de nuevo; esta vez,
usar lo que has aprendido de factores, listas y vectores, las funciones
como <code>colnames</code> y <code>dim</code> para explicar qué
significa el output de <code>str</code>. Si hay partes que no puedes
entender, discútelo con tus compañeros.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución desafío 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>El objeto <code>gapminder</code> es un data frame con columnas</p>
<ul>
<li>
<code>country</code> y <code>continent</code> como
<em>factors</em>.</li>
<li>
<code>year</code> como <em>integer vector</em>.</li>
<li>
<code>pop</code>, <code>lifeExp</code>, and <code>gdpPercap</code>
como <em>numeric vectors</em>.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar <code>cbind()</code> para agregar una nueva columna a un
<em>data frame</em>
</li>
<li>Usar <code>rbind()</code> para agregar una nueva fila a un <em>data
frame</em>
</li>
<li>Quitar filas de un <em>data frame</em>
</li>
<li>Usar <code>na.omit()</code> para remover filas de un <em>data
frame</em> con valores <code>NA</code>
</li>
<li>Usar <code>levels()</code> y <code>as.character()</code> para
explorar y manipular columnas de clase <em>factor</em>
</li>
<li>Usar <code>str()</code>, <code>nrow()</code>, <code>ncol()</code>,
<code>dim()</code>, <code>colnames()</code>, <code>rownames()</code>,
<code>head()</code> y <code>typeof()</code> para entender la estructura
de un <em>data frame</em>
</li>
<li>Leer un archivo csv usando <code>read.csv()</code>
</li>
<li>Entender el uso de <code>length()</code> en un <em>data
frame</em>
</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-data-subsetting"><p>Content from <a href="06-data-subsetting.html">Haciendo subconjuntos de datos</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/06-data-subsetting.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo trabajar con subconjuntos de datos en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Ser capaz de hacer subconjuntos de vectores, factores, matrices,
listas y <em>data frames</em>.</li>
<li>Ser capaz de extraer uno o multiples elementos: por posición, por
nombre, o usando operaciones de comparación.</li>
<li>Ser capaz de saltar y quitar elementos de diferentes estructuras de
datos.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>R dispone de muchas operaciones para generar subconjuntos. Dominarlas
te permitirá hacer fácilmente operaciones muy complejas en cualquier
<strong>dataset</strong>.</p>
<p>Existen seis maneras distintas por las cuales se puede hacer un
subconjunto de datos de cualquier objeto, y existen tres operadores
distintos para hacer subconjuntos para las diferentes estructuras de
datos.</p>
<p>Empecemos con el caballito de batalla de R: un vector numérico.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d   e
5.4 6.2 7.1 4.8 7.5 </code></pre>
</div>
<div id="vectores-atómicos" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="vectores-atómicos" class="callout-inner">
<h3 class="callout-title">Vectores atómicos</h3>
<div class="callout-content">
<p>En R, un vector puede contener palabras, números o valores lógicos.
Estos son llamados vectores <em>atómicos</em> ya que no se pueden
simplificar más.</p>
</div>
</div>
</div>
<p>Ya que creamos un vector ejemplo juguemos con él, ¿cómo podemos
acceder a su contenido?</p>
<section><h2 class="section-heading" id="accediendo-a-los-elementos-del-vector-usando-sus-índices">Accediendo a los elementos del vector usando sus índices<a class="anchor" aria-label="anchor" href="#accediendo-a-los-elementos-del-vector-usando-sus-%C3%ADndices"></a>
</h2>
<hr class="half-width">
<p>Para extraer elementos o datos de un vector podemos usar su índice
correspondiente, empezando por uno:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>  <span class="va">a</span></span>
<span><span class="fl">5.4</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>  <span class="va">d</span></span>
<span><span class="fl">4.8</span> </span></code></pre>
</div>
<p>No lo parece, pero el operador corchetes es una función. Para los
vectores (y las matrices), esto significa “dame el n-ésimo
elemento”.</p>
<p>También podemos pedir varios elementos al mismo tiempo:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   c
5.4 7.1 </code></pre>
</div>
<p>O podemos tomar un rango del vector:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d
5.4 6.2 7.1 4.8 </code></pre>
</div>
<p>el operador <code>:</code> crea una sucesión de números del valor a
la izquierda hasta el de la derecha.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<p>También podemos pedir el mismo elemento varias veces:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   a   c
5.4 5.4 7.1 </code></pre>
</div>
<p>Si pedimos por índices mayores a la longitud del vector, R regresará
un valor faltante.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;NA&gt;
  NA </code></pre>
</div>
<p>Este es un vector de longitud uno que contiene un <code>NA</code>,
cuyo nombre también es <code>NA</code>.</p>
<p>Si pedimos el elemento en el índice 0, obtendremos un vector
vacío.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">0</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>named numeric(0)</code></pre>
</div>
<div id="la-numeración-de-r-comienza-en-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="la-numeración-de-r-comienza-en-1" class="callout-inner">
<h3 class="callout-title">La numeración de R comienza en 1</h3>
<div class="callout-content">
<p>En varios lenguajes de programación (C y Python por ejemplo), el
primer elemento de un vector tiene índice 0. En R, el primer elemento
tiene el índice 1.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="saltando-y-quitando-elementos">Saltando y quitando elementos<a class="anchor" aria-label="anchor" href="#saltando-y-quitando-elementos"></a>
</h2>
<hr class="half-width">
<p>Si usamos un valor negativo como índice para un vector, R regresará
cada elemento <em>excepto</em> lo que se ha especificado:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   c   d   e
5.4 7.1 4.8 7.5 </code></pre>
</div>
<p>También podemos saltar o no mostrar varios elementos:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span><span class="op">]</span>  <span class="co"># o bien x[-c(1,5)]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div id="sugerencia-orden-de-las-operaciones" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-orden-de-las-operaciones" class="callout-inner">
<h3 class="callout-title">Sugerencia: Orden de las operaciones</h3>
<div class="callout-content">
<p>Un pequeño obstáculo para los novatos ocurre cuando tratan de saltar
rangos de elementos de un vector. Es natural tratar de filtrar una
sucesión de la siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<p>Esto nos devuelve un error algo críptico:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in x[-1:3]: only 0's may be mixed with negative subscripts</code></pre>
</div>
<p>Pero recuerda el orden de las operaciones. <code>:</code> es en
realidad una función. Toma como primer elemento -1 y como segundo 3, por
lo que se genera la sucesión de números:
<code>c(-1, 0, 1, 2, 3)</code>.</p>
<p>La solución correcta sería empaquetar la llamada de la función dentro
de paréntesis, de está manera el operador <code>-</code> se aplica al
resultado:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  d   e
4.8 7.5 </code></pre>
</div>
</div>
</div>
</div>
<p>Para quitar los elementos de un vector, será necesario que asignes el
resultado de vuelta a la variable:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   e
5.4 6.2 7.1 7.5 </code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Dado el siguiente código:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d   e
5.4 6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>Encuentra al menos 3 comandos distintos que produzcan la siguiente
salida:</p>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<p>Después de encontrar los tres comandos distintos, compáralos con los
de tu vecino. ¿Tuvieron distintas estrategias?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="haciendo-subconjuntos-por-nombre">Haciendo subconjuntos por nombre<a class="anchor" aria-label="anchor" href="#haciendo-subconjuntos-por-nombre"></a>
</h2>
<hr class="half-width">
<p>Podemos extraer elementos usando sus nombres, en lugar de extraerlos
por índice:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span>a<span class="op">=</span><span class="fl">5.4</span>, b<span class="op">=</span><span class="fl">6.2</span>, c<span class="op">=</span><span class="fl">7.1</span>, d<span class="op">=</span><span class="fl">4.8</span>, e<span class="op">=</span><span class="fl">7.5</span><span class="op">)</span> <span class="co"># podemos nombrar un vector en la misma línea</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   c
5.4 7.1 </code></pre>
</div>
<p>Esta forma es mucho más segura para hacer subconjuntos: las
posiciones de muchos elementos pueden cambiar a menudo cuando estamos
creando una cadena de subconjuntos, ¡pero los nombres siempre permanecen
iguales!</p>
</section><section><h2 class="section-heading" id="creando-subconjuntos-usando-operaciones-lógicas">Creando subconjuntos usando operaciones lógicas<a class="anchor" aria-label="anchor" href="#creando-subconjuntos-usando-operaciones-l%C3%B3gicas"></a>
</h2>
<hr class="half-width">
<p>También podemos usar un vector con elementos lógicos para hacer
subconjuntos:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  c   e
7.1 7.5 </code></pre>
</div>
<p>Dado que los operadores de comparación (e.g. <code>&gt;</code>,
<code>&lt;</code>, <code>==</code>) dan como resultado valores lógicos,
podemos usarlos para crear subconjuntos de manera mas sintética: la
siguiente instrucción tiene el mismo resultado que el anterior.</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">7</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  c   e
7.1 7.5 </code></pre>
</div>
<p>Explicando un poco lo que sucedió, la instrucción
<code>x&gt;7</code>, genera un vector lógico
<code>c(FALSE, FALSE, TRUE, FALSE, TRUE)</code> y después éste
selecciona los elementos de <code>x</code> correspondientes a los
valores <code>TRUE</code>.</p>
<p>Podemos usar <code>==</code> para imitar el método anterior de
indexar con nombre (recordemos que se usa <code>==</code> en vez de
<code>=</code> para comparar):</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>  <span class="va">a</span></span>
<span><span class="fl">5.4</span> </span></code></pre>
</div>
<div id="sugerencia-combinando-condiciones-lógicas" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-combinando-condiciones-lógicas" class="callout-inner">
<h3 class="callout-title">Sugerencia: Combinando condiciones lógicas</h3>
<div class="callout-content">
<p>Muchas veces queremos combinar varios criterios lógicos. Por ejemplo,
tal vez queramos encontrar todos los países en Asia <em>o</em> (en
inglés <strong>or</strong>) Europe <em>y</em> (en inglés
<strong>and</strong>) con esperanza de vida en cierto rango. Existen
muchas operaciones para combinar vectores con elementos lógicos en
R:</p>
<ul>
<li>
<code>&amp;</code>, el operador “lógico AND”: regresa
<code>TRUE</code> si tanto la derecha y la izquierda son
<code>TRUE</code>.</li>
<li>
<code>|</code>, el operador “lógico OR”: regresa <code>TRUE</code>,
si la derecha o la izquierda (o ambos) son <code>TRUE</code>.</li>
</ul>
<p>A veces encontrarás <code>&amp;&amp;</code> y <code>̣||</code> en vez
de <code>&amp;</code> y <code>|</code>. Los operadores de dos caracteres
solo comparan los primeros elementos de cada vector e ignoran las demás
elementos. En general no debes usar los operadores de dos caracteres en
el análisis de datos; déjalos para la programación, i.e. para decir
cuando se ejecutara una instrucción.</p>
<ul>
<li>
<code>!</code>, el operador “lógico NOT”: convierte
<code>TRUE</code> a <code>FALSE</code> y <code>FALSE</code> a
<code>TRUE</code>. Puede negar una sola condición lógica
(e.g. <code>!TRUE</code> se vuelve <code>FALSE</code>), o un vector
<strong>logical</strong> (e.g. <code>!c(TRUE, FALSE)</code> se vuelve
<code>c(FALSE, TRUE)</code>).</li>
</ul>
<p>Más aún, puedes comparar todos los elementos de un vector entre ellos
usando la función <code>all</code> (que regresa <code>TRUE</code> si
todos los elementos del vector son <code>TRUE</code>) y la función
<code>any</code> (que regresa <code>TRUE</code> si uno o más elementos
del vector son <code>TRUE</code>).</p>
</div>
</div>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Dado el siguiente código:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d   e
5.4 6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>Escribe un comando para crear el subconjunto de valores de
<code>x</code> que sean mayores a 4 pero menores que 7.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al desafío 3
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_subset</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">&lt;</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">x</span><span class="op">&gt;</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">x_subset</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   d
5.4 6.2 4.8 </code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="sugerencia-nombres-no-únicos" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-nombres-no-únicos" class="callout-inner">
<h3 class="callout-title">Sugerencia: Nombres no únicos</h3>
<div class="callout-content">
<p>Debes tener en cuenta que es posible que múltiples elementos en un
vector tengan el mismo nombre. (Para un <strong>data frame</strong>, las
columnas pueden tener el mismo nombre —aunque R intenta evitarlo— pero
los nombres de las filas deben ser únicos). Considera estos
ejemplos:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'a'</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a a a
1 2 3 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="st">'a'</span><span class="op">]</span>  <span class="co"># solo devuelve el primer valor</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="fl">1</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="st">'a'</span><span class="op">]</span>  <span class="co"># devuelve todos los tres valores</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a a a
1 2 3 </code></pre>
</div>
</div>
</div>
</div>
<div id="sugerencia-obteniendo-ayuda-para-los-operadores" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-obteniendo-ayuda-para-los-operadores" class="callout-inner">
<h3 class="callout-title">Sugerencia: Obteniendo ayuda para los operadores</h3>
<div class="callout-content">
<p>Recuerda que puedes obtener ayuda para los operadores empaquetándolos
entre comillas: <code>help("%in%")</code> o <code>?"%in%"</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="saltarse-los-elementos-nombrados">Saltarse los elementos nombrados<a class="anchor" aria-label="anchor" href="#saltarse-los-elementos-nombrados"></a>
</h2>
<hr class="half-width">
<p>Saltarse o eliminar elementos con nombre es un poco más difícil. Si
tratamos de omitir un elemento con nombre al negar la cadena, R se queja
(de una manera un poco oscura) de que no sabe cómo tomar el valor
negativo de una cadena:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span>a<span class="op">=</span><span class="fl">5.4</span>, b<span class="op">=</span><span class="fl">6.2</span>, c<span class="op">=</span><span class="fl">7.1</span>, d<span class="op">=</span><span class="fl">4.8</span>, e<span class="op">=</span><span class="fl">7.5</span><span class="op">)</span> <span class="co"># comenzamos nuevamente nombrando un vector en la misma línea</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in -"a": invalid argument to unary operator</code></pre>
</div>
<p>Sin embargo, podemos usar el operador <code>!=</code> (no igual) para
construir un vector con elementos lógicos, que es lo que nosotros
queremos:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d   e
6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>Saltar varios índices con nombre es un poco más difícil. Supongamos
que queremos excluir los elementos <code>"a"</code> y <code>"c"</code>,
entonces intentamos lo siguiente:</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">!=</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"c"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in names(x) != c("a", "c"): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d   e
6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>R hizo <em>algo</em>, pero también nos lanzó una advertencia que
debemos atender -¡y aparentemente <em>nos dió la respuesta
incorrecta</em>! (el elemento <code>"c"</code> se encuentra todavía en
el vector).</p>
<p>¿Entonces qué hizo el operador <code>!=</code> en este caso? Esa es
una excelente pregunta.</p>
<div class="section level3">
<h3 id="reciclando">Reciclando<a class="anchor" aria-label="anchor" href="#reciclando"></a>
</h3>
<p>Tomemos un momento para observar al operador de comparación en este
código:</p>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">!=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in names(x) != c("a", "c"): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
<p>¿Por qué R devuelve <code>TRUE</code> como el tercer elemento de este
vector, cuando <code>names(x)[3] != "c"</code> es obviamente falso?.
Cuando tú usas <code>!=</code>, R trata de comparar cada elemento de la
izquierda con el correspondiente elemento de la derecha. ¿Qué pasa
cuando tu comparas dos elementos de diferentes longitudes?</p>
<figure><img src="fig/06-rmd-inequality.1.png" alt="Inequality testing" class="figure mx-auto d-block"></figure><p>Cuando uno de los vectores es más corto que el otro, este se
<em>recicla</em>:</p>
<figure><img src="fig/06-rmd-inequality.2.png" alt="Inequality testing: results of recycling" class="figure mx-auto d-block"></figure><p>En este caso R <strong>repite</strong> <code>c("a", "c")</code>
tantas veces como sea necesario para emparejar <code>names(x)</code>,
i.e. tenemos <code>c("a","c","a","c","a")</code>. Ya que el valor
reciclado <code>"a"</code>no es igual a <code>names(x)</code>, el valor
de <code>!=</code> es <code>TRUE</code>. En este caso, donde el vector
de mayor longitud (5) no es múltiplo del más pequeño (2), R lanza esta
advertencia. Si hubiéramos sido lo suficientemente desafortunados y
<code>names(x)</code> tuviese seis elementos, R <em>silenciosamente</em>
hubiera hecho las cosas incorrectas (i.e., no lo que deseábamos hacer).
Esta regla de reciclaje puede introducir <strong>bugs</strong> difíciles
de encontrar.</p>
<p>La manera de hacer que R haga lo que en verdad queremos (emparejar
<em>cada uno</em> de los elementos del argumento de la izquierda con
<em>todos</em> los elementos del argumento de la derecha) es usando el
operador <code>%in%</code>. El operador <code>%in%</code> toma cada uno
de los elementos del argumento de la izquierda, en este caso los nombres
de <code>x</code>, y pegunta, “¿este elemento ocurre en el segundo
argumento?” Aquí, como queremos <em>excluir</em> los valores, nosotros
también necesitamos el operador <code>!</code> para cambiar la inclusión
por una <em>no</em> inclusión:</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">!</span> <span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"c"</span><span class="op">)</span> <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   d   e
6.2 4.8 7.5 </code></pre>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Seleccionar elementos de un vector que empareje con cualquier valor
de una lista es una tarea muy común en el análisis de datos. Por
ejemplo, el <strong>data set</strong> de <em>gapminder</em> contiene las
variables <code>country</code> y <code>continent</code>, pero no incluye
información de la escala. Supongamos que queremos extraer la información
de el sureste de Asia: ¿cómo podemos escribir una operación que resulte
en un vector lógico que sea <code>TRUE</code> para todos los países en
el sureste de Asia y <code>FALSE</code> en otros casos?</p>
<p>Supongamos que se tienen los siguientes datos:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seAsia</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Myanmar"</span>,<span class="st">"Thailand"</span>,<span class="st">"Cambodia"</span>,<span class="st">"Vietnam"</span>,<span class="st">"Laos"</span><span class="op">)</span></span>
<span><span class="co">## leer los datos de gapminder que bajamos en el episodio 2</span></span>
<span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder-FiveYearData.csv"</span>, header<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## extraer la columna `country` de la **data frame** (veremos esto luego);</span></span>
<span><span class="co">## convertir de factor a caracter;</span></span>
<span><span class="co">## y quedarse solo con los elementos no repetidos</span></span>
<span><span class="va">countries</span> <span class="op">&lt;-</span> <span class="fu">unique</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Existe una manera incorrecta (usando solamente <code>==</code>), la
cual te dará una advertencia (<em>warning</em>); una manera enredada de
hacerlo (usando los operadores lógicos <code>==</code> y <code>|</code>)
y una manera elegante (usando <code>%in%</code>). Prueba encontrar esas
maneras y explica cómo funcionan (o no).</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ul>
<li>La manera <strong>incorrecta</strong> de hacer este problema es
<code>countries==seAsia</code>. Esta lanza una advertencia
(<code>"In countries == seAsia : longer object length is not a multiple of shorter object length"</code>)
y la respuesta incorrecta (un vector con todos los valores
<code>FALSE</code>), ya que ninguno de los valores reciclados de
<code>seAsia</code> se emparejaron correctamente para coincidir con los
valores de <code>country</code>.</li>
<li>La manera <strong>enredada</strong> (pero técnicamente correcta) de
resolver este problema es</li>
</ul>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="op">(</span><span class="va">countries</span><span class="op">==</span><span class="st">"Myanmar"</span> <span class="op">|</span> <span class="va">countries</span><span class="op">==</span><span class="st">"Thailand"</span> <span class="op">|</span></span>
<span> <span class="va">countries</span><span class="op">==</span><span class="st">"Cambodia"</span> <span class="op">|</span> <span class="va">countries</span> <span class="op">==</span> <span class="st">"Vietnam"</span> <span class="op">|</span> <span class="va">countries</span><span class="op">==</span><span class="st">"Laos"</span><span class="op">)</span></span></code></pre>
</div>
<p>(o <code>countries==seAsia[1] | countries==seAsia[2] | ...</code>).
Esto da los valores correctos, pero esperamos que veas lo raro que se ve
(¿qué hubiera pasado si hubiéramos querido seleccionar países de una
lista mucho más larga?).</p>
<ul>
<li>La mejor manera de resolver este problema es
<code>countries %in% seAsia</code>, la cual es la correcta y la más
sencilla de escribir (y leer).</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="manejando-valores-especiales">Manejando valores especiales<a class="anchor" aria-label="anchor" href="#manejando-valores-especiales"></a>
</h2>
<hr class="half-width">
<p>En algún momento encontraremos funciones en R que no pueden manejar
valores faltantes, infinito o datos indefinidos.</p>
<p>Existen algunas funciones especiales que puedes usar para filtrar
estos datos:</p>
<ul>
<li>
<code>is.na</code> regresa todas las posiciones de un
<strong>vector</strong>, <strong>matrix</strong> o <strong>data
frame</strong> que contengan <code>NA</code> (o <code>NaN</code>)</li>
<li>de la misma manera, <code>is.nan</code> y <code>is.infinite</code>
hacen lo mismo para <code>NaN</code> e <code>Inf</code>.</li>
<li>
<code>is.finite</code> regresa todas las posiciones de un
<strong>vector</strong>, <strong>matrix</strong> o <strong>data
frame</strong> que no contengan <code>NA</code>, <code>NaN</code> o
<code>Inf</code>.</li>
<li>
<code>na.omit</code> filtra todos los valores faltantes de un
vector</li>
</ul></section><section><h2 class="section-heading" id="haciendo-subconjuntos-de-factores">Haciendo subconjuntos de factores<a class="anchor" aria-label="anchor" href="#haciendo-subconjuntos-de-factores"></a>
</h2>
<hr class="half-width">
<p>Habiendo explorado las distintas manera de hacer subconjuntos de
vectores, ¿cómo podemos hacer subconjuntos de otras estructuras de
datos?</p>
<p>Podemos hacer subconjuntos de factores de la misma manera que con los
vectores.</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">f</span><span class="op">[</span><span class="va">f</span> <span class="op">==</span> <span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] a a
Levels: a b c d</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span><span class="op">[</span><span class="va">f</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] b c c
Levels: a b c d</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] a a b
Levels: a b c d</code></pre>
</div>
<p>Saltar elementos no quita el nivel, incluso cuando no existan datos
en esa categoría del factor:</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] a a c c d
Levels: a b c d</code></pre>
</div>
</section><section><h2 class="section-heading" id="haciendo-subconjuntos-de-matrices">Haciendo subconjuntos de matrices<a class="anchor" aria-label="anchor" href="#haciendo-subconjuntos-de-matrices"></a>
</h2>
<hr class="half-width">
<p>También podemos hacer subconjuntos de matrices usando la función
<code>[</code> En este caso toma dos argumentos: el primero se aplica a
las filas y el segundo a las columnas:</p>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fu">rnorm</span><span class="op">(</span><span class="fl">6</span><span class="op">*</span><span class="fl">4</span><span class="op">)</span>, ncol<span class="op">=</span><span class="fl">4</span>, nrow<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">m</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            [,1]       [,2]
[1,]  1.12493092 -0.8356286
[2,] -0.04493361  1.5952808</code></pre>
</div>
<p>Siempre puedes dejar el primer o segundo argumento vacío para obtener
todas las filas o columnas respectivamente:</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            [,1]        [,2]
[1,] -0.62124058  0.82122120
[2,] -2.21469989  0.59390132
[3,]  1.12493092  0.91897737
[4,] -0.04493361  0.78213630
[5,] -0.01619026  0.07456498
[6,]  0.94383621 -1.98935170</code></pre>
</div>
<p>Si quisieramos acceder a solo una fila o una columna, R
automáticamente convertirá el resultado a un vector:</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -0.8356286  0.5757814  1.1249309  0.9189774</code></pre>
</div>
<p>Si quieres mantener la salida como una matriz, necesitas especificar
un <em>tercer</em> argumento; <code>drop = FALSE</code>:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">3</span>, , drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           [,1]      [,2]     [,3]      [,4]
[1,] -0.8356286 0.5757814 1.124931 0.9189774</code></pre>
</div>
<p>A diferencia de los vectores, si tratamos de acceder a una fila o
columna fuera de la matriz, R arrojará un error:</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in m[, c(3, 6)]: subscript out of bounds</code></pre>
</div>
<div id="sugerencia-arrays-de-más-dimensiones" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-arrays-de-más-dimensiones" class="callout-inner">
<h3 class="callout-title">Sugerencia: <strong>Arrays</strong> de más
dimensiones</h3>
<div class="callout-content">
<p>Cuando estamos lidiando con <strong>arrays</strong>
multi-dimensionales, cada uno de los argumentos de <code>[</code>
corresponden a una dimensión. Por ejemplo,en un <strong>array</strong>
3D, los primeros tres argumentos corresponden a las filas, columnas y
profundidad.</p>
</div>
</div>
</div>
<p>Como las matrices son vectores, podemos también hacer subconjuntos
usando solo un argumento:</p>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.3295078</code></pre>
</div>
<p>Normalmente esto no es tan útil y muchas veces difícil de leer. Sin
embargo es útil notar que las matrices están acomodadas en un formato
<strong>column-major</strong> por defecto. Esto significa que los
elementos del vector están acomodados por columnas:</p>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6</code></pre>
</div>
<p>Si quisieramos llenar una matriz por filas, usamos
<code>byrow=TRUE</code>:</p>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">3</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6</code></pre>
</div>
<p>Podemos también hacer subconjuntos de las matrices usando los nombres
de sus filas y de sus columnas en vez de usar sus índices.</p>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>Dado el siguiente código:</p>
<div class="codewrapper sourceCode" id="cb100">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">18</span>, nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    4    7   10   13   16
[2,]    2    5    8   11   14   17
[3,]    3    6    9   12   15   18</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>¿Cuál de los siguientes comandos extraerá los valores 11 y 14?</li>
</ol>
<p>A. <code>m[2,4,2,5]</code></p>
<p>B. <code>m[2:5]</code></p>
<p>C. <code>m[4:5,2]</code></p>
<p>D. <code>m[2,c(4,5)]</code></p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>D</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="haciendo-subconjuntos-de-listas">Haciendo subconjuntos de listas<a class="anchor" aria-label="anchor" href="#haciendo-subconjuntos-de-listas"></a>
</h2>
<hr class="half-width">
<p>Ahora introduciremos un nuevo operador para hacer subconjuntos.
Existen tres funciones para hacer subconjuntos de listas. Ya las hemos
visto cuando aprendimos los vectores atómicos y las matrices:
<code>[</code>, <code>[[</code> y <code>$</code>.</p>
<p>Usando <code>[</code> siempre se obtiene una lista. Si quieres un
<em>subconjunto</em> de una lista, pero no quieres <em>extraer</em> un
elemento, entonces probablemente usarás <code>[</code>.</p>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Software Carpentry"</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="fu">head</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xlist</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$a
[1] "Software Carpentry"</code></pre>
</div>
<p>Esto regresa una <em>lista de un elemento</em>.</p>
<p>Podemos hacer subconjuntos de elementos de la lista de la misma
manera que con los vectores atómicos usando <code>[</code>. Las
operaciones de comparación sin embargo no funcionan, ya que no son
recursivas, estas probarán la condición en la estructura de datos de los
elementos de la lista, y no en los elementos individuales de dichas
estructuras de datos.</p>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$a
[1] "Software Carpentry"

$b
 [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<p>Para extraer elementos individuales de la lista, tendrás que hacer
uso de la función doble corchete: <code>[[</code>.</p>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Software Carpentry"</code></pre>
</div>
<p>Nota que ahora el resultados es un vector, no una lista.</p>
<p>No puedes extraer más de un elemento al mismo tiempo:</p>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in xlist[[1:2]]: subscript out of bounds</code></pre>
</div>
<p>Tampoco puedes usarlo para saltar elementos:</p>
<div class="codewrapper sourceCode" id="cb110">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in xlist[[-1]]: invalid negative subscript in get1index &lt;real&gt;</code></pre>
</div>
<p>Pero tú puedes usar los nombres para hacer subconjuntos y extraer
elementos:</p>
<div class="codewrapper sourceCode" id="cb112">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Software Carpentry"</code></pre>
</div>
<p>La función <code>$</code> es una manera abreviada para extraer
elementos por nombre:</p>
<div class="codewrapper sourceCode" id="cb114">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">$</span><span class="va">data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div id="desafío-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-5" class="callout-inner">
<h3 class="callout-title">Desafío 5</h3>
<div class="callout-content">
<p>Dada la siguiente lista:</p>
<div class="codewrapper sourceCode" id="cb116">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Software Carpentry"</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="fu">head</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Usando tu conocimiento para hacer subconjuntos de listas y vectores,
extrae el número 2 de <code>xlist</code>. Pista: el número 2 está
contenido en el elemento “b” de la lista.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución al desafío 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb117">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb119">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb121">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="st">"b"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-6" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-6" class="callout-inner">
<h3 class="callout-title">Desafío 6</h3>
<div class="callout-content">
<p>Dado un modelo lineal:</p>
<div class="codewrapper sourceCode" id="cb123">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">aov</span><span class="op">(</span><span class="va">pop</span> <span class="op">~</span> <span class="va">lifeExp</span>, data<span class="op">=</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<p>Extrae los grados de libertad residuales (pista:
<code>attributes()</code> te puede ayudar)</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Solución del desafío 6
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb124">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">attributes</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> <span class="co">## `df.residual` es uno de los nombres de `mod`</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb125">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span><span class="op">$</span><span class="va">df.residual</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="data-frames">Data frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h2>
<hr class="half-width">
<p>Recordemos que las <strong>data frames</strong> son listas, por lo
que aplican reglas similares. Sin embargo estos también son objetos de
dos dimensiones:</p>
<p><code>[</code> con un argumento funcionará de la misma manera que
para las listas, donde cada elemento de la lista corresponde a una
columna. El objeto devuelto será una <strong>data frame</strong>:</p>
<div class="codewrapper sourceCode" id="cb126">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       pop
1  8425333
2  9240934
3 10267083
4 11537966
5 13079460
6 14880372</code></pre>
</div>
<p>Similarmente, <code>[[</code> extraerá <em>una sola columna</em>:</p>
<div class="codewrapper sourceCode" id="cb128">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[[</span><span class="st">"lifeExp"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.801 30.332 31.997 34.020 36.088 38.438</code></pre>
</div>
<p>Con dos argumentos, <code>[</code> se comporta de la misma manera que
para las matrices:</p>
<div class="codewrapper sourceCode" id="cb130">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007</code></pre>
</div>
<p>Si nuestro subconjunto es una sola fila, el resultado será una
<strong>data frame</strong> (porque los elementos son de distintos
tipos):</p>
<div class="codewrapper sourceCode" id="cb132">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
3 Afghanistan 1962 10267083      Asia  31.997  853.1007</code></pre>
</div>
<p>Pero para una sola columna el resultado será un vector (esto puede
cambiarse con el tercer argumento, <code>drop = FALSE</code>).</p>
<div id="desafío-7" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-7" class="callout-inner">
<h3 class="callout-title">Desafío 7</h3>
<div class="callout-content">
<p>Corrige cada uno de los siguientes errores para hacer subconjuntos de
<strong>data frames</strong>:</p>
<ol style="list-style-type: decimal">
<li>Extraer observaciones colectadas en el año 1957</li>
</ol>
<div class="codewrapper sourceCode" id="cb134">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a>gapminder[gapminder<span class="sc">$</span>year <span class="ot">=</span> <span class="dv">1957</span>,]</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Extraer todas las columnas excepto de la 1 a la 4</li>
</ol>
<div class="codewrapper sourceCode" id="cb135">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span>   <span class="va">gapminder</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Extraer las filas donde la esperanza de vida es mayor a 80 años</li>
</ol>
<div class="codewrapper sourceCode" id="cb136">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">80</span><span class="op">]</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Extraer la primer fila, y la cuarta y quinta columna
(<code>lifeExp</code> y <code>gdpPercap</code>).</li>
</ol>
<div class="codewrapper sourceCode" id="cb137">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Avanzado: extraer las filas que contienen información para los años
2002 y 2007</li>
</ol>
<div class="codewrapper sourceCode" id="cb138">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span> <span class="op">|</span> <span class="fl">2007</span>,<span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Solución del desafío 7
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>Corrige cada uno de los siguientes errores para hacer subconjuntos de
<strong>data frames</strong>:</p>
<ol style="list-style-type: decimal">
<li>Extraer observaciones colectadas en el año 1957</li>
</ol>
<div class="codewrapper sourceCode" id="cb139">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[gapminder$year = 1957,]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1957</span>,<span class="op">]</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Extraer todas las columnas excepto de la 1 a la 4</li>
</ol>
<div class="codewrapper sourceCode" id="cb140">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[,-1:4]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span>,<span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Extraer las filas donde la esperanza de vida es mayor a 80 años</li>
</ol>
<div class="codewrapper sourceCode" id="cb141">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[gapminder$lifeExp &gt; 80]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">80</span>,<span class="op">]</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Extraer la primer fila, y la cuarta y quinta columna
(<code>lifeExp</code> y <code>gdpPercap</code>).</li>
</ol>
<div class="codewrapper sourceCode" id="cb142">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[1, 4, 5]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="fl">1</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Avanzado: extraer las filas que contienen información para los años
2002 y 2007</li>
</ol>
<div class="codewrapper sourceCode" id="cb143">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[gapminder$year == 2002 | 2007,]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span> <span class="op">|</span> <span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span>,<span class="op">]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2002</span>, <span class="fl">2007</span><span class="op">)</span>,<span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-8" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-8" class="callout-inner">
<h3 class="callout-title">Desafío 8</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>¿Por qué <code>gapminder[1:20]</code> regresa un error? ¿En qué
difiere de <code>gapminder[1:20, ]</code>?</p></li>
<li><p>Crea un <code>data.frame</code> llamado
<code>gapminder_small</code> que solo contenga las filas del 1 al 9 y
del 19 al 23. Puedes hacerlo en uno o dos pasos.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Solución al desafío 8
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p><code>gapminder</code> es un <code>data.frame</code> por lo que
para hacer un subconjunto necesita dos dimensiones.
<code>gapminder[1:20, ]</code> genera un subconjunto de los datos de las
primeras 20 filas y todas las columnas.</p></li>
<li>
</li>
</ol>
<div class="codewrapper sourceCode" id="cb144">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_small</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="fl">19</span><span class="op">:</span><span class="fl">23</span><span class="op">)</span>,<span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Los índices en R comienzan con 1, no con 0.</li>
<li>Acceso a un elemento por posición usando <code>[]</code>.</li>
<li>Acceso a un rango de datos usando <code>[min:max]</code>.</li>
<li>Acceso a subconjuntos arbitrarios usando <code>[c(...)]</code>.</li>
<li>Usar operaciones lógicas y vectores lógicos para acceder a
subconjuntos de datos</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-control-flow"><p>Content from <a href="07-control-flow.html">Control de flujo</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/07-control-flow.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo hacer elecciones dependiendo de mis datos en R?</li>
<li>¿Cómo puedo repetir operaciones en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Escribir declaraciones condicionales utilizando <code>if()</code> y
<code>else()</code>.</li>
<li>Escribir y entender los bucles con <code>for()</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Cuando estamos programando puede que queramos controlar el flujo de
nuestras acciones. Esto se puede realizar estableciendo acciones que
ocurran solo si se cumple una condición o un conjunto de condiciones. A
su vez, podemos hacer que una acción ocurra un número determinado de
veces.</p>
<p>Hay varias maneras de controlar el flujo en R. Para declaraciones
condicionales, los enfoques más comúnmente utilizados son los
<strong>constructs</strong>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># if</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="cf">if</span> (la condición es verdad) {</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  realizar una acción</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># if ... else</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="cf">if</span> (la condición es verdad) {</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  realizar una acción</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>} <span class="cf">else</span> {  <span class="co"># es decir, si la condición es falsa,</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>  realizar una acción alternativa</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>}</span></code></pre>
</div>
<p>Digamos, por ejemplo, que queremos que R imprima un mensaje si una
variable <code>x</code> tiene un valor en particular:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">8</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"x es mayor o igual que 10"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8</code></pre>
</div>
<p>La sentencia <strong>print</strong> “x es mayor o igual que 10” no
aparece en la consola porque x no es mayor o igual a 10. Para imprimir
un mensaje diferente para numeros menores a 10, podemos agregar una
sentencia <strong>else</strong></p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">8</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"x es mayor o igual a 10"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"x es menor a 10"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "x es menor a 10"</code></pre>
</div>
<p>También podemos testear múltiples condiciones usando <strong>else
if</strong></p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">8</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"x es mayor o igual a 10"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"x es mayor a 5, pero menor a 10"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span><span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="st">"x es menor a 5"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "x es mayor a 5, pero menor a 10"</code></pre>
</div>
<p><strong>Importante:</strong> cuando R evalúa las condiciones dentro
de <code>if()</code> esta buscando elementos lógicos como
<code>TRUE</code> o <code>FALSE</code>. Entender esto puede ser un dolor
de cabeza para los principiantes. Por ejemplo:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span>  <span class="op">&lt;-</span>  <span class="fl">4</span> <span class="op">==</span> <span class="fl">3</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="st">"4 igual a 3"</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="st">"4 no es igual a 3"</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "4 no es igual a 3"</code></pre>
</div>
<p>Como podemos observar se muestra el mensaje es igual porque el vector
x es <code>FALSE</code></p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="op">==</span> <span class="fl">3</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE</code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Usa una declaración <code>if()</code> para mostrar un mensaje
adecuado reportando si hay algún registro del año 2002 en el
<strong>dataset</strong> <strong><code>gapminder</code></strong>. Luego
haz lo mismo para el año 2012.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al Desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Primero veremos una solución al Desafío 1 que no usa la función
<code>any()</code>. Primero obtenemos un vector lógico que describe que
el elemento <code>gapminder$year</code> es igual a
<code>2002</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span>,<span class="op">]</span></span></code></pre>
</div>
<p>Luego, contamos el número de filas del data.frame
<code>gapminder</code> que corresponde al año 2002:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rows2002_number</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<p>La presencia de cualquier registro para el año 2002 es equivalente a
la petición de que <code>rows2002_number</code> sea mayor o igual a
uno:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rows2002_number</span> <span class="op">&gt;=</span> <span class="fl">1</span></span></code></pre>
</div>
<p>Entonces podríamos escribir:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu">nrow</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>   <span class="fu">print</span><span class="op">(</span><span class="st">"Se encontraron registro(s) para el año 2002."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Todo esto se puede hacer más rápido con <code>any()</code>. En dicho
caso la condición lógica se puede expresar como:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu">any</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>   <span class="fu">print</span><span class="op">(</span><span class="st">"Se encontraron registro(s) para el año 2002."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>¿Alguien recibió un mensaje de advertencia como este?</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'gapminder' not found</code></pre>
</div>
<p>Si tu condición se evalúa como un vector con más de un elemento
lógico, la función <code>if()</code> todavía se ejecutará, pero solo
evaluará la condición en el primer elemento. Aquí debes asegurarte que
tu condición sea de longitud 1.</p>
<div id="tip-any-y-all" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-any-y-all" class="callout-inner">
<h3 class="callout-title">Tip: <code>any()</code> y
<code>all()</code>
</h3>
<div class="callout-content">
<p>La función <code>any()</code> devolverá TRUE si hay al menos un valor
TRUE dentro del vector, en caso contrario devolverá <code>FALSE</code>.
Esto se puede usar de manera similar al operador <code>%in%</code>. La
función <code>all()</code>, como el nombre sugiere, devolvera
<code>TRUE</code> siempre y cuando todos los valores en el vector son
<code>TRUE</code>.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="operaciones-repetidas">Operaciones repetidas<a class="anchor" aria-label="anchor" href="#operaciones-repetidas"></a>
</h2>
<hr class="half-width">
<p>Si quieres iterar sobre un conjunto de valores, el orden de la
iteración es importante y debes realizar la misma operación en cada uno,
un bucle <code>for()</code> es lo que estas buscando. Vimos los bucles
<code>for()</code> en las lecciones anteriores de terminal. Si bien esta
es la operación de bucle más flexible es también la más difícil de usar
correctamente. Evita usar bucles <code>for()</code> a menos que el orden
de la iteración sea importante como cuando el cálculo de cada iteración
dependa del resultado de la iteración previa.</p>
<p>La estructura básica de un bucle <code>for()</code> es:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="cf">for</span>(iterador <span class="cf">in</span> conjunto de valores){</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  haz alguna acción</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>}</span></code></pre>
</div>
<p>Por ejemplo:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9
[1] 10</code></pre>
</div>
<p>El rango <code>1:10</code> crea un vector sobre la marcha; puedes
iterar sobre cualquier otro vector también.</p>
<p>Podemos usar un bucle <code>for()</code> anidado con otro bucle
<code>for()</code> para iterar sobre dos cosas a la vez.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">for</span><span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu">print</span><span class="op">(</span><span class="fu">paste</span><span class="op">(</span><span class="va">i</span>,<span class="va">j</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "1 a"
[1] "1 b"
[1] "1 c"
[1] "1 d"
[1] "1 e"
[1] "2 a"
[1] "2 b"
[1] "2 c"
[1] "2 d"
[1] "2 e"
[1] "3 a"
[1] "3 b"
[1] "3 c"
[1] "3 d"
[1] "3 e"
[1] "4 a"
[1] "4 b"
[1] "4 c"
[1] "4 d"
[1] "4 e"
[1] "5 a"
[1] "5 b"
[1] "5 c"
[1] "5 d"
[1] "5 e"</code></pre>
</div>
<p>En lugar de mostrar los resultados en la pantalla podríamos
guardarlos en un nuevo objeto.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">for</span><span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">temp_output</span> <span class="op">&lt;-</span> <span class="fu">paste</span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span><span class="op">)</span></span>
<span>    <span class="va">output_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">output_vector</span>, <span class="va">temp_output</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="va">output_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "1 a" "1 b" "1 c" "1 d" "1 e" "2 a" "2 b" "2 c" "2 d" "2 e" "3 a" "3 b"
[13] "3 c" "3 d" "3 e" "4 a" "4 b" "4 c" "4 d" "4 e" "5 a" "5 b" "5 c" "5 d"
[25] "5 e"</code></pre>
</div>
<p>Este enfoque puede ser útil, pero aumentar o incrementar tus
resultados (es decir, construir el objeto resultante de forma
incremental) es computacionalmente ineficiente por lo que conviene
evitarlo cuando estés iterando a través de muchos valores.</p>
<div id="tip-no-incrementes-tus-resultados" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-no-incrementes-tus-resultados" class="callout-inner">
<h3 class="callout-title">Tip: no incrementes tus resultados</h3>
<div class="callout-content">
<p>Una de las cosas que más frecuentemente hace tropezar tanto a los
principiantes como a los usuarios experimentados de R es la construcción
de un objeto de resultados (vector, lista, matriz, data frame) a medida
que tu bucle for progresa. Las computadoras son muy malas para manejar
esto lo cual puede hacer que tus cálculos se enlentezcan rápidamente. En
este caso es mejor definir un objeto de resultados vacío con las
dimensiones apropiadas. Si sabes que el resultado final se almacenará en
una matriz como la anterior es una buena idea crear una matriz vacía con
5 filas y 5 columnas y luego en cada iteración almacenar los resultados
en la ubicación adecuada.</p>
</div>
</div>
</div>
<p>Una mejor manera es definir el objeto de salida (vacío) antes de
completar los valores. Aunque para este ejemplo parece más complicado,
es aún más eficiente.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_matrix</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span>nrow<span class="op">=</span><span class="fl">5</span>, ncol<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">j_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">for</span><span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">temp_j_value</span> <span class="op">&lt;-</span> <span class="va">j_vector</span><span class="op">[</span><span class="va">j</span><span class="op">]</span></span>
<span>    <span class="va">temp_output</span> <span class="op">&lt;-</span> <span class="fu">paste</span><span class="op">(</span><span class="va">i</span>, <span class="va">temp_j_value</span><span class="op">)</span></span>
<span>    <span class="va">output_matrix</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp_output</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="va">output_vector2</span> <span class="op">&lt;-</span> <span class="fu">as.vector</span><span class="op">(</span><span class="va">output_matrix</span><span class="op">)</span></span>
<span><span class="va">output_vector2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "1 a" "2 a" "3 a" "4 a" "5 a" "1 b" "2 b" "3 b" "4 b" "5 b" "1 c" "2 c"
[13] "3 c" "4 c" "5 c" "1 d" "2 d" "3 d" "4 d" "5 d" "1 e" "2 e" "3 e" "4 e"
[25] "5 e"</code></pre>
</div>
<div id="tip-bucles-while" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-bucles-while" class="callout-inner">
<h3 class="callout-title">Tip: Bucles While</h3>
<div class="callout-content">
<p>Algunas veces tendrás la necesidad de repetir una operación hasta que
cierta condición se cumpla. Puedes hacer esto con un bucle
<code>while()</code>.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="cf">while</span>(mientras esta condición es verdad){</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>  haz algo</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>}</span></code></pre>
</div>
<p>A modo de ejemplo aquí hay un bucle while que genera números
aleatorios a partir de una distribución uniforme (la función
<code>runif()</code> ) entre 0 y 1 hasta que obtiene uno que es menor a
0.1.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span><span class="op">(</span><span class="va">z</span> <span class="op">&gt;</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="fu">runif</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="fu">print</span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Los bucles <code>while()</code> no siempre serán la elección
apropiada. Debes ser particularmente cuidadoso de que tu condición se
cumpla y no terminar en un bucle infinito.</p>
</div>
</div>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Compara los objetos output_vector y output_vector2. ¿Son lo mismo? Si
no, ¿por qué no? ¿Cómo cambiarías el último bloque de código para hacer
output_vector2 igual a output_vector?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al Desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Podemos verificar si dos vectores son idénticos usando la función
<code>all()</code> :</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">all</span><span class="op">(</span><span class="va">output_vector</span> <span class="op">==</span> <span class="va">output_vector2</span><span class="op">)</span></span></code></pre>
</div>
<p>Sin embargo todos los elementos de <code>output_vector</code> se
pueden encontrar en <code>output_vector2</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">all</span><span class="op">(</span><span class="va">output_vector</span> <span class="op">%in%</span> <span class="va">output_vector2</span><span class="op">)</span></span></code></pre>
</div>
<p>y viceversa:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">all</span><span class="op">(</span><span class="va">output_vector2</span> <span class="op">%in%</span> <span class="va">output_vector</span><span class="op">)</span></span></code></pre>
</div>
<p>Por lo tanto, los elementos en <code>output_vector</code> y
<code>output_vector2</code> están en distinto orden. Esto es porque
<code>as.vector ()</code> genera los elementos leyendo la matriz de
entrada por columnas. Si observamos <code>output_matrix</code> podemos
notar que deseamos obtener sus elementos ordenados por filas. La
solución es transponer la <code>output_matrix</code>. Podemos hacerlo
llamando a la función de transposición <code>t ()</code> o ingresando
los elementos en el orden correcto. La primera solución requiere cambiar
el original</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_vector2</span> <span class="op">&lt;-</span> <span class="fu">as.vector</span><span class="op">(</span><span class="va">output_matrix</span><span class="op">)</span></span></code></pre>
</div>
<p>por</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_vector2</span> <span class="op">&lt;-</span> <span class="fu">as.vector</span><span class="op">(</span><span class="fu">t</span><span class="op">(</span><span class="va">output_matrix</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>La segunda solución requiere cambiar</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_matrix</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp_output</span></span></code></pre>
</div>
<p>por</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_matrix</span><span class="op">[</span><span class="va">j</span>, <span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp_output</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Escribe un <strong>script</strong> que a través de bucles recorra los
datos <code>gapminder</code> por continente e imprima si la esperanza de
vida media es menor o mayor de 50 años.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al Desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p><strong>Paso 1</strong>: Queremos asegurarnos de que podamos extraer
todos los valores únicos del vector continente</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder-FiveYearData.csv"</span><span class="op">)</span></span>
<span><span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Paso 2</strong>: También tenemos que recorrer cada uno de
estos continentes y calcular la esperanza de vida promedio para cada
“subconjunto” de datos. Podemos hacer eso de la siguiente manera:</p>
<ol style="list-style-type: decimal">
<li>Recorre cada uno de los valores únicos de ‘continente’</li>
<li>Para cada valor de continente, crea una variable temporal que
almacene la vida útil para ese subconjunto,</li>
<li>Regresar la expectativa de vida calculada al usuario imprimiendo el
resultado:</li>
</ol>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span> <span class="va">iContinent</span> <span class="kw">in</span> <span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span> <span class="op">)</span><span class="op">{</span></span>
<span>   <span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="fu">subset</span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">continent</span><span class="op">==</span><span class="va">iContinent</span><span class="op">)</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span>   <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iContinent</span>, <span class="st">"is"</span>, <span class="va">tmp</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>   <span class="fu">rm</span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p><strong>Paso 3</strong>: El ejercicio solo requiere que se imprima el
resultado si la expectativa de vida promedio es menor a 50 o superior a
50. Por lo tanto, debemos agregar una condición ‘if’ antes de imprimir,
lo cual evalúa si la expectativa de vida promedio calculada es superior
o inferior a un umbral, e imprime una salida condicional en el
resultado. Necesitamos corregir (3) desde arriba:</p>
<p>3a. Si la esperanza de vida calculada es menor que algún umbral (50
años), devuelve el continente e imprime la frase “la esperanza de vida
es menor que el umbral”, de lo contrario devuelve el continente e
imprime la frase “la esperanza de vida es mayor que el umbral”:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">thresholdValue</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span> <span class="va">iContinent</span> <span class="kw">in</span> <span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span> <span class="op">)</span><span class="op">{</span></span>
<span>   <span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="fu">subset</span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">continent</span><span class="op">==</span><span class="va">iContinent</span><span class="op">)</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span>   </span>
<span>   <span class="kw">if</span><span class="op">(</span><span class="va">tmp</span> <span class="op">&lt;</span> <span class="va">thresholdValue</span><span class="op">)</span><span class="op">{</span></span>
<span>       <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iContinent</span>, <span class="st">"is less than"</span>, <span class="va">thresholdValue</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>   <span class="op">}</span></span>
<span>   <span class="kw">else</span><span class="op">{</span></span>
<span>       <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iContinent</span>, <span class="st">"is greater than"</span>, <span class="va">thresholdValue</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>        <span class="op">}</span> <span class="co"># end if else condition</span></span>
<span>   <span class="fu">rm</span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span>   <span class="op">}</span> <span class="co"># end for loop</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>Modifica el <strong>script</strong> del Desafío 4 para obtener
resultados para cada uno de los países. En esta oportunidad que imprima
si la esperanza de vida es menor que 50, se encuentra entre 50 y 70 o es
mayor que 70.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al Desafío 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Modificamos nuestra solución al Reto 3 agregando ahora dos umbrales,
<code>lowerThreshold</code> y<code>upperThreshold</code> y extendiendo
nuestras declaraciones if-else:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">lowerThreshold</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span> <span class="va">upperThreshold</span> <span class="op">&lt;-</span> <span class="fl">70</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span> <span class="va">iCountry</span> <span class="kw">in</span> <span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span> <span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="fu">subset</span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">country</span><span class="op">==</span><span class="va">iCountry</span><span class="op">)</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">tmp</span> <span class="op">&lt;</span> <span class="va">lowerThreshold</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iCountry</span>, <span class="st">"is less than"</span>, <span class="va">lowerThreshold</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">tmp</span> <span class="op">&gt;</span> <span class="va">lowerThreshold</span> <span class="op">&amp;&amp;</span> <span class="va">tmp</span> <span class="op">&lt;</span> <span class="va">upperThreshold</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iCountry</span>, <span class="st">"is between"</span>, <span class="va">lowerThreshold</span>, <span class="st">"and"</span>, <span class="va">upperThreshold</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">else</span><span class="op">{</span></span>
<span>        <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iCountry</span>, <span class="st">"is greater than"</span>, <span class="va">upperThreshold</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="fu">rm</span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'gapminder' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-5---avanzado" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-5---avanzado" class="callout-inner">
<h3 class="callout-title">Desafío 5 - Avanzado</h3>
<div class="callout-content">
<p>Escribir un script que con un bucle recorra cada país en el
<strong>dataset</strong> <strong><code>gapminder</code></strong>, probar
si el país comienza con una ‘B’ y graficar la esperanza de vida contra
el tiempo como un gráfico de líneas si la esperanza de vida media es
menor de 50 años.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución para el Desafío 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Lo primero que vamos a hacer es usar el comando <code>grep</code> que
se introdujo en la lección Shell de Unix para encontrar países que
comiencen con” B “.”</p>
<p>Si seguimos la lección de Shell de Unix podríamos vernos tentados de
probar lo siguiente</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">grep</span><span class="op">(</span><span class="st">"^B"</span>, <span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Pero cuando evaluamos este comando obtenemos los índices de la
variable del factor <code>country</code> que comienza con “B”. Para
obtener los valores, debemos agregar la opción <code>value = TRUE</code>
al comando<code>grep</code>:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">grep</span><span class="op">(</span><span class="st">"^B"</span>, <span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span>, value<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<p>A continuación almacenaremos estos países en una variable llamada
candidateCountries y luego con un bucle recorreremos cada entrada en la
variable.</p>
<p>Dentro del bucle se evaluará la expectativa de vida promedio para
cada país y de ser menor a 50 usamos un gráfico base para trazar la
evolución de la expectativa de vida promedio:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">thresholdValue</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">candidateCountries</span> <span class="op">&lt;-</span> <span class="fu">grep</span><span class="op">(</span><span class="st">"^B"</span>, <span class="fu">unique</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span>, value<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span> <span class="va">iCountry</span> <span class="kw">in</span> <span class="va">candidateCountries</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="fu">subset</span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">country</span><span class="op">==</span><span class="va">iCountry</span><span class="op">)</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">tmp</span> <span class="op">&lt;</span> <span class="va">thresholdValue</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu">cat</span><span class="op">(</span><span class="st">"Average Life Expectancy in"</span>, <span class="va">iCountry</span>, <span class="st">"is less than"</span>, </span>
<span>             <span class="va">thresholdValue</span>, <span class="st">"plotting life expectancy graph... \n"</span><span class="op">)</span></span>
<span></span>
<span>        <span class="fu">with</span><span class="op">(</span><span class="fu">subset</span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">country</span><span class="op">==</span><span class="va">iCountry</span><span class="op">)</span>,</span>
<span>                <span class="fu">plot</span><span class="op">(</span><span class="va">year</span>,<span class="va">lifeExp</span>,</span>
<span>                     type<span class="op">=</span><span class="st">"o"</span>,</span>
<span>                     main <span class="op">=</span> <span class="fu">paste</span><span class="op">(</span><span class="st">"Life Expectancy in"</span>, <span class="va">iCountry</span>, <span class="st">"over time"</span><span class="op">)</span>,</span>
<span>                     ylab <span class="op">=</span> <span class="st">"Life Expectancy"</span>,</span>
<span>                     xlab <span class="op">=</span> <span class="st">"Year"</span></span>
<span>                   <span class="op">)</span> <span class="co"># end plot</span></span>
<span>              <span class="op">)</span> <span class="co"># end with</span></span>
<span>    <span class="op">}</span> <span class="co"># end for loop</span></span>
<span>    <span class="fu">rm</span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span> <span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar <code>if</code> y <code>else</code> para realizar
elecciones.</li>
<li>Usar <code>for</code> para operaciones repetidas.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-08-plot-ggplot2"><p>Content from <a href="08-plot-ggplot2.html">Creando gráficas con calidad para publicación con ggplot2</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/08-plot-ggplot2.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo crear gráficos con calidad para publicación en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Ser capaz de utilizar ggplot2 para generar gráficos con calidad para
publicación.</li>
<li>Entender la gramática básica de los gráficos, incluyendo estética y
capas geométricas, agregando estadísticas, transformando las escalas y
los colores, o dividiendo por grupos.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Graficar nuestros datos es una de las mejores maneras para
explorarlos y para observar las relaciones que existen entre las
variables.</p>
<p>En R existen tres sistemas principales encargados de hacer gráficos,
el sistema de ploteo <a href="https://www.statmethods.net/graphs/" class="external-link">base</a>, el paquete <a href="https://www.statmethods.net/advgraphs/trellis.html" class="external-link">lattice</a> y
el paquete <a href="https://www.statmethods.net/advgraphs/ggplot2.html" class="external-link">ggplot2</a>.</p>
<p>Hoy aprenderemos acerca de <strong><code>ggplot2</code></strong>, que
permite de manera sencilla crear gráficos complejos a partir de un
conjunto de datos. Este paquete provee una estructura para que podamos
especificar qué variables graficar, cómo deben ser presentadas y otras
propiedades visuales generales (<a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/translations/spanish/data-visualization_es.pdf" class="external-link">consulta
la guía rápida de funciones</a>).</p>
<p>De esta manera, sólo necesitamos realizar cambios mínimos si los
datos sufren alguna modificación o si decidimos pasar, por ejemplo, de
un gráfico de barras a un diagrama de dispersión. Esto ayuda a crear
gráficos con calidad para publicación con pocos ajustes adicionales.</p>
<p><strong><code>ggplot2</code></strong> se basa en la <em>gramática de
gráficos</em>, una idea que plantea que cualquier gráfico puede
expresarse a partir de la combinación de estos componentes: un conjunto
de <strong>datos</strong>, un <strong>sistema de coordenadas</strong> y
un conjunto de <strong>geoms</strong> (que determinan la representación
visual de los datos).</p>
<p>La clave para entender <strong><code>ggplot2</code></strong> es
pensar en una figura como un conjunto de capas. Esta idea podría
resultarte familiar si has usado un programa de edición de imágenes como
Photoshop, Illustrator o Inkscape. Esto quiere decir que los gráficos de
<strong><code>ggplot2</code></strong> se construyen paso a paso
agregando nuevos elementos o capas, resultando en una gran flexibilidad
para la personalización de los mismos.</p>
<p>Para construir un ggplot, emplearemos esta plantilla básica que puede
usarse para distintos tipos de gráficos:</p>
<pre><code>ggplot(data = &lt;DATOS&gt;, mapping = aes(&lt;MAPEOS&gt;)) +  &lt;GEOM_FUNCIÓN&gt;()</code></pre>
<ul>
<li>Usa la función <code>ggplot()</code> para vincular el gráfico a un
conjunto de datos específico a través del argumento <code>data</code>. A
las funciones de <strong><code>ggplot2</code></strong> les gusta
trabajar con datos en <em>formato largo</em>, es decir, una columna para
cada variable y una fila para cada observación. Tener datos bien
estructurados te ahorrará mucho tiempo a la hora de realizar gráficos
con <strong><code>ggplot2</code></strong>. Además, todos los argumentos
que le pasemos a la función <code>ggplot()</code> serán considerados
como opciones <em>globales</em> en nuestro gráfico, lo cual significa
que estas opciones son válidas para todas sus capas:</li>
</ul>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Define un mapeo (usando la función <code>aes()</code> dentro de
<code>ggplot()</code>) para seleccionar las variables a graficar y
especificar cómo deben ser presentadas, por ejemplo, en los ejes x/y o
como característicales tales como tamaño, forma, color, etc.
<code>aes()</code> le dice a <code>ggplot</code> cómo se relaciona cada
una de las variables en los <strong>datos</strong> con las propiedades
<strong>aesthetic</strong> (estéticas) de la figura. En este caso, le
decimos a <code>ggplot</code> que queremos graficar la columna
“gdpPercap” del <strong>data frame</strong> gapminder en el eje X, y la
columna “lifeExp” en el eje Y. Nota que no necesitamos indicar
explícitamente estas columnas en la función <code>aes</code>
(e.g. <code>x = gapminder[, "gdpPercap"]</code>), ¡esto es debido a que
<code>ggplot</code> es suficientemente listo para buscar esa columna en
los <strong>datos</strong>!:</li>
</ul>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>
<p>Agrega <em>geoms</em>, que indican cómo se representan de los
datos en el gráfico (puntos, líneas, barras).
<strong><code>ggplot2</code></strong> ofrece muchos geoms diferentes,
algunos comúnmente utilizados son:</p>
<pre><code>* `geom_point()` para diagramas de dispersión, gráficos de puntos, etc.
* `geom_boxplot()` para diagramas de caja y bigotes.
* `geom_line()` para líneas de tendencias, series de tiempo, etc.  </code></pre>
<p>Para agregar un geom, usa el operador <code>+</code>. ¡Podemos
agregar varios geoms unidos a través de múltiples operadores
<code>+</code>! Observa que en la figura anterior, llamar a la función
<strong><code>ggplot</code></strong> no fue suficiente para obtener un
gráfico, debemos agregar un geom. Podemos usar
<strong><code>geom_point</code></strong> para representar visualmente la
relación entre <strong>x</strong> y <strong>y</strong> como un gráfico
de dispersión de puntos (<strong>scatterplot</strong>).</p>
</li>
</ul>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-build-ggplot-3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Modifica el ejemplo anterior de manera que en la figura se muestre
como la esperanza de vida ha cambiado a través del tiempo:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Pista: El <strong>dataset</strong> gapminder tiene una columna
llamada “year”, la cual debe aparecer en el eje X.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Modifica el ejemplo de manera que en la figura se muestre como la
esperanza de vida ha cambiado a través del tiempo:</p>
<p>Esta es una posible solución:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-ch1-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>En los ejemplos y desafíos anteriores hemos usado la función
<code>aes</code> para decirle al <code>geom_point</code> cuáles serán
las posiciones <strong>x</strong> y <strong>y</strong> para cada punto.
Otra propiedad <strong>aesthetic</strong> que podemos modificar es el
<em>color</em>. Modifica el código del desafío anterior para
<strong>colorear</strong> los puntos de acuerdo a la columna
“continent”. ¿Qué tendencias observas en los datos? ¿Son lo que
esperabas?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>En los ejemplos y desafios anteriores hemos usado la función
<code>aes</code> para decirle al <code>geom_point</code> cuáles serán
las posiciones <strong>x</strong> y <strong>y</strong> para cada punto.
Otra propiedad <strong>aesthetic</strong> que podemos modificar es el
<em>color</em>. Modifica el código del desafío anterior para
<strong>colorear</strong> los puntos de acuerdo a la columna
“continent”. ¿Qué tendencias observas en los datos? ¿Son lo que
esperabas?</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-ch2-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="capas">Capas<a class="anchor" aria-label="anchor" href="#capas"></a>
</h2>
<hr class="half-width">
<p>Un gráfico de dispersión probablemente no es la mejor manera de
visualizar el cambio a través del tiempo. En vez de eso, vamos a decirle
a <code>ggplot</code> que queremos visualizar los datos como un diagrama
de línea (line plot):</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, by<span class="op">=</span><span class="va">country</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-lifeExp-line-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En vez de agregar una capa <code>geom_point</code>, hemos agregado
una capa <code>geom_line</code>. Además, hemos agregado el argumento
<strong>aesthetic</strong> <strong>by</strong>, el cual le dice a
<code>ggplot</code> que debe dibujar una línea para cada país.</p>
<p>Pero, ¿qué pasa si queremos visualizar ambos, puntos y líneas en la
misma gráfica? Simplemente tenemos que agregar otra capa al gráfico:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, by<span class="op">=</span><span class="va">country</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-lifeExp-line-point-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Es importante notar que cada capa se dibuja encima de la capa
anterior. En este ejemplo, los puntos se han dibujado <em>sobre</em> las
líneas. A continuación observamos una demostración:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, by<span class="op">=</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-lifeExp-layer-example-1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En este ejemplo, el mapeo <strong>aesthetic</strong> de
<strong>color</strong> se ha movido de las opciones globales de la
gráfica en <code>ggplot</code> a la capa <code>geom_line</code> y, por
lo tanto, ya no es válido para los puntos. Ahora podemos ver claramente
que los puntos se dibujan sobre las líneas.</p>
<div id="sugerencia-asignando-un-aesthetic-a-un-valor-en-vez-de-a-un-mapeo" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-asignando-un-aesthetic-a-un-valor-en-vez-de-a-un-mapeo" class="callout-inner">
<h3 class="callout-title">Sugerencia: Asignando un
<strong>aesthetic</strong> a un valor en vez de a un mapeo</h3>
<div class="callout-content">
<p>Hasta ahora, hemos visto cómo usar un <strong>aesthetic</strong>
(como <strong>color</strong>) como un <em>mapeo</em> entre una variable
de los datos y su representación visual. Por ejemplo, cuando usamos
<code>geom_line(aes(color=continent))</code>, ggplot le asignará un
color diferente a cada continente. Pero, ¿qué tal si queremos cambiar el
color de todas las líneas a azul? Podrías pensar que
<code>geom_line(aes(color="blue"))</code> debería funcionar, pero no es
así. Dado que no queremos crear un mapeo hacia una variable específica,
simplemente debemos cambiar la especificación de color afuera de la
función <code>aes()</code>, de esta manera:
<code>geom_line(color="blue")</code>.</p>
</div>
</div>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Intercambia el orden de las capas de los puntos y líneas del ejemplo
anterior. ¿Qué sucede?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución a desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Intercambia el orden de las capas de los puntos y líneas del ejemplo
anterior. ¿Qué sucede?</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, by<span class="op">=</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-ch3-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>¡Las líneas ahora están dibujadas sobre los puntos!</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="transformaciones-y-estadísticas">Transformaciones y estadísticas<a class="anchor" aria-label="anchor" href="#transformaciones-y-estad%C3%ADsticas"></a>
</h2>
<hr class="half-width">
<p><code>ggplot</code> también facilita sobreponer modelos estadísticos
a los datos. Para demostrarlo regresaremos a nuestro primer ejemplo:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-lifeExp-vs-gdpPercap-scatter3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En este momento es difícil ver las relaciones entre los puntos debido
a algunos valores altamente atípicos de la variable GDP per capita.
Podemos cambiar la escala de unidades del eje X usando las funciones de
<strong>escala</strong>. Estas funciones controlan la relación entre los
valores de los datos y los valores visuales de un
<strong>aesthetic</strong>. También podemos modificar la transparencia
de los puntos, usando la función <em>alpha</em>, la cual es
especialmente útil cuando tienes una gran cantidad de datos fuertemente
conglomerados.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-axis-scale-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>La función <code>log10</code> aplica una transformación sobre los
valores de la columna “gdpPercap” antes de presentarlos en el gráfico,
de manera que cada múltiplo de 10 ahora corresponde a un incremento de 1
en la escala transformada, e.g. un GDP per capita de 1,000 se convierte
en un 3 en el eje Y, un valor de 10,000 corresponde a un valor de 4 en
el eje Y, y así sucesivamente. Esto facilita visualizar la dispersión de
los datos sobre el eje X.</p>
<div id="sugerencia-recordatorio-asignando-un-aesthetic-a-un-valor-en-vez-de-a-un-mapeo" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-recordatorio-asignando-un-aesthetic-a-un-valor-en-vez-de-a-un-mapeo" class="callout-inner">
<h3 class="callout-title">Sugerencia Recordatorio: Asignando un
<strong>aesthetic</strong> a un valor en vez de a un mapeo</h3>
<div class="callout-content">
<p>Nota que usamos <code>geom_point(alpha = 0.5)</code>. Como menciona
la sugerencia anterior, cambiar una especificación afuera de la función
<code>aes()</code> causará que este valor sea usado para todos los
puntos, que es exactamente lo que queremos en este caso. Sin embargo,
como cualquier otra especificación <strong>aesthetic</strong>,
<em>alpha</em> puede ser mapeado hacia una variable de los datos. Por
ejemplo, podemos asignar una transparencia diferente a cada continente
usando <code>geom_point(aes(alpha = continent))</code>.</p>
</div>
</div>
</div>
<p>Podemos ajustar una relación simple a los datos agregando otra capa,
<code>geom_smooth</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-lm-fit-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Podemos hacer la línea más gruesa <em>configurando</em> el argumento
<strong>aesthetic</strong> <strong>tamaño</strong> en la capa
<code>geom_smooth</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, size<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ADVERTENCIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.
This warning is displayed once every 8 hours.
Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
generated.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-lm-fit2-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Existen dos formas en las que un <em>aesthetic</em> puede ser
especificado. Aquí <em>configuramos</em> el <strong>aesthetic</strong>
<strong>tamaño</strong> pasándolo como un argumento a
<code>geom_smooth</code>. Previamente en la lección habíamos usado la
función <code>aes</code> para definir un <em>mapeo</em> entre alguna
variable de los datos y su representación visual.</p>
<div id="desafío-4a" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4a" class="callout-inner">
<h3 class="callout-title">Desafío 4a</h3>
<div class="callout-content">
<p>Modifica el color y el tamaño de los puntos en la capa puntos en el
ejemplo anterior</p>
<p>Pista: No uses la función <code>aes</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 4a
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Modifica el color y el tamaño de los puntos en la capa puntos en el
ejemplo anterior</p>
<p>Pista: No uses la función <code>aes</code>.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_point</span><span class="op">(</span>size<span class="op">=</span><span class="fl">3</span>, color<span class="op">=</span><span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, size<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-ch4a-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="desafío-4b" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4b" class="callout-inner">
<h3 class="callout-title">Desafío 4b</h3>
<div class="callout-content">
<p>Modifica tu solución al Desafío 4a de manera que ahora los puntos
tengan una forma diferente y estén coloreados de acuerdo al continente
incluyendo líneas de tendencia.</p>
<p>Pista: El argumento color puede ser usado dentro de
<strong>aesthetic</strong></p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución al desafío 4b
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Modifica tu solución al Desafío 4a de manera que ahora los puntos
tengan una forma diferente y estén coloreados de acuerdo al continente
incluyendo líneas de tendencia.</p>
<p>Pista: El argumento color puede ser usado dentro de
<strong>aesthetic</strong></p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_point</span><span class="op">(</span>size<span class="op">=</span><span class="fl">3</span>, shape<span class="op">=</span><span class="fl">17</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, size<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-ch4b-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="figuras-en-múltiples-paneles">Figuras en múltiples paneles<a class="anchor" aria-label="anchor" href="#figuras-en-m%C3%BAltiples-paneles"></a>
</h2>
<hr class="half-width">
<p>Anteriormente visualizamos el cambio en la esperanza de vida a lo
largo del tiempo para cada uno de los países en un solo gráfico. Como
una alternativa, podemos dividir este gráfico en múltiples paneles al
agregar una capa <strong>facet</strong>, enfocándonos únicamente en
aquellos países con nombres que empiezan con la letra “A” o “Z”.</p>
<div id="pista" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="pista" class="callout-inner">
<h3 class="callout-title">Pista</h3>
<div class="callout-content">
<p>Empezamos por subdividir los datos. Usamos la función
<code>substr</code> para extraer una parte de una secuencia de
caracteres; extrayendo las letras que ocurran de la posición
<code>start</code> hasta <code>stop</code>, inclusive, del vector
<code>gapminder$country</code>. El operador <code>%in%</code> nos
permite hacer múltiples comparaciones y evita que tengamos que escribir
una condición muy larga para subdividir los datos (en este caso,
<code>starts.with %in% c("A", "Z")</code> es equivalente a
<code>starts.with == "A" | starts.with == "Z"</code>)</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starts.with</span> <span class="op">&lt;-</span> <span class="fu">substr</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span>, start <span class="op">=</span> <span class="fl">1</span>, stop <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">az.countries</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="va">starts.with</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"Z"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">az.countries</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-facet-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>La capa <code>facet_wrap</code> toma una “fórmula” como argumento, lo
cual se indica por el símbolo <code>~</code>. Esto le dice a R que debe
dibujar un panel para cada valor único de la columna “country” del
<strong>dataset</strong> gapminder.</p>
</section><section><h2 class="section-heading" id="modificando-texto">Modificando texto<a class="anchor" aria-label="anchor" href="#modificando-texto"></a>
</h2>
<hr class="half-width">
<p>Para limpiar esta figura y que quede lista para publicar necesitamos
cambiar algunos elementos de texto. El eje X está demasiado saturado, y
el nombre del eje Y debería ser “Esperanza de vida”, en vez del nombre
que aparece para esa columna en el <strong>data frame</strong>.</p>
<p>Podemos hacer todo lo anterior agregando un par de capas. La capa
<strong>theme</strong> controla el texto de los ejes, y el tamaño del
texto. Las etiquetas de los ejes, el título del gráfico y el título para
todas las leyendas pueden ser configurados utilizando la función
<code>labs</code>. Los títulos de las leyendas son configurados haciendo
referencia a los mismos nombres que utilizamos en la especificación
<code>aes</code>. Entonces, en el siguiente ejemplo el título de la
leyenda de los colores de las líneas se define utilizando
<code>color = "Continent"</code>, mientras que el título de la leyenda
del color del relleno se definiría utilizando
<code>fill = "MyTitle"</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">az.countries</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="st">"Year"</span>,              <span class="co"># título del eje x</span></span>
<span>        y <span class="op">=</span> <span class="st">"Life expectancy"</span>,   <span class="co"># título del eje y</span></span>
<span>        title <span class="op">=</span> <span class="st">"Figure 1"</span>,   <span class="co"># título principal de la figura</span></span>
<span>        color <span class="op">=</span> <span class="st">"Continent"</span>   <span class="co"># título de la leyenda</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, axis.ticks.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-theme-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="exportando-una-gráfica">Exportando una gráfica<a class="anchor" aria-label="anchor" href="#exportando-una-gr%C3%A1fica"></a>
</h2>
<hr class="half-width">
<p>La función <code>ggsave()</code> permite exportar una gráfica creada
con ggplot. Puedes especificar la dimensión y la resolución de tu
gráfica ajustando los argumentos apropiados (<code>width</code>,
<code>height</code> y <code>dpi</code>) para crear gráficas de gran
calidad para publicar. Para poder guardar la gráfica de arriba, primero
tenemos que asignarla a una variable <code>lifeExp_plot</code>, y luego
decirle a <code>ggsave</code> que guarde la gráfica en formato
<code>png</code> a un directorio llamado <code>results</code>.
(Asegúrate de que tienes una carpeta llamada <code>results/</code> en tu
directorio de trabajo.)</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">az.countries</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="st">"Year"</span>,              <span class="co"># título del eje x</span></span>
<span>        y <span class="op">=</span> <span class="st">"Life expectancy"</span>,   <span class="co"># título del eje y</span></span>
<span>        title <span class="op">=</span> <span class="st">"Figure 1"</span>,   <span class="co"># título principal de la figura</span></span>
<span>        color <span class="op">=</span> <span class="st">"Continent"</span>   <span class="co"># título de la leyenda</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, axis.ticks.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">ggsave</span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"results/lifeExp.png"</span>, plot <span class="op">=</span> <span class="va">lifeExp_plot</span>, width <span class="op">=</span> <span class="fl">12</span>, height <span class="op">=</span> <span class="fl">10</span>, dpi <span class="op">=</span> <span class="fl">300</span>, units <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `ggsave()`:
! Cannot find directory 'results'.
ℹ Please supply an existing directory or use `create.dir = TRUE`.</code></pre>
</div>
<p>Hay dos cosas agradables acerca de <code>ggsave</code>. Primero, usa
la última gráfica por default, así que si omites el argumento
<code>plot</code>, <code>ggsave</code> automáticamente guardará la
última gráfica que creaste con <code>ggplot</code>. En segundo lugar,
<code>ggsave</code> trata de determinar el formato en que quieres
guardar la gráfica a partir de la extensión provista en el nombre del
archivo (por ejemplo <code>.png</code> or <code>.pdf</code>). Si es
necesario, puedes especificar el formato explícitamente en el argumento
<code>device</code>.</p>
<p>Esta lección es una prueba de lo que puedes hacer utilizando
<code>ggplot2</code>. RStudio proporciona una <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="external-link">hoja
de ayuda</a> realmente útil de las diferentes capas disponibles, una
documentación más extensa se encuentra disponible en el <a href="https://docs.ggplot2.org/current/" class="external-link">sitio web de ggplot2</a>.
Finalmente, si no tienen idea de cómo cambiar algún detalle, una
búsqueda rápida en Google te llevarán a Stack Overflow donde encuentras
preguntas y respuestas ¡con código reusable que puedes modificar!</p>
<div id="desafío-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-5" class="callout-inner">
<h3 class="callout-title">Desafío 5</h3>
<div class="callout-content">
<p>Crea una gráfica de densidad de GDP per cápita, en la que el color
del relleno cambie por continente.</p>
<p>Avanzado:</p>
<ul>
<li>Transforma el eje X para visualizar mejor la dispersión de los
datos.</li>
<li>Agrega una capa <strong>facet</strong> para generar gráficos de
densidad con un panel para cada año.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Solución al desafío 5
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Crea una gráfica de densidad de GDP per cápita, en la que el color
del relleno cambie por continente.</p>
<p>Avanzado:</p>
<ul>
<li>Transforma el eje X para visulaizar mejor la dispersión de los
datos.</li>
<li>Agrega una capa <strong>facet</strong> para generar gráficos de
densidad con un panel para cada año.</li>
</ul>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, fill<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_density</span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">year</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/08-plot-ggplot2-rendered-ch5-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar <code>ggplot2</code> para crear gráficos.</li>
<li>Piensa cada gráfico como capas: estética, geometría, estadisticas,
transformaciones de escala, y agrupamiento.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-09-vectorization"><p>Content from <a href="09-vectorization.html">Vectorización</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/09-vectorization.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo operar sobre todos los elementos de un vector a la
vez?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Entender las operaciones vertorizadas en R.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>La mayoría de las funciones en R están vectorizadas, lo que significa
que la función operará sobre todos los elementos de un vector sin
necesidad de hacer un bucle a través de cada elemento y actuar sobre
cada uno de ellos. Esto hace la escritura de código más concisa, fácil
de leer y menos propenso a errores.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2 4 6 8</code></pre>
</div>
<p>La multiplicación se aplicó a cada elemento del vector.</p>
<p>También podemos sumar dos vectores juntos:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">6</span><span class="op">:</span><span class="fl">9</span></span>
<span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  7  9 11 13</code></pre>
</div>
<p>Cada elemento de <code>x</code> fue sumado a su correspondiente
elemento de <code>y</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>x<span class="sc">:</span>  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="sc">+</span>  <span class="sc">+</span>  <span class="sc">+</span>  <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>y<span class="sc">:</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="sc">---------------</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="dv">7</span>  <span class="dv">9</span> <span class="dv">11</span> <span class="dv">13</span></span></code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Probemos esto en la columna <code>pop</code> del
<strong>dataset</strong> <code>gapminder</code>.</p>
<p>Haz una nueva columna en el <strong>data frame</strong>
<code>gapminder</code> que contiene la población en unidades de millones
de personas. Comprueba el principio o el final del <strong>data
frame</strong> para asegurar que funcionó.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Intenta esto en la columna <code>pop</code> del
<strong>dataset</strong> <code>gapminder</code>.</p>
<p>Haz una nueva columna en el <strong>data frame</strong>
<code>gapminder</code> que contiene población en unidades de millones de
personas. Comprueba el principio o el final del <strong>data
frame</strong> para asegurar que funcionó.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">$</span><span class="va">pop_millions</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">$</span><span class="va">pop</span> <span class="op">/</span> <span class="fl">1e6</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap pop_millions
1 Afghanistan 1952  8425333      Asia  28.801  779.4453     8.425333
2 Afghanistan 1957  9240934      Asia  30.332  820.8530     9.240934
3 Afghanistan 1962 10267083      Asia  31.997  853.1007    10.267083
4 Afghanistan 1967 11537966      Asia  34.020  836.1971    11.537966
5 Afghanistan 1972 13079460      Asia  36.088  739.9811    13.079460
6 Afghanistan 1977 14880372      Asia  38.438  786.1134    14.880372</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>En una sola gráfica, traza la población, en millones, en comparación
con el año, para todos los países. No te preocupes en identificar qué
país es cuál.</p>
<p>Repite el ejercicio, graficando sólo para China, India, e Indonesia.
Nuevamente, no te preocupes acerca de cuál es cuál.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Recuerda tus habilidades de graficación al crear una gráfica con la
población en millones en comparación con el año.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">pop_millions</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/09-vectorization-rendered-ch2-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">countryset</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"China"</span>,<span class="st">"India"</span>,<span class="st">"Indonesia"</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span> <span class="op">%in%</span> <span class="va">countryset</span>,<span class="op">]</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">pop_millions</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/09-vectorization-rendered-ch2-sol-2.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>Operadores de comparación, operadores lógicos y muchas otras
funciones también están vectorizadas:</p>
<p><strong>Operadores de Comparación</strong></p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE FALSE  TRUE  TRUE</code></pre>
</div>
<p><strong>Operadores Lógicos</strong></p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">3</span>  <span class="co"># o, para más claridad, a &lt;- (x &gt; 3)</span></span>
<span><span class="va">a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
<div id="sugerencia-algunas-funciones-útiles-para-vectores-lógicos" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-algunas-funciones-útiles-para-vectores-lógicos" class="callout-inner">
<h3 class="callout-title">Sugerencia: algunas funciones útiles para vectores lógicos</h3>
<div class="callout-content">
<p><code>any()</code> devuelve <code>TRUE</code> si <em>algún</em>
elemento del vector es <code>TRUE</code> <code>all()</code> devuelve
<code>TRUE</code> si <em>todos</em> los elementos del vector son
<code>TRUE</code></p>
</div>
</div>
</div>
<p>La mayoría de las funciones también operan elemento por elemento en
los vectores:</p>
<p><strong>Funciones</strong></p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="fu">log</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.0000000 0.6931472 1.0986123 1.3862944</code></pre>
</div>
<p>Operaciones vectorizadas en matrices:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">m</span> <span class="op">*</span> <span class="op">-</span><span class="fl">1</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4]
[1,]   -1   -4   -7  -10
[2,]   -2   -5   -8  -11
[3,]   -3   -6   -9  -12</code></pre>
</div>
<div id="sugerencia-multiplicación-elemento-por-elemento-vs.-multiplicación-de-matriz" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-multiplicación-elemento-por-elemento-vs.-multiplicación-de-matriz" class="callout-inner">
<h3 class="callout-title">Sugerencia: multiplicación elemento por elemento vs. multiplicación de matriz</h3>
<div class="callout-content">
<p>Muy importante: el operador<code>*</code> te da una multiplicación de
elemento por elemento! Para hacer multiplicación de matrices, necesitás
usar el operador <code>%*%</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">%*%</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span>, nrow<span class="op">=</span><span class="fl">4</span>, ncol<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1]
[1,]   22
[2,]   26
[3,]   30</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, nrow<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">%*%</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, ncol<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1]
[1,]   30</code></pre>
</div>
<p>Para saber más sobre Álgebra de matrices, ver <a href="https://www.statmethods.net/advstats/matrix.html" class="external-link">Quick-R
reference guide</a></p>
</div>
</div>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Dada la siguiente matriz:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">m</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
<p>Escribe lo que crees que sucederá cuando se ejecute:</p>
<ol style="list-style-type: decimal">
<li><code>m ^ -1</code></li>
<li><code>m * c(1, 0, -1)</code></li>
<li><code>m &gt; c(0, 20)</code></li>
<li><code>m * c(1, 0, -1, 2)</code></li>
</ol>
<p>¿Obtuviste la salida que esperabas? Si no, pregunta a un
ayudante!</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Dada la siguiente matriz:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">m</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
<p>Escribe lo que piensas que sucederá cuando ejecutes:</p>
<ol style="list-style-type: decimal">
<li><code>m ^ -1</code></li>
</ol>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>          [,1]      [,2]      [,3]       [,4]
[1,] 1.0000000 0.2500000 0.1428571 0.10000000
[2,] 0.5000000 0.2000000 0.1250000 0.09090909
[3,] 0.3333333 0.1666667 0.1111111 0.08333333</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li><code>m * c(1, 0, -1)</code></li>
</ol>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    0    0    0    0
[3,]   -3   -6   -9  -12</code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li><code>m &gt; c(0, 20)</code></li>
</ol>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      [,1]  [,2]  [,3]  [,4]
[1,]  TRUE FALSE  TRUE FALSE
[2,] FALSE  TRUE FALSE  TRUE
[3,]  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>Estamos interesados en encontrar la suma de la siguiente secuencia de
fracciones:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">x</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">2</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">3</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">...</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">n</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<p>Esto sería tedioso de escribir, e imposible para valores altos de
n. Usa vectorización para calcular x cuando n=100. ¿Cuál es la suma
cuando n=10.000?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Estamos interesados en encontrar la suma de la siguiente secuencia de
fracciones:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">x</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">2</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">3</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">...</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">n</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<p>Esto sería tedioso de escribir, e imposible para valores altos de n.
¿Puedes usar vectorización para calcular x, cuando n=100? ¿Qué tal
cuando n=10,000?</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sum</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.634984</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sum</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1e04</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.644834</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10000</span></span>
<span><span class="fu">sum</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.644834</code></pre>
</div>
<p>Podemos obtener el mismo resultado usando una función:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inverse_sum_of_squares</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">sum</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">inverse_sum_of_squares</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.634984</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">inverse_sum_of_squares</span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.644834</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10000</span></span>
<span><span class="fu">inverse_sum_of_squares</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.644834</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Uso de operaciones vectorizadas en lugar de bucles.</li>
</ul>
</div>
</div>
</div></section><section id="aio-10-functions"><p>Content from <a href="10-functions.html">Funciones</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/10-functions.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo escribir una nueva función en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Definir una función que usa argumentos.</li>
<li>Obtener un valor a partir de una función.</li>
<li>Revisar argumentos con <code>stopifnot()</code> en las
funciones.</li>
<li>Probar una función.</li>
<li>Establecer valores por defecto para los argumentos de las
funciones.</li>
<li>Explicar por qué debemos dividir programas en funciones pequeñas y
de propósitos únicos.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="palabras-clave" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="palabras-clave" class="callout-inner">
<h3 class="callout-title">Palabras clave</h3>
<div class="callout-content">
<p>Comando : Traducción</p>
<p><code>stopifnot</code> : para si no</p>
<p><code>NULL</code> : nulo</p>
<p><code>paste</code> : pegar</p>
<p><code>TRUE</code> : verdadero</p>
<p><code>FALSE</code> : falso</p>
<p><code>source</code> : fuente</p>
</div>
</div>
</div>
<p>Si tuviéramos un único conjunto de datos para analizar, probablemente
sería más rápido cargar el archivo en una hoja de cálculo y usarla para
graficar estadísticas simples. Sin embargo, los datos
<code>gapminder</code> son actualizados periódicamente, y podríamos
querer volver a bajar esta información actualizada más adelante y
re-analizar los datos. También podríamos obtener datos similares de una
fuente distinta en el futuro.</p>
<p>En esta lección, aprenderás cómo escribir una función de forma que
seamos capaces de repetir varias operaciones con un comando único.</p>
<div id="qué-es-una-función" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="qué-es-una-función" class="callout-inner">
<h3 class="callout-title">¿Qué es una función?</h3>
<div class="callout-content">
<p>Las funciones reúnen una secuencia de operaciones como un todo,
almacenandola para su uso continuo. Las funciones proveen:</p>
<ul>
<li>un nombre que podemos recordar y usar para invocarla</li>
<li>una solución para la necesidad de recordar operaciones
individuales</li>
<li>un conjunto definido de <strong>inputs</strong> y
<strong>outputs</strong> esperados</li>
<li>una mayor conexión con el ambiente de programación</li>
</ul>
<p>Como el componente básico de la mayoría de los lenguajes de
programación, las funciones definidas por el usuario constituyen la
“programación” de cualquier abstracción que puedas hacer. Si has escrito
una función, eres ya todo un programador.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="definiendo-una-función">Definiendo una función<a class="anchor" aria-label="anchor" href="#definiendo-una-funci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>Empecemos abriendo un nuevo <strong>script</strong> de R en el
directorio <code>functions/</code> y nombrémosle functions-lesson.R.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_sum</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">the_sum</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">the_sum</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Definamos una función <code>fahr_a_kelvin()</code> que convierta
temperaturas de Fahrenheit a Kelvin:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_kelvin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">kelvin</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">(</span><span class="va">temp</span> <span class="op">-</span> <span class="fl">32</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span> <span class="op">/</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">273.15</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">kelvin</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Definimos <code>fahr_a_kelvin()</code> asignándola al
<strong>output</strong> de <code>function</code>. La lista de los
nombres de los argumentos se encuentran entre paréntesis. Luego, el <a href="reference.html#function-body">cuerpo</a> de la función–los
comandos que son ejecutados cuando se corre–se encuentran entre
paréntesis curvos (<code>{}</code>). Los comandos en el cuerpo se
indentan con dos espacios. Esto hace que el código sea legible sin
afectar su funcionalidad.</p>
<p>Cuando utilizamos la función, los valores que definimos como
argumentos se asignan a esas variables para que podamos usarlos dentro
de la función. Dentro de la función, usamos un <a href="reference.html#return-statement">return statement</a> para
devolver un resultado a quien lo solicitó.</p>
<div id="sugerencia" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia" class="callout-inner">
<h3 class="callout-title">Sugerencia</h3>
<div class="callout-content">
<p>Una característica única de R es que el <strong>return
statement</strong> no es necesario. R automáticamente devuelve cualquier
variable que esté en la última línea del cuerpo de la función. Pero por
claridad, nosotros explícitamente definiremos el <strong>return
statement</strong>.</p>
</div>
</div>
</div>
<p>Tratemos de correr nuestra función. Llamamos nuestra propia función
de la misma manera que llamamos cualquier otra:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Punto de congelación del agua</span></span>
<span><span class="fu">fahr_to_kelvin</span><span class="op">(</span><span class="fl">32</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 273.15</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Punto de ebullición del agua</span></span>
<span><span class="fu">fahr_to_kelvin</span><span class="op">(</span><span class="fl">212</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 373.15</code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Escribe una función llamada <code>kelvin_a_celsius()</code> que toma
la temperatura en grados Kelvin y devuelve la temperatura en
Celsius.</p>
<p>Pista: Para convertir de Kelvin a Celsius se debe restar 273.15</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Escribe una función llamada <code>kelvin_a_celsius()</code> que toma
la temperatura en grados Kelvin y devuelve la temperatura en
Celsius.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kelvin_to_celsius</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span> <span class="va">celsius</span> <span class="op">&lt;-</span> <span class="va">temp</span> <span class="op">-</span> <span class="fl">273.15</span></span>
<span> <span class="kw">return</span><span class="op">(</span><span class="va">celsius</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="combinando-funciones">Combinando funciones<a class="anchor" aria-label="anchor" href="#combinando-funciones"></a>
</h2>
<hr class="half-width">
<p>El poder real de las funciones proviene de mezclarlas y combinarlas
en pedazos de código aún mas grandes para lograr el resultado que
buscamos.</p>
<p>Definamos dos funciones que convertirán la temperatura de Fahrenheit
a Kelvin, y de Kelvin a Celsius:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_kelvin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">kelvin</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">(</span><span class="va">temp</span> <span class="op">-</span> <span class="fl">32</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span> <span class="op">/</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">273.15</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">kelvin</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">kelvin_to_celsius</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">celsius</span> <span class="op">&lt;-</span> <span class="va">temp</span> <span class="op">-</span> <span class="fl">273.15</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">celsius</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Define la función para convertir directamente de Fahrenheit a
Celsius, reutilizando las dos funciones de arriba (o utilizando tus
propias funciones si lo prefieres).</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución a desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Define la función para convertir directamente de Fahrenheit a
Celsius, reutilizando las dos funciones de arriba.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_celsius</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">temp_k</span> <span class="op">&lt;-</span> <span class="fu">fahr_to_kelvin</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">kelvin_to_celsius</span><span class="op">(</span><span class="va">temp_k</span><span class="op">)</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="interludio-programación-defensiva">Interludio: Programación defensiva<a class="anchor" aria-label="anchor" href="#interludio-programaci%C3%B3n-defensiva"></a>
</h2>
<hr class="half-width">
<p>Ahora que hemos empezado a apreciar cómo las funciones proporcionan
una manera eficiente de hacer que el código R sea reutilizable y
modular, debemos tener en cuenta que es importante garantizar que las
funciones solo funcionen en los casos de uso previstos. Revisar los
parámetros de las funciones está relacionado con el concepto de
<em>programación defensiva</em>. La programación defensiva nos alienta a
probar las condiciones frecuentemente y arrojar un error si algo está
mal. Estas pruebas se conocen como <strong>assertion statements</strong>
porque queremos asegurarnos de que una determinada condición es
<code>TRUE</code> antes de proceder. Esto facilita la depuración porque
nos dan una mejor idea de dónde se originan los errores.</p>
<div class="section level3">
<h3 id="probando-condiciones-con-stopifnot">Probando condiciones con <code>stopifnot()</code>
<a class="anchor" aria-label="anchor" href="#probando-condiciones-con-stopifnot"></a>
</h3>
<p>Empecemos por re-examinar <code>fahr_a_kelvin()</code>, nuestra
función para convertir temperaturas de Fahrenheit a Kelvin. Estaba
definida de la siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_kelvin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">kelvin</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">(</span><span class="va">temp</span> <span class="op">-</span> <span class="fl">32</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span> <span class="op">/</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">273.15</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">kelvin</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Para que esta función trabaje como se desea, el argumento
<code>temp</code> debe ser un valor <code>numeric</code>; de lo
contrario, el procedimiento matemático para convertir entre las dos
escalas de temperatura no funcionará. Para crear un error, podemos usar
la función <code>stop()</code>. Por ejemplo, dado que el argumento
<code>temp</code> debe ser un vector <code>numeric</code>, podríamos
probarlo con un condicional <code>if</code> y devolver un error si la
condición no se cumple. Podríamos agregar esto a nuestra función de la
siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_kelvin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">is.numeric</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">stop</span><span class="op">(</span><span class="st">"temp must be a numeric vector."</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">kelvin</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">(</span><span class="va">temp</span> <span class="op">-</span> <span class="fl">32</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span> <span class="op">/</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">273.15</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">kelvin</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Si tuviéramos muchas condiciones o argumentos para revisar, podría
llevar muchas líneas de código probarlas todas. Afortunadamente R provee
la función de conveniencia <code>stopifnot()</code>. Podemos listar
todos los requerimientos que deben ser evaluados como <code>TRUE</code>;
<code>stopifnot()</code> arroja un error si encuentra uno que sea
<code>FALSE</code>. Listar estas condiciones tiene como objetivo
secundario el generar documentación extra para la función.</p>
<p>Hagamos la programación defensiva con <code>stopifnot()</code>
agregando aseveraciones para probar el <strong>input</strong> a nuestra
función <code>fahr_a_kelvin()</code>.</p>
<p>Queremos asegurar lo siguiente: <code>temp</code> es un vector
numérico. Lo podemos hacer de la siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_kelvin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">stopifnot</span><span class="op">(</span><span class="fu">is.numeric</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">kelvin</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">(</span><span class="va">temp</span> <span class="op">-</span> <span class="fl">32</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span> <span class="op">/</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">273.15</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">kelvin</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Aún funciona si se le da un <strong>input</strong> adecuado.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Punto de congelación del agua</span></span>
<span><span class="fu">fahr_to_kelvin</span><span class="op">(</span>temp <span class="op">=</span> <span class="fl">32</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 273.15</code></pre>
</div>
<p>Pero falla instantáneamente si se le da un <strong>input</strong>
inapropiado.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># La métrica es un factor en lugar de numeric</span></span>
<span><span class="fu">fahr_to_kelvin</span><span class="op">(</span>temp <span class="op">=</span> <span class="fu">as.factor</span><span class="op">(</span><span class="fl">32</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in fahr_to_kelvin(temp = as.factor(32)): is.numeric(temp) is not TRUE</code></pre>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Usar programación defensiva para asegurar que nuestra función
<code>fahr_a_celsius()</code> arroja inmediatamente un error si el
argumento <code>temp</code> se especifica inadecuadamente.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Extender la definición previa de nuestra función agregándole una
llamada explícita a <code>stopifnot()</code>. Dado que
<code>fahr_a_celsius()</code> es una composición de otras dos funciones,
hacer pruebas a la función hace redundante el agregar pruebas a cada una
de las dos funciones que la componen.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fahr_to_celsius</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">stopifnot</span><span class="op">(</span><span class="op">!</span><span class="fu">is.numeric</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">temp_k</span> <span class="op">&lt;-</span> <span class="fu">fahr_to_kelvin</span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">kelvin_to_celsius</span><span class="op">(</span><span class="va">temp_k</span><span class="op">)</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="más-sobre-combinar-funciones">Más sobre combinar funciones<a class="anchor" aria-label="anchor" href="#m%C3%A1s-sobre-combinar-funciones"></a>
</h2>
<hr class="half-width">
<p>Ahora vamos a definir una función que calcula el Producto Interno
Bruto (“GDP” en la base de datos, por sus siglas en inglés Gross
Domestic Product) de un país a partir de los datos disponibles en
nuestro conjunto de datos:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Toma un dataset y multiplica la columna de población</span></span>
<span><span class="co"># por la columna de GDP per capita</span></span>
<span><span class="va">calcGDP</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">gdp</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">pop</span> <span class="op">*</span> <span class="va">dat</span><span class="op">$</span><span class="va">gdpPercap</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Definimos <code>calcGDP()</code> asignándola al
<strong>output</strong> de <code>function</code>. La lista de los
nombres de los argumentos se encuentran entre paréntesis. Luego, el
cuerpo de la función–las instrucciones que se ejecutan cuando se llama a
la función– se encuentran entre llaves (<code>{}</code>).</p>
<p>Hemos indentado los comandos en el cuerpo con dos espacios. Esto hace
que el código sea mas fácil de leer sin afectar su funcionamiento.</p>
<p>Cuando utilizamos la función, los valores que le pasamos se asignan
como argumentos, que se convierten en variables dentro del cuerpo de la
función.</p>
<p>Dentro de la función, usamos la función <code>return()</code> para
obtener el resultado.</p>
<p>Esta función <code>return()</code> es opcional: R automáticamente
devolverá el resultado de cualquier comando que se ejecute en la última
línea de la función.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">calcGDP</span><span class="op">(</span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  6567086330  7585448670  8758855797  9648014150  9678553274 11697659231</code></pre>
</div>
<p>Eso no es muy informativo. Agreguemos algunos argumentos más para
poder extraer por año y país.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Toma un dataset y multiplica la columna de población</span></span>
<span><span class="co"># por la columna de GDP per capita</span></span>
<span><span class="va">calcGDP</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span>, <span class="va">year</span><span class="op">=</span><span class="cn">NULL</span>, <span class="va">country</span><span class="op">=</span><span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu">is.null</span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">year</span> <span class="op">%in%</span> <span class="va">year</span>, <span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">is.null</span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">country</span> <span class="op">%in%</span> <span class="va">country</span>,<span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">gdp</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">pop</span> <span class="op">*</span> <span class="va">dat</span><span class="op">$</span><span class="va">gdpPercap</span></span>
<span></span>
<span>  <span class="va">new</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">dat</span>, gdp<span class="op">=</span><span class="va">gdp</span><span class="op">)</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">new</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Si has estado escribiendo estas funciones en un
<strong>script</strong> de R aparte (¡una buena idea!), puedes cargar
las funciones en nuestra sesión de R usando la función
<code>source()</code>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">source</span><span class="op">(</span><span class="st">"functions/functions-lesson.R"</span><span class="op">)</span></span></code></pre>
</div>
<p>Ok, entonces están pasando muchas cosas en esta función ahora. En
pocas palabras, ahora la función filtra un subconjunto de datos por año
si el argumento año no está vacío, luego filtra un subconjunto de los
resultados por país si el argumento país no está vacío. Luego calcula el
GDP de los datos filtrados resultado de los dos pasos anteriores. La
función luego agrega el valor calculado de GDP como una nueva columna en
los datos filtrados y devuelve esto como el resultado final. Puedes ver
que el <strong>output</strong> es mucho más informativo que un vector
numérico.</p>
<p>Veamos qué sucede cuando especificamos el año:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span>, year<span class="op">=</span><span class="fl">2007</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       country year      pop continent lifeExp  gdpPercap          gdp
12 Afghanistan 2007 31889923      Asia  43.828   974.5803  31079291949
24     Albania 2007  3600523    Europe  76.423  5937.0295  21376411360
36     Algeria 2007 33333216    Africa  72.301  6223.3675 207444851958
48      Angola 2007 12420476    Africa  42.731  4797.2313  59583895818
60   Argentina 2007 40301927  Americas  75.320 12779.3796 515033625357
72   Australia 2007 20434176   Oceania  81.235 34435.3674 703658358894</code></pre>
</div>
<p>O para un país específico:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span>, country<span class="op">=</span><span class="st">"Australia"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     country year      pop continent lifeExp gdpPercap          gdp
61 Australia 1952  8691212   Oceania  69.120  10039.60  87256254102
62 Australia 1957  9712569   Oceania  70.330  10949.65 106349227169
63 Australia 1962 10794968   Oceania  70.930  12217.23 131884573002
64 Australia 1967 11872264   Oceania  71.100  14526.12 172457986742
65 Australia 1972 13177000   Oceania  71.930  16788.63 221223770658
66 Australia 1977 14074100   Oceania  73.490  18334.20 258037329175
67 Australia 1982 15184200   Oceania  74.740  19477.01 295742804309
68 Australia 1987 16257249   Oceania  76.320  21888.89 355853119294
69 Australia 1992 17481977   Oceania  77.560  23424.77 409511234952
70 Australia 1997 18565243   Oceania  78.830  26997.94 501223252921
71 Australia 2002 19546792   Oceania  80.370  30687.75 599847158654
72 Australia 2007 20434176   Oceania  81.235  34435.37 703658358894</code></pre>
</div>
<p>O ambos:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span>, year<span class="op">=</span><span class="fl">2007</span>, country<span class="op">=</span><span class="st">"Australia"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     country year      pop continent lifeExp gdpPercap          gdp
72 Australia 2007 20434176   Oceania  81.235  34435.37 703658358894</code></pre>
</div>
<p>Veamos paso a paso el cuerpo de la función:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>calcGDP <span class="ot">&lt;-</span> <span class="cf">function</span>(dat, <span class="at">year=</span><span class="cn">NULL</span>, <span class="at">country=</span><span class="cn">NULL</span>) {</span></code></pre>
</div>
<p>Aquí hemos agregado dos argumentos, año y país. Hemos establecido
<em>argumentos predeterminados</em> para ambos como NULL usando el
operador = en la definición de la función. Esto significa que esos
argumentos tomarán esos valores a menos que el usuario especifique lo
contrario.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu">is.null</span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">year</span> <span class="op">%in%</span> <span class="va">year</span>, <span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">is.null</span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">country</span> <span class="op">%in%</span> <span class="va">country</span>,<span class="op">]</span></span>
<span>  <span class="op">}</span></span></code></pre>
</div>
<p>Aquí verificamos si cada argumento adicional se define como
<code>null</code>, y cuando no sea <code>null</code> se sobreescriben
los datos almacenados en <code>dat</code> por un subconjunto de datos
determinados por el argumento not-<code>null</code>.</p>
<p>Hacemos esto para que nuestra función sea más flexible para más
adelante. Podemos pedirle que calcule el GDP para:</p>
<ul>
<li>El <strong>dataset</strong> completo;</li>
<li>Un solo año;</li>
<li>Un solo país;</li>
<li>Una combinación única de año y país.</li>
</ul>
<p>Al utilizar el operador <code>%in%</code>, también podemos asignarle
múltiples años o países a estos argumentos.</p>
<div id="sugerencia-pasar-por-valor" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-pasar-por-valor" class="callout-inner">
<h3 class="callout-title">Sugerencia: Pasar por valor</h3>
<div class="callout-content">
<p>Las funciones en R casi siempre hacen copias de los datos para operar
dentro del cuerpo de una función. Cuando modificamos <code>dat</code>
dentro de la función estamos modificando la copia del
<strong>dataset</strong> gapminder almacenado en <code>dat</code>, y no
la variable original que asignamos como el primer argumento.</p>
<p>Eso se llama ****pasar por valor**** y hace la escritura del código
mucho más segura: puedes estar seguro que cualquier cambio que hagas
dentro del cuerpo de la función, se mantendrá dentro de la función.</p>
</div>
</div>
</div>
<div id="sugerencia-alcance-de-la-función" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-alcance-de-la-función" class="callout-inner">
<h3 class="callout-title">Sugerencia: Alcance de la función</h3>
<div class="callout-content">
<p>Otro concepto importante es el alcance: las variables (¡o funciones!)
que creas o modificas dentro del cuerpo de una función sólo existen
durante el tiempo de ejecución de la función. Cuando llamamos
<code>calcGDP()</code>, las variables <code>dat</code>, <code>gdp</code>
y <code>new</code> sólo existen dentro del cuerpo de la función.
Incluso, si tenemos variables con el mismo nombre en nuestra sesión
interactiva de R, éstas no son modificadas en ninguna manera cuando se
ejecuta la función.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>  gdp <span class="ot">&lt;-</span> dat<span class="sc">$</span>pop <span class="sc">*</span> dat<span class="sc">$</span>gdpPercap</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>  new <span class="ot">&lt;-</span> <span class="fu">cbind</span>(dat, <span class="at">gdp=</span>gdp)</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>  <span class="fu">return</span>(new)</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="er">}</span></span></code></pre>
</div>
<p>Finalmente, calculamos GDP en nuestro nuevo subconjunto de datos, y
creamos una nueva <strong>dataframe</strong> con esta columna agregada.
Esto significa que cuando llamamos a la función, en el resultado podemos
ver el contexto de los valores GDP obtenidos, lo que es mucho mejor que
nuestro primer intento cuando habíamos obtenido un vector de
números.</p>
<div id="desafío-3-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3-1" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Probar tu función GDP calculando el GDP para Nueva Zelandia (“New
Zealand”) en 1987. ¿Cómo difiere del GDP de Nueva Zelandia en 1952?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solución al desafío 3
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span>, year <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1952</span>, <span class="fl">1987</span><span class="op">)</span>, country <span class="op">=</span> <span class="st">"New Zealand"</span><span class="op">)</span></span></code></pre>
</div>
<p>GDP para Nueva Zelandia en 1987: 65050008703</p>
<p>GDP para Nueva Zelandia en 1952: 21058193787</p>
</div>
</div>
</div>
</div>
<div id="desafío-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-4" class="callout-inner">
<h3 class="callout-title">Desafío 4</h3>
<div class="callout-content">
<p>La función <code>paste()</code> puede ser usada para combinar texto,
ej.:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best_practice</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Write"</span>, <span class="st">"programs"</span>, <span class="st">"for"</span>, <span class="st">"people"</span>, <span class="st">"not"</span>, <span class="st">"computers"</span><span class="op">)</span></span>
<span><span class="fu">paste</span><span class="op">(</span><span class="va">best_practice</span>, collapse<span class="op">=</span><span class="st">" "</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Write programs for people not computers"</code></pre>
</div>
<p>Escribir una función <code>fence()</code> que tome dos vectores como
argumentos, llamados <code>text</code> y <code>wrapper</code>, y muestra
el texto flanqueado del <code>wrapper</code>:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fence</span><span class="op">(</span>text<span class="op">=</span><span class="va">best_practice</span>, wrapper<span class="op">=</span><span class="st">"***"</span><span class="op">)</span></span></code></pre>
</div>
<p><em>Nota:</em> la función <code>paste()</code> tiene un argumento
llamado <code>sep</code>, que especifica el separador de texto. Por
defecto es un espacio: ” “. El valor por defecto de la función
<code>paste0()</code> es sin espacio”“.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solución al desafío 4
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>Escribir una función <code>fence()</code> que toma dos vectores como
argumentos, llamados <code>text</code> y <code>wrapper</code>, e imprime
el texto flanqueado del <code>wrapper</code>:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fence</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">text</span>, <span class="va">wrapper</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">text</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">wrapper</span>, <span class="va">text</span>, <span class="va">wrapper</span><span class="op">)</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">paste</span><span class="op">(</span><span class="va">text</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">best_practice</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Write"</span>, <span class="st">"programs"</span>, <span class="st">"for"</span>, <span class="st">"people"</span>, <span class="st">"not"</span>, <span class="st">"computers"</span><span class="op">)</span></span>
<span><span class="fu">fence</span><span class="op">(</span>text<span class="op">=</span><span class="va">best_practice</span>, wrapper<span class="op">=</span><span class="st">"***"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "*** Write programs for people not computers ***"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="sugerencia-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-1" class="callout-inner">
<h3 class="callout-title">Sugerencia</h3>
<div class="callout-content">
<p>R tiene algunos aspectos únicos que pueden ser explotados cuando se
realizan operaciones más complicadas. No escribiremos nada que requiera
el conocimiento de estos conceptos más avanzados. En el futuro, cuando
te sientas cómodo escribiendo funciones en R, puedes aprender más
leyendo el <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Environment-objects" class="external-link">Manual
de lenguaje de R</a> o este <a href="https://adv-r.had.co.nz/Environments.html" class="external-link">capítulo</a> de <a href="https://adv-r.had.co.nz/" class="external-link">Advanced R Programming</a> de Hadley
Wickham.</p>
</div>
</div>
</div>
<div id="sugerencia-probar-y-documentar" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-probar-y-documentar" class="callout-inner">
<h3 class="callout-title">Sugerencia: Probar y documentar</h3>
<div class="callout-content">
<p>Es importante probar las funciones así como documentarlas: la
documentación ayuda, tanto a tí como a otros, a entender cuál es el
propósito de la función y cómo usarla; además es importante<br>
asegurarse que la función realmente haga lo que tú piensas que hace.</p>
<p>Cuando recién comiences, tu flujo de trabajo probablemente luzca algo
así:</p>
<ol style="list-style-type: decimal">
<li>Escribir una función</li>
<li>Comentar partes de la función para documentar su comportamiento</li>
<li>Cargar el archivo <strong>source</strong>
</li>
<li>Experimentar con ella en la consola para asegurarte que se comporta
tal como tu esperas.</li>
<li>Hacer los arreglos necesarios</li>
<li>Volver a probar y repetir.</li>
</ol>
<p>La documentación formal para las funciones, escritas en archivos
<code>.Rd</code> aparte, se transforman en la documentación que ves en
los archivos de ayuda. El paquete <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html" class="external-link">roxygen2</a>
le permite a los programadores de R escribir la documentación junto con
el código, y luego procesarlo para generar los archivos <code>.Rd</code>
apropiados. Quizás quieras cambiarte a este método más formal de
escribir la documentación cuando empieces a escribir proyectos de R más
complicados.</p>
<p>Pruebas automatizadas formales se pueden escribir usando el paquete
<a href="https://r-pkgs.had.co.nz/tests.html" class="external-link">testthat</a>.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar <code>function</code> para definir una nueva función en R.</li>
<li>Usar parámetros para ingresar valores dentro de las funciones.</li>
<li>Usar <code>stopifnot()</code> para revisar los argumentos de una
función en R de manera flexible.</li>
<li>Cargar funciones dentro de programas empleando
<code>source()</code>.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-11-writing-data"><p>Content from <a href="11-writing-data.html">Guardando datos</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/11-writing-data.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo guardar gráficos y datos creados en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Ser capaz de guardar gráficos y datos desde R.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="palabras-clave" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="palabras-clave" class="callout-inner">
<h3 class="callout-title">Palabras clave</h3>
<div class="callout-content">
<p>Comando : Traducción</p>
<p><code>write.table</code> : escribir tabla</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="guardando-gráficos">Guardando gráficos<a class="anchor" aria-label="anchor" href="#guardando-gr%C3%A1ficos"></a>
</h2>
<hr class="half-width">
<p>Ya hemos visto como guardar el gráfico más reciente que creaste con
el paquete <code>ggplot2</code> usando el comando <code>ggsave</code>. A
manera de recordatorio, aquí está el código:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggsave</span><span class="op">(</span><span class="st">"My_most_recent_plot.pdf"</span><span class="op">)</span></span></code></pre>
</div>
<p>Puedes guardar un gráfico desde Rstudio usando el botón de ‘Export’
en la ventana de ‘Plot’. Esto te dará la opción de guardarlo como .pdf,
.png, .jpg u otros formatos de imágenes.</p>
<p>Puede que quieras guardar los gráficos sin visualizarlos previamente
en la ventana de ‘Plot’. Quizás quieras hacer un documento pdf con
varias páginas: por ejemplo, cada una con un gráfico distinto. O quizás
estás iterando sobre distintos subconjuntos de un archivo, graficando
los datos de cada subconjunto y quieres guardar cada una de los
gráficos. En estos casos obviamente no puedes detener la iteración en
cada paso para dar clic en ‘Export’ para cada uno.</p>
<p>En dicho caso conviene usar un método más flexible. La función
<code>pdf</code> crea un nuevo pdf del cual puedes controlar el tamaño y
la resolución usando los argumentos específicos de esta función.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pdf</span><span class="op">(</span><span class="st">"Life_Exp_vs_time.pdf"</span>, width<span class="op">=</span><span class="fl">12</span>, height<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data<span class="op">=</span><span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, colour<span class="op">=</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># ¡Tienes que asegurarte de cerrar el pdf! Para ello usas el comando:</span></span>
<span></span>
<span><span class="fu">dev.off</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Abre este documento y echa un vistazo.</p>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Vuelve a escribir el comando ‘pdf’, pero esta vez emplea el término
<strong>facet</strong> (sugerencia: usa <code>facet_grid</code>) con los
mismos datos. Esto te permitirá visualizar en un gráfico los datos por
continente y guardarlos en un pdf.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pdf</span><span class="op">(</span><span class="st">"Life_Exp_vs_time.pdf"</span>, width <span class="op">=</span> <span class="fl">12</span>, height <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, colour <span class="op">=</span> <span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="va">p</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu">facet_grid</span><span class="op">(</span><span class="va">.</span> <span class="op">~</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="fu">dev.off</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Los comandos como <code>jpeg</code>y <code>png</code> entre otros son
usados de manera similar para producir documentos en los
correspondientes formatos.</p>
</section><section><h2 class="section-heading" id="guardando-datos">Guardando datos<a class="anchor" aria-label="anchor" href="#guardando-datos"></a>
</h2>
<hr class="half-width">
<p>En algún momento puede que también quieras guardar datos desde R.</p>
<p>Para ello podes usar la función <code>write.table</code>, que es muy
similar a la función <code>read.table</code> que se presentó
anteriormente.</p>
<p>Vamos a crear un <strong>script</strong> para limpiar datos. En este
análisis, vamos a enfocarnos solamente en los datos de
<strong>gapminder</strong> para Australia:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aust_subset</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Australia"</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu">write.table</span><span class="op">(</span><span class="va">aust_subset</span>,</span>
<span>  file<span class="op">=</span><span class="st">"cleaned-data/gapminder-aus.csv"</span>,</span>
<span>  sep<span class="op">=</span><span class="st">","</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora regresemos a la terminal para dar un vistazo a los datos y
asegurarnos que se vean bien:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">head</span> cleaned-data/gapminder-aus.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>"country","year","pop","continent","lifeExp","gdpPercap"
"61","Australia",1952,8691212,"Oceania",69.12,10039.59564
"62","Australia",1957,9712569,"Oceania",70.33,10949.64959
"63","Australia",1962,10794968,"Oceania",70.93,12217.22686
"64","Australia",1967,11872264,"Oceania",71.1,14526.12465
"65","Australia",1972,13177000,"Oceania",71.93,16788.62948
"66","Australia",1977,14074100,"Oceania",73.49,18334.19751
"67","Australia",1982,15184200,"Oceania",74.74,19477.00928
"68","Australia",1987,16257249,"Oceania",76.32,21888.88903
"69","Australia",1992,17481977,"Oceania",77.56,23424.76683</code></pre>
</div>
<p>Mmm, eso no era precisamente lo que queríamos. ¿De dónde vinieron
todas esas comillas?. Los números de línea tampoco tienen sentido.</p>
<p>Veamos el archivo de ayuda para investigar como podemos cambiar este
comportamiento.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">write.table</span></span></code></pre>
</div>
<p>Salvo que configuremos otra cosa, los vectores
<strong>character</strong> aparecen de forma predeterminada entre
comillas cuando se guardan en un archivo. También se guardan los nombres
de los renglones y las columnas.</p>
<p>Cambiemos esto:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.table</span><span class="op">(</span></span>
<span>  <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Australia"</span>,<span class="op">]</span>,</span>
<span>  file<span class="op">=</span><span class="st">"cleaned-data/gapminder-aus.csv"</span>,</span>
<span>  sep<span class="op">=</span><span class="st">","</span>, quote<span class="op">=</span><span class="cn">FALSE</span>, row.names<span class="op">=</span><span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora echemos de nuevo un vistazo a los datos usando nuestras
habilidades en la terminal:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">head</span> cleaned-data/gapminder-aus.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country,year,pop,continent,lifeExp,gdpPercap
Australia,1952,8691212,Oceania,69.12,10039.59564
Australia,1957,9712569,Oceania,70.33,10949.64959
Australia,1962,10794968,Oceania,70.93,12217.22686
Australia,1967,11872264,Oceania,71.1,14526.12465
Australia,1972,13177000,Oceania,71.93,16788.62948
Australia,1977,14074100,Oceania,73.49,18334.19751
Australia,1982,15184200,Oceania,74.74,19477.00928
Australia,1987,16257249,Oceania,76.32,21888.88903
Australia,1992,17481977,Oceania,77.56,23424.76683</code></pre>
</div>
<p>¡Ahora se ve mejor!</p>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Escribe un <strong>script</strong> para limpiar estos datos,
filtrando los datos de <strong>gapminder</strong> que fueron colectados
desde 1990.</p>
<p>Usa este <strong>script</strong> para guardar este nuevo subconjunto
de datos en el directorio <code>cleaned-data</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.table</span><span class="op">(</span></span>
<span>  <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="op">]</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"cleaned-data/gapminder-after1990.csv"</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">","</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Guardar gráficos desde RStudio usando el botón de ‘Export’.</li>
<li>Usar <code>write.table</code> para guardar datos tabulares.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-12-plyr"><p>Content from <a href="12-plyr.html">División y combinación de data frames con plyr</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/12-plyr.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo hacer diferentes cálculos sobre diferentes conjuntos de
datos?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Estar apto a usar la estrategia divide-aplica-combina para el
análisis de datos.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Previamente vimos como puedes usar funciones para simplificar tu
código. Definimos la función <code>calcGDP</code>, la cual toma el
<strong>dataset</strong> gapminder, y multiplica la columna de población
por la columna GDP per cápita. También definimos argumentos adicionales
de modo que pudiéramos filtrar por <code>"year"</code> o por
<code>"country"</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Toma un dataset y multiplica la columna population con</span></span>
<span><span class="co"># la columna GDP per cápita.</span></span>
<span><span class="va">calcGDP</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span>, <span class="va">year</span><span class="op">=</span><span class="cn">NULL</span>, <span class="va">country</span><span class="op">=</span><span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu">is.null</span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">year</span> <span class="op">%in%</span> <span class="va">year</span>, <span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">is.null</span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">country</span> <span class="op">%in%</span> <span class="va">country</span>,<span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">gdp</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">pop</span> <span class="op">*</span> <span class="va">dat</span><span class="op">$</span><span class="va">gdpPercap</span></span>
<span></span>
<span>  <span class="va">new</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">dat</span>, gdp<span class="op">=</span><span class="va">gdp</span><span class="op">)</span></span>
<span>  <span class="kw">return</span><span class="op">(</span><span class="va">new</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Una tarea común que encontrarás mientras trabajes con datos, es que
querrás hacer cálculos en diferentes grupos sobre los datos. En el
ejemplo de arriba, simplemente calculamos el GDP por multiplicar dos
columnas juntas. ¿Pero qué tal si queremos calcular la media GDP por
continente?  </p>
<p>Podríamos ejecutar <code>calcGDP</code> y entonces tomar la media de
cada continente:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">withGDP</span> <span class="op">&lt;-</span> <span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">withGDP</span><span class="op">[</span><span class="va">withGDP</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span>, <span class="st">"gdp"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 20904782844</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">withGDP</span><span class="op">[</span><span class="va">withGDP</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span>, <span class="st">"gdp"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 379262350210</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">withGDP</span><span class="op">[</span><span class="va">withGDP</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Asia"</span>, <span class="st">"gdp"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 227233738153</code></pre>
</div>
<p>Pero esto no es muy <em>bonito</em>. Sí, por usar una función, has
reducido substancialmente la cantidad de repeticiones. Esto
<strong>es</strong> bonito. Pero aún hay repeticiones. La repetición te
costará tiempo, tanto ahora como más tarde, y potencialmente
introducirás algunos errores desagradables.</p>
<p>Podriamos escribir una nueva función que sea flexible como
<code>calcGDP</code>, pero esta también requiere una gran cantidad de
esfuerzo y pruebas para hacerlo bien.</p>
<p>El problema abstracto que estamos encontrando aquí es conocido como
“divide-aplica-combina (<em>split-apply-combine</em>)”:</p>
<figure><img src="fig/12-plyr-fig1.png" alt="Split apply combine" class="figure mx-auto d-block"></figure><p>Nosotros queremos dividir (<em>split</em>) nuestros datos dentro de
grupos, en este caso continentes, aplicar (<em>apply</em>) algunos
cálculos sobre este grupo y, opcionalmente, combinar (<em>combine</em>)
los resultados más tarde.</p>
<section><h2 class="section-heading" id="el-paquete-plyr">El paquete <code>plyr</code>
<a class="anchor" aria-label="anchor" href="#el-paquete-plyr"></a>
</h2>
<hr class="half-width">
<p>Para aquellos que han usado antes R, es posible que estén
familiarizados con la familia de funciones <code>apply</code>. Mientras
que las funciones integradas de R funcionan, vamos a introducirte a otro
método para resolver el problema “split-apply-combine”. El paquete <a href="https://had.co.nz/plyr/" class="external-link">plyr</a> proporciona un conjunto de
funciones que encontramos más amigables de usar para resolver este
problema.</p>
<p>Instalamos este paquete en un desafío anterior. Vamos a cargarlo
ahora:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"plyr"</span><span class="op">)</span></span></code></pre>
</div>
<p>Plyr tiene una función para operar sobre listas o
<code>**lists**</code> , <code>**data.frames**</code> y
<code>**arrays**</code> (matrices, o vectores n-dimensional). Cada
función realiza:</p>
<ol style="list-style-type: decimal">
<li>Una operación de división (<strong>split</strong>ting).</li>
<li>Aplica (<strong>apply</strong>) una función sobre cada una de las
partes a la vez.</li>
<li>Recombina (re<strong>combine</strong>) los datos de salida como un
simple objeto de datos.</li>
</ol>
<p>Las funciones se nombran en función de la estructura de datos que
esperan como entrada, y la estructura de datos que desea devolver como
salida: [a]rray, [l]ist, o [d]ata.frame. La primera letra corresponde a
la estructura de datos de entrada, la segunda letra a la estructura de
datos de salida, y luego el resto de la función se llama “ply”.</p>
<p>Esto nos da 9 funciones básicas **ply. Hay adicionalmente un árbol de
funciones las cuales solo realizarán la división y aplicación de los
pasos y ningún paso combinado. Ellas son nombradas por sus datos de
entrada y representan una salida nula con un <code>_</code> (Ver
tabla)</p>
<p>Note que el uso de “array” de plyr es diferente a R, un array en ply
puede incluir a vector o matriz.</p>
<figure><img src="fig/12-plyr-fig2.png" alt="Full apply suite" class="figure mx-auto d-block"></figure><p>Cada una de las funciones de xxply
(<code>daply</code>,<code>ddply</code>,
<code>llply</code>,<code>laply</code>, …) tiene la misma estructura y 4
características clave:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">xxply</span><span class="op">(</span><span class="va">.data</span>, <span class="va">.variables</span>, <span class="va">.fun</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>La primera letra del nombre de la función da el tipo de la entrada y
el segundo da el tipo de la salida.</li>
<li>
<code>.data</code> – Es el objeto de datos a ser procesado</li>
<li>
<code>.variables</code> – identifica la variable para hacer la
división</li>
<li>
<code>.fun</code> – Da la función a ser llamada para cada pieza</li>
</ul>
<p>Ahora podemos calcular rápidamente la media GDP por
<code>"continent"</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ddply</span><span class="op">(</span></span>
<span> .data <span class="op">=</span> <span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>,</span>
<span> .variables <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span> .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  continent           V1
1    Africa  20904782844
2  Americas 379262350210
3      Asia 227233738153
4    Europe 269442085301
5   Oceania 188187105354</code></pre>
</div>
<p>Veamos el código anterior:</p>
<ul>
<li>La función <code>ddply</code> recibe de entrada un
<code>data.frame</code> (La función empieza con una <strong>d</strong>)
y regresa otro <code>data.frame</code> (la 2da letra es una
<strong>d</strong>)</li>
<li>El primer argumento que dimos fue el <code>data.frame</code> en el
que queríamos operar: en este caso, los datos del
<code>gapminder</code>. Primero llamamos a la función
<code>calcGDP</code> para agregar la columna<code>gdp</code> a nuestra
variable <em>data</em>.</li>
<li>El segundo argumento indica nuestro criterio para dividir: En este
caso la columna <code>"continent"</code>. Ten en cuenta que le dimos el
nombre de la columna, no los valores de la columna como habíamos hecho
previamente con los subconjuntos. <code>Plyr</code> se encarga de los
detalles de la implementación por ti.</li>
<li>El tercer argumento es la función que queremos aplicar a cada grupo
de datos. Tenemos que definir nuestra propia función corta aquí: cada
subconjunto de datos va almacenado en <code>x</code>, el primer
argumento de la función. Esta es una función anónima: no la hemos
definido en otra parte y no tiene nombre. Solo existe en el ámbito de
nuestro llamado a <code>ddply</code>.</li>
</ul>
<p>¿Qué pasa si queremos un tipo diferente de estructura de datos de
salida?:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dlply</span><span class="op">(</span></span>
<span> .data <span class="op">=</span> <span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>,</span>
<span> .variables <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span> .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$Africa
[1] 20904782844

$Americas
[1] 379262350210

$Asia
[1] 227233738153

$Europe
[1] 269442085301

$Oceania
[1] 188187105354

attr(,"split_type")
[1] "data.frame"
attr(,"split_labels")
  continent
1    Africa
2  Americas
3      Asia
4    Europe
5   Oceania</code></pre>
</div>
<p>Llamamos a la misma función otra vez, pero cambiamos la segunda letra
por una <code>l</code>, asi que la salida fue regresada como una
lista.</p>
<p>Podemos especificar múltiples columnas para agrupar:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ddply</span><span class="op">(</span></span>
<span> .data <span class="op">=</span> <span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>,</span>
<span> .variables <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"year"</span><span class="op">)</span>,</span>
<span> .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   continent year           V1
1     Africa 1952   5992294608
2     Africa 1957   7359188796
3     Africa 1962   8784876958
4     Africa 1967  11443994101
5     Africa 1972  15072241974
6     Africa 1977  18694898732
7     Africa 1982  22040401045
8     Africa 1987  24107264108
9     Africa 1992  26256977719
10    Africa 1997  30023173824
11    Africa 2002  35303511424
12    Africa 2007  45778570846
13  Americas 1952 117738997171
14  Americas 1957 140817061264
15  Americas 1962 169153069442
16  Americas 1967 217867530844
17  Americas 1972 268159178814
18  Americas 1977 324085389022
19  Americas 1982 363314008350
20  Americas 1987 439447790357
21  Americas 1992 489899820623
22  Americas 1997 582693307146
23  Americas 2002 661248623419
24  Americas 2007 776723426068
25      Asia 1952  34095762661
26      Asia 1957  47267432088
27      Asia 1962  60136869012
28      Asia 1967  84648519224
29      Asia 1972 124385747313
30      Asia 1977 159802590186
31      Asia 1982 194429049919
32      Asia 1987 241784763369
33      Asia 1992 307100497486
34      Asia 1997 387597655323
35      Asia 2002 458042336179
36      Asia 2007 627513635079
37    Europe 1952  84971341466
38    Europe 1957 109989505140
39    Europe 1962 138984693095
40    Europe 1967 173366641137
41    Europe 1972 218691462733
42    Europe 1977 255367522034
43    Europe 1982 279484077072
44    Europe 1987 316507473546
45    Europe 1992 342703247405
46    Europe 1997 383606933833
47    Europe 2002 436448815097
48    Europe 2007 493183311052
49   Oceania 1952  54157223944
50   Oceania 1957  66826828013
51   Oceania 1962  82336453245
52   Oceania 1967 105958863585
53   Oceania 1972 134112109227
54   Oceania 1977 154707711162
55   Oceania 1982 176177151380
56   Oceania 1987 209451563998
57   Oceania 1992 236319179826
58   Oceania 1997 289304255183
59   Oceania 2002 345236880176
60   Oceania 2007 403657044512</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">daply</span><span class="op">(</span></span>
<span> .data <span class="op">=</span> <span class="fu">calcGDP</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>,</span>
<span> .variables <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"year"</span><span class="op">)</span>,</span>
<span> .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>          year
continent          1952         1957         1962         1967         1972
  Africa     5992294608   7359188796   8784876958  11443994101  15072241974
  Americas 117738997171 140817061264 169153069442 217867530844 268159178814
  Asia      34095762661  47267432088  60136869012  84648519224 124385747313
  Europe    84971341466 109989505140 138984693095 173366641137 218691462733
  Oceania   54157223944  66826828013  82336453245 105958863585 134112109227
          year
continent          1977         1982         1987         1992         1997
  Africa    18694898732  22040401045  24107264108  26256977719  30023173824
  Americas 324085389022 363314008350 439447790357 489899820623 582693307146
  Asia     159802590186 194429049919 241784763369 307100497486 387597655323
  Europe   255367522034 279484077072 316507473546 342703247405 383606933833
  Oceania  154707711162 176177151380 209451563998 236319179826 289304255183
          year
continent          2002         2007
  Africa    35303511424  45778570846
  Americas 661248623419 776723426068
  Asia     458042336179 627513635079
  Europe   436448815097 493183311052
  Oceania  345236880176 403657044512</code></pre>
</div>
<p>Puedes usar estas funciones en lugar de ciclos <code>for</code> (y
generalmente es mas rápido). Para remplazar un ciclo ‘for’, pon el
código que estaba en el cuerpo del ciclo <code>for</code> dentro de la
función anónima.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">d_ply</span><span class="op">(</span></span>
<span>  .data<span class="op">=</span><span class="va">gapminder</span>,</span>
<span>  .variables <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span>  .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">meanGDPperCap</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">)</span></span>
<span>    <span class="fu">print</span><span class="op">(</span><span class="fu">paste</span><span class="op">(</span></span>
<span>      <span class="st">"La media GDP per cápita para"</span>, <span class="fu">unique</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">continent</span><span class="op">)</span>,</span>
<span>      <span class="st">"es"</span>, <span class="fu">format</span><span class="op">(</span><span class="va">meanGDPperCap</span>, big.mark<span class="op">=</span><span class="st">","</span><span class="op">)</span></span>
<span>   <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "La media GDP per cápita para Africa es 2,193.755"
[1] "La media GDP per cápita para Americas es 7,136.11"
[1] "La media GDP per cápita para Asia es 7,902.15"
[1] "La media GDP per cápita para Europe es 14,469.48"
[1] "La media GDP per cápita para Oceania es 18,621.61"</code></pre>
</div>
<div id="sugerencia-imprimiendo-números" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-imprimiendo-números" class="callout-inner">
<h3 class="callout-title">Sugerencia: Imprimiendo números</h3>
<div class="callout-content">
<p>La función <code>format</code> puede ser usada para imprimir los
valores numéricos<br>
“bonitos” en los mensajes.</p>
</div>
</div>
</div>
<div id="desafío-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>Calcula el promedio de vida esperado por <code>"continent"</code>.
¿Quién tiene el promedio mas alto? ¿Quién tiene el mas pequeño?</p>
</div>
</div>
</div>
<div id="desafío-2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Calcula el promedio de vida esperado por <code>"continent"</code> y
<code>"year"</code>. ¿Quién tiene el promedio mas grande y mas corto en
2007? ¿Quién tiene el cambio mas grande entre 1952 y 2007?</p>
</div>
</div>
</div>
<div id="desafío-avanzado" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-avanzado" class="callout-inner">
<h3 class="callout-title">Desafío Avanzado</h3>
<div class="callout-content">
<p>Calcula la diferencia en la media de vida esperada entre los años
1952 y 2007 a partir de la salida del desafío 2 usando una de las
funciones <code>plyr</code>.</p>
</div>
</div>
</div>
<div id="desafío-alterno-si-la-clase-parece-perdida" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-alterno-si-la-clase-parece-perdida" class="callout-inner">
<h3 class="callout-title">Desafío alterno si la clase parece perdida</h3>
<div class="callout-content">
<p>Sin ejecutarlos, cuál de los siguientes calculará el promedio de la
esperanza de vida por continente:</p>
<ol style="list-style-type: decimal"><li>
</li></ol>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ddply</span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">gapminder</span>,</span>
<span>  .variables <span class="op">=</span> <span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span>,</span>
<span>  .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu">mean</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>
</li></ol>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ddply</span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">gapminder</span>,</span>
<span>  .variables <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span>  .fun <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal"><li>
</li></ol>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ddply</span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">gapminder</span>,</span>
<span>  .variables <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span>  .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu">mean</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal"><li>
</li></ol>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">adply</span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">gapminder</span>,</span>
<span>  .variables <span class="op">=</span> <span class="st">"continent"</span>,</span>
<span>  .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu">mean</span><span class="op">(</span><span class="va">dataGroup</span><span class="op">$</span><span class="va">lifeExp</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Uso del paquete <code>plyr</code> para dividir datos, aplicar
funciones sobre subconjuntos, y combinar los resultados</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-13-dplyr"><p>Content from <a href="13-dplyr.html">Manipulación de data frames con dplyr</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/13-dplyr.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo manipular data frames sin repetir lo mismo una y otra
vez?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Ser capaces de usar las seis principales acciones de manipulación de
data frames con pipes en <code>dplyr</code>.</li>
<li>Comprender cómo combinar <code>group_by()</code> y
<code>summarize()</code> para obtener resúmenes de datasets.</li>
<li>Ser capaces de analizar un subconjunto de datos usando un filtrado
lógico.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="palabras-clave" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="palabras-clave" class="callout-inner">
<h3 class="callout-title">Palabras clave</h3>
<div class="callout-content">
<p>Comando : Traducción</p>
<p><code>filter</code> : filtrar</p>
<p><code>select</code> : seleccionar</p>
<p><code>group_by</code> : agrupar</p>
<p><code>summarize</code> : resumir</p>
<p><code>count</code> : contar</p>
<p><code>mean</code> : media</p>
<p><code>mutate</code> : mutar</p>
</div>
</div>
</div>
<p>La manipulación de <strong>data frames</strong> significa distintas
cosas para distintos investigadores. A veces queremos seleccionar
ciertas observaciones (filas) o variables (columnas), otras veces
deseamos agrupar los datos en función de una o más variables, o queremos
calcular valores estadísticos de un conjunto. Podemos hacer todo ello
usando las habituales operaciones básicas de R:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span>, <span class="st">"gdpPercap"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2193.755</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span>, <span class="st">"gdpPercap"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7136.11</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Asia"</span>, <span class="st">"gdpPercap"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7902.15</code></pre>
</div>
<p>Pero esto no es muy <em>elegante</em> porque hay demasiada
repetición. Repetir cosas cuesta tiempo, tanto en el momento de hacerlo
como en el futuro, y aumenta la probabilidad de que se produzcan
desagradables <em>bugs</em> (errores).</p>
<section><h2 class="section-heading" id="el-paquete-dplyr">El paquete <code>dplyr</code>
<a class="anchor" aria-label="anchor" href="#el-paquete-dplyr"></a>
</h2>
<hr class="half-width">
<p>Afortunadamente, el paquete <a href="https://cran.r-project.org/package=dplyr" class="external-link"><code>dplyr</code></a>
proporciona un conjunto de funciones (consulta la <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/translations/spanish/data-transformation_es.pdf" class="external-link">guía
rápida</a> ) extremadamente útiles para manipular <strong>data
frames</strong> y así reducir el número de repeticiones , la
probabilidad de cometer errores y el número de caracteres que hay que
escribir. Como valor extra, puedes encontrar que la gramática de
<code>dplyr</code> es más fácil de entender.</p>
<p>Aquí vamos a revisar 6 de sus funciones más usadas, así como a usar
los <strong>pipes</strong> (<code>%&gt;%</code>) para combinarlas.</p>
<ol style="list-style-type: decimal">
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>group_by()</code></li>
<li><code>summarize()</code></li>
<li><code>mutate()</code></li>
</ol>
<p>Si no has instalado antes este paquete, hazlo del siguiente modo:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'dplyr'</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora vamos a cargar el paquete:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="usando-select">Usando select()<a class="anchor" aria-label="anchor" href="#usando-select"></a>
</h2>
<hr class="half-width">
<p>Si por ejemplo queremos continuar el trabajo con sólo unas pocas de
las variables de nuestro <strong>data frame</strong> podemos usar la
función <code>select()</code>. Esto guardará sólo las variables que
seleccionemos.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_gdp</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">gapminder</span>,<span class="va">year</span>,<span class="va">country</span>,<span class="va">gdpPercap</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/13-dplyr-fig1.png" class="figure mx-auto d-block"></figure><p>Si ahora investigamos <code>year_country_gdp</code> veremos que sólo
contiene el año, el país y la renta per cápita. Arriba hemos usado la
gramática ‘normal’, pero la fortaleza de <code>dplyr</code> consiste en
combinar funciones usando <strong>pipes</strong>. Como la gramática de
las <strong>pipes</strong> es distinta a todo lo que hemos visto antes
en R, repitamos lo que hemos hecho arriba, pero esta vez usando
<strong>pipes</strong>.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_gdp</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">year</span>,<span class="va">country</span>,<span class="va">gdpPercap</span><span class="op">)</span></span></code></pre>
</div>
<p>Para ayudarte a entender por qué lo hemos escrito así, vamos a
revisarlo por partes. Primero hemos llamado al <strong>data
frame</strong> “gapminder” y se lo hemos pasado al siguiente paso, que
es la función <code>select()</code>, usando el símbolo del
<strong>pipe</strong> <code>%&gt;%</code>. En este caso no especificamos
qué objeto de datos vamos a usar en la función <code>select()</code>
porque esto se obtiene del resultado de la instrucción previa a el
<strong>pipe</strong>. <strong>Dato curioso:</strong> es muy posible que
te hayas encontrado con <strong>pipes</strong> antes en la terminal de
unix. En R el símbolo del <strong>pipe</strong> es <code>%&gt;%</code>,
mientras que en la terminal es <code>|</code>, pero el concepto es el
mismo.</p>
</section><section><h2 class="section-heading" id="usando-filter">Usando filter()<a class="anchor" aria-label="anchor" href="#usando-filter"></a>
</h2>
<hr class="half-width">
<p>Si ahora queremos continuar con lo de arriba, pero sólo con los
países europeos, podemos combinar <code>select</code> y
<code>filter</code>.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_gdp_euro</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="va">continent</span><span class="op">==</span><span class="st">"Europe"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">year</span>,<span class="va">country</span>,<span class="va">gdpPercap</span><span class="op">)</span></span></code></pre>
</div>
<div id="reto-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reto-1" class="callout-inner">
<h3 class="callout-title">Reto 1</h3>
<div class="callout-content">
<p>Escribe un único comando (que puede ocupar varias líneas e incluir
<strong>pipes</strong>) que produzca un <strong>data frame</strong> y
que tenga los valores africanos correspondientes a <code>lifeExp</code>,
<code>country</code> y <code>year</code>, pero no de los otros
continentes. ¿Cuántas filas tiene dicho <strong>data frame</strong> y
por qué?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución al Reto 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_lifeExp_Africa</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>                           <span class="fu">filter</span><span class="op">(</span><span class="va">continent</span><span class="op">==</span><span class="st">"Africa"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                           <span class="fu">select</span><span class="op">(</span><span class="va">year</span>,<span class="va">country</span>,<span class="va">lifeExp</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Al igual que la vez anterior, primero le pasamos el <strong>data
frame</strong> “gapminder” a la función <code>filter()</code> y luego le
pasamos la versión filtrada del <strong>data frame</strong> a la función
<code>select()</code>. <strong>Nota:</strong> El orden de las
operaciones es muy importante en este caso. Si usamos primero
<code>select()</code>, la función <code>filter()</code> no habría podido
encontrar la variable “continent” porque la habríamos eliminado en el
paso previo.</p>
</section><section><h2 class="section-heading" id="usando-group_by-y-summarize">Usando group_by() y summarize()<a class="anchor" aria-label="anchor" href="#usando-group_by-y-summarize"></a>
</h2>
<hr class="half-width">
<p>Se suponía que teníamos que reducir las repeticiones causantes de
errores de lo que se puede hacer con el R básico, pero hasta ahora no lo
hemos conseguido porque tendríamos que repetir lo escrito arriba para
cada continente. En lugar de <code>filter()</code>, que solamente deja
pasar las observaciones que se ajustan a tu criterio
(<code>continent = Europe</code> en lo escrito arriba), podemos usar
<code>group_by()</code>, que esencialmente usará cada uno de los
criterios únicos que podrías haber usado con <code>filter()</code>.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1704 obs. of  6 variables:
 $ country  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num  8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr  "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>gropd_df [1,704 × 6] (S3: grouped_df/tbl_df/tbl/data.frame)
 $ country  : chr [1:1704] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num [1:1704] 8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr [1:1704] "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num [1:1704] 779 821 853 836 740 ...
 - attr(*, "groups")= tibble [5 × 2] (S3: tbl_df/tbl/data.frame)
  ..$ continent: chr [1:5] "Africa" "Americas" "Asia" "Europe" ...
  ..$ .rows    : list&lt;int&gt; [1:5]
  .. ..$ : int [1:624] 25 26 27 28 29 30 31 32 33 34 ...
  .. ..$ : int [1:300] 49 50 51 52 53 54 55 56 57 58 ...
  .. ..$ : int [1:396] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..$ : int [1:360] 13 14 15 16 17 18 19 20 21 22 ...
  .. ..$ : int [1:24] 61 62 63 64 65 66 67 68 69 70 ...
  .. ..@ ptype: int(0)
  ..- attr(*, ".drop")= logi TRUE</code></pre>
</div>
<p>Se puede observar que la estructura del <strong>data frame</strong>
obtenido por <code>group_by()</code> (<code>grouped_df</code>) no es la
misma que la del <strong>data frame</strong> original
<code>gapminder</code>(<code>data.fram</code>). Se puede pensar en un
<code>grouped_df</code> como en una <code>list</code> donde cada item in
la <code>list</code> es un <code>data.frame</code> que contiene
únicamente las filas que corresponden a un valor particular de
<code>continent</code> (en el ejemplo mostrado).</p>
<figure><img src="fig/13-dplyr-fig2.png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="usando-summarize">Usando summarize()<a class="anchor" aria-label="anchor" href="#usando-summarize"></a>
</h2>
<hr class="half-width">
<p>Lo visto arriba no es muy sofisticado, pero <code>group_by()</code>
es más interesante y útil si se usa en conjunto con
<code>summarize()</code>. Esto nos permitirá crear nuevas variables
usando funciones que se aplican a cada uno de los <strong>data
frames</strong> específicos para cada continente. Es decir, usando la
función <code>group_by()</code> dividimos nuestro <strong>data
frame</strong> original en varias partes, a las que luego podemos
aplicarles funciones (por ejemplo, <code>mean()</code> o
<code>sd()</code>) independientemente con <code>summarize()</code>.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_bycontinents</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/13-dplyr-fig3.png" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>continent mean_gdpPercap</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>     <span class="sc">&lt;</span>fctr<span class="sc">&gt;</span>          <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="dv">1</span>    Africa       <span class="fl">2193.755</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="dv">2</span>  Americas       <span class="fl">7136.110</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="dv">3</span>      Asia       <span class="fl">7902.150</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="dv">4</span>    Europe      <span class="fl">14469.476</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="dv">5</span>   Oceania      <span class="fl">18621.609</span></span></code></pre>
</div>
<p>Esto nos ha permitido calcular la renta per cápita media para cada
continente, pero puede ser todavía mucho mejor.</p>
<div id="reto-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reto-2" class="callout-inner">
<h3 class="callout-title">Reto 2</h3>
<div class="callout-content">
<p>Calcula la esperanza de vida media por país. ¿Qué país tiene la
esperanza de vida media mayor y cuál la menor?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al Reto 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">group_by</span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">summarize</span><span class="op">(</span>mean_lifeExp<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">filter</span><span class="op">(</span><span class="va">mean_lifeExp</span> <span class="op">==</span> <span class="fu">min</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span> <span class="op">|</span> <span class="va">mean_lifeExp</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 2
  country      mean_lifeExp
  &lt;chr&gt;               &lt;dbl&gt;
1 Iceland              76.5
2 Sierra Leone         36.8</code></pre>
</div>
<p>Otro modo de hacer esto es usando la función <code>arrange()</code>
del paquete <code>dplyr</code>, que distribuye las filas de un
<strong>data frame</strong> en función del orden de una o más variables
del <strong>data frame</strong>. Tiene una sintaxis similar a otras
funciones del paquete <code>dplyr</code>. Se puede usar
<code>desc()</code> dentro de <code>arrange()</code> para ordenar de
modo descendente.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  country      mean_lifeExp
  &lt;chr&gt;               &lt;dbl&gt;
1 Sierra Leone         36.8</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  country mean_lifeExp
  &lt;chr&gt;          &lt;dbl&gt;
1 Iceland         76.5</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>La función <code>group_by()</code> nos permite agrupar en función de
varias variables. Vamos a agrupar por <code>year</code> y
<code>continent</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_bycontinents_byyear</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>,<span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<p>Esto ya es bastante potente, pero puede ser incluso mejor. Puedes
definir más de una variable en <code>summarize()</code>.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_pop_bycontinents_byyear</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>,<span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              sd_gdpPercap<span class="op">=</span><span class="fu">sd</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_pop<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              sd_pop<span class="op">=</span><span class="fu">sd</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="count-y-n">count() y n()<a class="anchor" aria-label="anchor" href="#count-y-n"></a>
</h2>
<hr class="half-width">
<p>Una operación muy habitual es contar el número de observaciones que
hay en cada grupo. El paquete <code>dplyr</code> tiene dos funciones
relacionadas muy útiles para ello.</p>
<p>Por ejemplo, si queremos comprobar el número de países que hay en el
conjunto de datos para el año 2002 podemos usar la función
<code>count()</code>. Dicha función toma el nombre de una o más columnas
que contienen los grupos en los que estamos interesados y puede
opcionalmente ordenar los resultados en modo descendente si añadimos
<code>sort = TRUE</code>.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">continent</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  continent  n
1    Africa 52
2      Asia 33
3    Europe 30
4  Americas 25
5   Oceania  2</code></pre>
</div>
<p>Si necesitamos usar en nuestros cálculos el número de observaciones
obtenidas, la función <code>n()</code> es muy útil. Por ejemplo, si
queremos obtener el error estándar de la esperanza de vida por
continente:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>se_pop <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 5 × 2
  continent se_pop
  &lt;chr&gt;      &lt;dbl&gt;
1 Africa     0.366
2 Americas   0.540
3 Asia       0.596
4 Europe     0.286
5 Oceania    0.775</code></pre>
</div>
<p>También se pueden encadenar juntas varias operaciones de resumen,
como en el caso siguiente, en el que calculamos el <code>minimum</code>,
<code>maximum</code>, <code>mean</code> y <code>se</code> de la
esperanza de vida por país para cada continente:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span></span>
<span>      mean_le <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,</span>
<span>      min_le <span class="op">=</span> <span class="fu">min</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,</span>
<span>      max_le <span class="op">=</span> <span class="fu">max</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,</span>
<span>      se_le <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 5 × 5
  continent mean_le min_le max_le se_le
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 Africa       48.9   23.6   76.4 0.366
2 Americas     64.7   37.6   80.7 0.540
3 Asia         60.1   28.8   82.6 0.596
4 Europe       71.9   43.6   81.8 0.286
5 Oceania      74.3   69.1   81.2 0.775</code></pre>
</div>
</section><section><h2 class="section-heading" id="usando-mutate">Usando mutate()<a class="anchor" aria-label="anchor" href="#usando-mutate"></a>
</h2>
<hr class="half-width">
<p>También se pueden crear nuevas variables antes (o incluso después) de
resumir la información usando <code>mutate()</code>.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_pop_bycontinents_byyear</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>gdp_billion<span class="op">=</span><span class="va">gdpPercap</span><span class="op">*</span><span class="va">pop</span><span class="op">/</span><span class="fl">10</span><span class="op">^</span><span class="fl">9</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>,<span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              sd_gdpPercap<span class="op">=</span><span class="fu">sd</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_pop<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              sd_pop<span class="op">=</span><span class="fu">sd</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              mean_gdp_billion<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span>,</span>
<span>              sd_gdp_billion<span class="op">=</span><span class="fu">sd</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="conectando-mutate-con-filtrado-lógico-ifelse">Conectando mutate con filtrado lógico: ifelse<a class="anchor" aria-label="anchor" href="#conectando-mutate-con-filtrado-l%C3%B3gico-ifelse"></a>
</h2>
<hr class="half-width">
<p>La creación de nuevas variables se puede conectar con una condición
lógica. Una simple combinación de <code>mutate</code> y
<code>ifelse</code> facilita el filtrado solo allí donde se necesita: en
el momento de crear algo nuevo. Esta combinación es fácil de leer y es
un modo rápido y potente de descartar ciertos datos (incluso sin cambiar
la dimensión conjunta del <strong>data frame</strong>) o para actualizar
valores dependiendo de la condición utilizada.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## manteniendo todos los datos pero "filtrando" según una determinada condición</span></span>
<span><span class="co"># calcular renta per cápita sólo para gente con una esperanza de vida por encima de 25</span></span>
<span><span class="va">gdp_pop_bycontinents_byyear_above25</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>gdp_billion <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">25</span>, <span class="va">gdpPercap</span> <span class="op">*</span> <span class="va">pop</span> <span class="op">/</span> <span class="fl">10</span><span class="op">^</span><span class="fl">9</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              sd_gdpPercap <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_pop <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              sd_pop <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              mean_gdp_billion <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span>,</span>
<span>              sd_gdp_billion <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## actualizando sólo si se cumple una determinada condición</span></span>
<span><span class="co"># para esperanzas de vida por encima de 40 años, el GDP que se espera en el futuro es escalado</span></span>
<span><span class="va">gdp_future_bycontinents_byyear_high_lifeExp</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>gdp_futureExpectation <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">40</span>, <span class="va">gdpPercap</span> <span class="op">*</span> <span class="fl">1.5</span>, <span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_gdpPercap_expected <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdp_futureExpectation</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="combinando-dplyr-y-ggplot2">Combinando <code>dplyr</code> y <code>ggplot2</code>
<a class="anchor" aria-label="anchor" href="#combinando-dplyr-y-ggplot2"></a>
</h2>
<hr class="half-width">
<p>En la función de creación de gráficas vimos cómo hacer una figura con
múltiples paneles añadiendo una capa de paneles separados (<strong>facet
panels</strong>). Aquí está el código que usamos (con algunos
comentarios extra):</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtener la primera letra de cada país</span></span>
<span><span class="va">starts.with</span> <span class="op">&lt;-</span> <span class="fu">substr</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span>, start <span class="op">=</span> <span class="fl">1</span>, stop <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># Filtrar países que empiezan con "A" o "Z"</span></span>
<span><span class="va">az.countries</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="va">starts.with</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"Z"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co"># Construir el gráfico</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">az.countries</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(data = az.countries, aes(x = year, y = lifeExp, color = continent)): could not find function "ggplot"</code></pre>
</div>
<p>Este código construye la gráfica correcta, pero también crea algunas
variables <code>starts.with</code> y <code>az.countries</code>) que
podemos no querer usar para nada más. Del mismo modo que usamos
<code>%&gt;%</code> para pasar datos con <strong>pipes</strong> a lo
largo de una cadena de funciones <code>dplyr</code>, podemos usarlo para
pasarle datos a <code>ggplot()</code>. Como <code>%&gt;%</code>
sustituye al primer argumento de una función, no necesitamos especificar
el argumento <code>data=</code> de la función <code>ggplot()</code>.
Combinando funciones de los paquetes <code>dplyr</code> y
<code>ggplot</code> podemos hacer la misma figura sin crear ninguna
nueva variable y sin modificar los datos.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>   <span class="co"># Get the start letter of each country</span></span>
<span>   <span class="fu">mutate</span><span class="op">(</span>startsWith <span class="op">=</span> <span class="fu">substr</span><span class="op">(</span><span class="va">country</span>, start <span class="op">=</span> <span class="fl">1</span>, stop <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="co"># Filter countries that start with "A" or "Z"</span></span>
<span>   <span class="fu">filter</span><span class="op">(</span><span class="va">startsWith</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"Z"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="co"># Make the plot</span></span>
<span>   <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(., aes(x = year, y = lifeExp, color = continent)): could not find function "ggplot"</code></pre>
</div>
<p>Las funciones del paquete <code>dplyr</code> también nos ayudan a
simplificar las cosas, por ejemplo, combinando los primeros dos
pasos:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="co"># Filter countries that start with "A" or "Z"</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="fu">substr</span><span class="op">(</span><span class="va">country</span>, start <span class="op">=</span> <span class="fl">1</span>, stop <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"Z"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Make the plot</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in ggplot(., aes(x = year, y = lifeExp, color = continent)): could not find function "ggplot"</code></pre>
</div>
<div id="reto-avanzado" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reto-avanzado" class="callout-inner">
<h3 class="callout-title">Reto Avanzado</h3>
<div class="callout-content">
<p>Calcula la esperanza de vida media en 2002 de dos países
seleccionados al azar para cada continente. Luego distribuye los nombres
de los continentes en orden inverso. <strong>Pista</strong>: Usa las
funciones <code>arrange()</code> y <code>sample_n()</code> del paquete
<code>dplyr</code>, tienen una sintaxis similar a las demás funciones
del paquete <code>dplyr</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución al Reto Avanzado
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_2countries_bycontinents</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">filter</span><span class="op">(</span><span class="va">year</span><span class="op">==</span><span class="fl">2002</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">sample_n</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">summarize</span><span class="op">(</span>mean_lifeExp<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="más-información">Más información<a class="anchor" aria-label="anchor" href="#m%C3%A1s-informaci%C3%B3n"></a>
</h2>
<hr class="half-width">
<ul>
<li><a href="https://r4ds.had.co.nz/" class="external-link">R for Data Science</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="external-link">Data
Wrangling Cheat sheet</a></li>
<li><a href="https://cran.rstudio.com/web/packages/dplyr/vignettes/dplyr.html" class="external-link">Introduction
to dplyr</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/data-wrangling-with-r-and-rstudio/" class="external-link">Data
wrangling with R and RStudio</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar el paquete <code>dplyr</code> para manipular data frames.</li>
<li>Usar <code>select()</code> para seleccionar variables de un data
frame.</li>
<li>Usar <code>filter()</code> para seleccionar datos basándose en los
valores.</li>
<li>Usar <code>group_by()</code> y <code>summarize()</code> para
trabajar con subconjuntos de datos.</li>
<li>Usar <code>mutate()</code> para crear nuevas variables.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-14-tidyr"><p>Content from <a href="14-tidyr.html">Manipulación de data frames usando tidyr</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/14-tidyr.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo cambiar el formato de los data frames?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Entender los conceptos de formatos de datos largo y ancho y poder
convertirlos al otro formato usando <code>tidyr</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Las investigadoras a menudo quieren manipular sus datos del formato
“ancho” al “largo”, o viceversa. El formato “largo” es donde:</p>
<ul>
<li>cada columna es una variable</li>
<li>cada fila es una observación</li>
</ul>
<p>En el formato “largo”, generalmente tienes una columna para la
variable observada y las otras columnas son variables de ID.</p>
<p>Para el formato “ancho”, cada fila es un tema, por ejemplo un lugar o
un paciente. Tendrás múltiples variables de observación, que contienen
el mismo tipo de datos, para cada tema. Estas observaciones pueden ser
repetidas a lo largo del tiempo, o puede ser la observación de múltiples
variables (o una mezcla de ambos). Para algunas aplicaciones, es
preferible el formato “ancho”. Sin embargo, muchas de las funciones de
<code>R</code> han sido diseñadas para datos de formato “largo”. Este
tutorial te ayudará a transformar tus datos de manera eficiente,
independientemente del formato original.</p>
<figure><img src="fig/14-tidyr-fig1.png" class="figure mx-auto d-block"></figure><p>Estos formatos de datos afectan principalmente a la legibilidad. Para
los humanos, el formato “ancho” es a menudo más intuitivo ya que podemos
ver más de los datos en la pantalla debido a su forma. Sin embargo, el
formato “largo” es más legible para las máquinas y está más cerca al
formateo de las bases de datos. Las variables de ID en nuestros marcos
de datos son similares a los campos en una base de datos y las variables
observadas son como los valores de la base de datos.</p>
<section><h2 class="section-heading" id="empecemos">Empecemos<a class="anchor" aria-label="anchor" href="#empecemos"></a>
</h2>
<hr class="half-width">
<p>Primero instala los paquetes necesarios, <code>tidyr</code> y
<code>dplyr</code>. Si aún no lo has hecho, puedes también instalar el
grupo de paquetes <code>tidyverse</code> que contiene varios paquetes
incluyendo <code>tidyr</code> y <code>dplyr</code>.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("tidyr")</span></span>
<span><span class="co">#install.packages("dplyr")</span></span></code></pre>
</div>
<p>Ahora carga los paquetes usando <strong>library</strong>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyr"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre>
</div>
<p>Primero, veamos la estructura <strong>structure</strong> del
<strong>data frame</strong> gapminder:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1704 obs. of  6 variables:
 $ country  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num  8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr  "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<div id="desafío-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío 1</h3>
<div class="callout-content">
<p>¿Crees que el data frame gapminder tiene un formato largo, ancho o
algo intermedio?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solución del Desafío 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>El data frame gapminder tiene un formato intermedio. No es
completamente largo porque tiene múltiples observaciones por cada
variable
(<code>pop</code>,<code>lifeExp</code>,<code>gdpPercap</code>).</p>
</div>
</div>
</div>
</div>
<p>A veces tenemos múltiples tipos de observaciones, como con el
<strong>data frame</strong> gapminder. Entonces tendremos formatos de
datos mixtos entre “largo” y “ancho”. Nosotros tenemos 3 “variables de
identificación” (<code>continente</code>,<code>país</code>,
<code>año</code>) y 3 “variables de observación” (<code>pop</code>,
<code>lifeExp</code>,<code>gdpPercap</code>). Generalmente, es
preferible que los datos estén en este formato intermedio en la mayoría
de los casos, a pesar de no tener TODAS las observaciones en una sola
columna. Esto es por que las 3 variables de observación tienen unidades
diferentes (y cada una corresponde a una columna con su propio tipo de
datos).</p>
<p>A menudo queremos hacer operaciones matemáticas con valores que usen
las mismas unidades, esto facilita el uso de funciones en R, que a
menudo se basan en vectores. Por ejemplo, si utilizamos el formato largo
y calculamos un promedio de todos los los valores de población
<code>pop</code>, esperanza de vida <code>lifeExp</code> y el PIB
<code>gdpPercap</code> este resultado no tendría sentido, ya que
devolvería una incongruencia de valores con 3 unidades incompatibles. La
solución es que primero manipulamos los datos agrupando (ver la lección
sobre <code>dplyr</code>), o cambiamos la estructura del marco de datos.
<strong>Nota:</strong> Algunas funciones de gráficos en R (por ejemplo
con <code>ggplot2</code>) realmente funcionan mejor con los datos de
formato ancho.</p>
</section><section><h2 class="section-heading" id="del-formato-ancho-al-largo-con-gather">Del formato ancho al largo con gather()<a class="anchor" aria-label="anchor" href="#del-formato-ancho-al-largo-con-gather"></a>
</h2>
<hr class="half-width">
<p>Hasta ahora, hemos estado utilizando el conjunto de datos gapminder
original muy bien formateado, pero los datos “reales” (es decir,
nuestros propios datos de investigación) nunca estarán tan bien
organizados. Veamos un ejemplo con la versión de formato ancho del
conjunto de datos gapminder.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Descarga la versión ancha de los datos de gapminder desde [aquí] (<a href="https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/gh-pages/_episodes_rmd/data/gapminder_wide.csv" class="external-link">https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/gh-pages/_episodes_rmd/data/gapminder_wide.csv</a>)
y guarda el archivo csv en tu carpeta de datos.</p>
</div>
</div>
</div>
<p>Cargaremos el archivo de datos para verlo. Nota: no queremos que las
columnas de caracteres sean convertidas a factores, por lo que usamos el
argumento <code>stringsAsFactors = FALSE</code> para para deshabilitar
eso, más información en la ayuda <code>?read.csv ()</code>.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wide</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder_wide.csv"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_wide</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	142 obs. of  38 variables:
 $ continent     : chr  "Africa" "Africa" "Africa" "Africa" ...
 $ country       : chr  "Algeria" "Angola" "Benin" "Botswana" ...
 $ gdpPercap_1952: num  2449 3521 1063 851 543 ...
 $ gdpPercap_1957: num  3014 3828 960 918 617 ...
 $ gdpPercap_1962: num  2551 4269 949 984 723 ...
 $ gdpPercap_1967: num  3247 5523 1036 1215 795 ...
 $ gdpPercap_1972: num  4183 5473 1086 2264 855 ...
 $ gdpPercap_1977: num  4910 3009 1029 3215 743 ...
 $ gdpPercap_1982: num  5745 2757 1278 4551 807 ...
 $ gdpPercap_1987: num  5681 2430 1226 6206 912 ...
 $ gdpPercap_1992: num  5023 2628 1191 7954 932 ...
 $ gdpPercap_1997: num  4797 2277 1233 8647 946 ...
 $ gdpPercap_2002: num  5288 2773 1373 11004 1038 ...
 $ gdpPercap_2007: num  6223 4797 1441 12570 1217 ...
 $ lifeExp_1952  : num  43.1 30 38.2 47.6 32 ...
 $ lifeExp_1957  : num  45.7 32 40.4 49.6 34.9 ...
 $ lifeExp_1962  : num  48.3 34 42.6 51.5 37.8 ...
 $ lifeExp_1967  : num  51.4 36 44.9 53.3 40.7 ...
 $ lifeExp_1972  : num  54.5 37.9 47 56 43.6 ...
 $ lifeExp_1977  : num  58 39.5 49.2 59.3 46.1 ...
 $ lifeExp_1982  : num  61.4 39.9 50.9 61.5 48.1 ...
 $ lifeExp_1987  : num  65.8 39.9 52.3 63.6 49.6 ...
 $ lifeExp_1992  : num  67.7 40.6 53.9 62.7 50.3 ...
 $ lifeExp_1997  : num  69.2 41 54.8 52.6 50.3 ...
 $ lifeExp_2002  : num  71 41 54.4 46.6 50.6 ...
 $ lifeExp_2007  : num  72.3 42.7 56.7 50.7 52.3 ...
 $ pop_1952      : num  9279525 4232095 1738315 442308 4469979 ...
 $ pop_1957      : num  10270856 4561361 1925173 474639 4713416 ...
 $ pop_1962      : num  11000948 4826015 2151895 512764 4919632 ...
 $ pop_1967      : num  12760499 5247469 2427334 553541 5127935 ...
 $ pop_1972      : num  14760787 5894858 2761407 619351 5433886 ...
 $ pop_1977      : num  17152804 6162675 3168267 781472 5889574 ...
 $ pop_1982      : num  20033753 7016384 3641603 970347 6634596 ...
 $ pop_1987      : num  23254956 7874230 4243788 1151184 7586551 ...
 $ pop_1992      : num  26298373 8735988 4981671 1342614 8878303 ...
 $ pop_1997      : num  29072015 9875024 6066080 1536536 10352843 ...
 $ pop_2002      : int  31287142 10866106 7026113 1630347 12251209 7021078 15929988 4048013 8835739 614382 ...
 $ pop_2007      : int  33333216 12420476 8078314 1639131 14326203 8390505 17696293 4369038 10238807 710960 ...</code></pre>
</div>
<figure><img src="fig/14-tidyr-fig2.png" class="figure mx-auto d-block"></figure><p>El primer paso es formatear los datos de ancho a largo. Usando el
paquete <code>tidyr</code> y la función <code>gather()</code> podemos
juntar las variables de observación en una sola variable.</p>
<figure><img src="fig/14-tidyr-fig3.png" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">&lt;-</span> <span class="va">gap_wide</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">gather</span><span class="op">(</span><span class="va">obstype_year</span>, <span class="va">obs_values</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">"pop"</span><span class="op">)</span>,</span>
<span>           <span class="fu">starts_with</span><span class="op">(</span><span class="st">"lifeExp"</span><span class="op">)</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">"gdpPercap"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_long</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	5112 obs. of  4 variables:
 $ continent   : chr  "Africa" "Africa" "Africa" "Africa" ...
 $ country     : chr  "Algeria" "Angola" "Benin" "Botswana" ...
 $ obstype_year: chr  "pop_1952" "pop_1952" "pop_1952" "pop_1952" ...
 $ obs_values  : num  9279525 4232095 1738315 442308 4469979 ...</code></pre>
</div>
<p>Aquí hemos utilizado la sintaxis con <strong>pipes</strong> (%&gt;%)
igual a como lo que estábamos usando en el lección anterior con
<code>dplyr</code>. De hecho, estos son compatibles y puedes usar una
mezcla de las funciones <code>tidyr</code> y <code>dplyr</code>.</p>
<p>Dentro de <code>gather()</code>, primero nombramos la nueva columna
para la nueva variable de ID (<code>obstype_year</code>), el nombre de
la nueva variable de observación conjunta (<code>obs_value</code>),
luego los nombres de la antigua variable de observación. Nosotros
podríamos tener escritas todas las variables de observación, pero como
lo hacíamos en la función <code>select()</code> (ver la lección de
<code>dplyr</code>), podemos usar el argumento
<code>starts_with()</code> para seleccionar todas las variables que
comiencen con la cadena de caracteres deseada. Reunir o
<strong>gather</strong> también permite la sintaxis alternativa del uso
del símbolo <code>-</code> para identificar qué variables queremos
excluir (por ejemplo, las variables de identificación o
<strong>ID</strong>)</p>
<figure><img src="fig/14-tidyr-fig4.png" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">&lt;-</span> <span class="va">gap_wide</span> <span class="op">%&gt;%</span> <span class="fu">gather</span><span class="op">(</span><span class="va">obstype_year</span>, <span class="va">obs_values</span>, <span class="op">-</span><span class="va">continent</span>, <span class="op">-</span><span class="va">country</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_long</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	5112 obs. of  4 variables:
 $ continent   : chr  "Africa" "Africa" "Africa" "Africa" ...
 $ country     : chr  "Algeria" "Angola" "Benin" "Botswana" ...
 $ obstype_year: chr  "gdpPercap_1952" "gdpPercap_1952" "gdpPercap_1952" "gdpPercap_1952" ...
 $ obs_values  : num  2449 3521 1063 851 543 ...</code></pre>
</div>
<p>Eso puede parecer trivial con este <strong>data frame</strong> en
particular, pero a veces tienes una variable de identificación
<strong>ID</strong> y 40 variables de observación, con varios nombres de
variables irregulares. La flexibilidad que nos da <code>tidyr</code> ¡es
un gran ahorro de tiempo!</p>
<p>Ahora, <code>obstype_year</code> en realidad contiene información en
dos partes, la observación tipo (<code>pop</code>,<code>lifeExp</code>,
o <code>gdpPercap</code>) y el año <code>year</code>. Podemos usar la
función <code>separate()</code> para dividir las cadenas de caracteres
en múltiples variables.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span> <span class="fu">separate</span><span class="op">(</span><span class="va">obstype_year</span>, into <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"obs_type"</span>, <span class="st">"year"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="va">gap_long</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu">as.integer</span><span class="op">(</span><span class="va">gap_long</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span></code></pre>
</div>
<div id="desafío-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío 2</h3>
<div class="callout-content">
<p>Usando el <strong>data frame</strong> <code>gap_long</code>, calcula
el promedio de esperanza de vida, población, y PIB por cada continente.
<strong>Ayuda:</strong> usa <code>group_by()</code> y
<code>summarize()</code> que son las funciones de <code>dplyr</code> que
aprendiste en el episodio anterior.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solución al Desafío 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">obs_type</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>means <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">obs_values</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 15 × 3
# Groups:   continent [5]
   continent obs_type       means
   &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;
 1 Africa    gdpPercap     2194.
 2 Africa    lifeExp         48.9
 3 Africa    pop        9916003.
 4 Americas  gdpPercap     7136.
 5 Americas  lifeExp         64.7
 6 Americas  pop       24504795.
 7 Asia      gdpPercap     7902.
 8 Asia      lifeExp         60.1
 9 Asia      pop       77038722.
10 Europe    gdpPercap    14469.
11 Europe    lifeExp         71.9
12 Europe    pop       17169765.
13 Oceania   gdpPercap    18622.
14 Oceania   lifeExp         74.3
15 Oceania   pop        8874672. </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="del-formato-largo-a-intermedio-usando-spread">Del formato largo a intermedio usando spread()<a class="anchor" aria-label="anchor" href="#del-formato-largo-a-intermedio-usando-spread"></a>
</h2>
<hr class="half-width">
<p>Siempre es bueno detenerse y verificar el trabajo. Entonces, usemos
el opuesto de <code>gather()</code> para separar nuestras variables de
observación con la función <code>spread()</code>. Para expandir nuestro
objeto <code>gap_long()</code> al formato intermedio original o al
formato ancho usaremos esta nueva función. Comencemos con el formato
intermedio.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_normal</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span> <span class="fu">spread</span><span class="op">(</span><span class="va">obs_type</span>,<span class="va">obs_values</span><span class="op">)</span></span>
<span><span class="fu">dim</span><span class="op">(</span><span class="va">gap_normal</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704    6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704    6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">gap_normal</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "continent" "country"   "year"      "gdpPercap" "lifeExp"   "pop"      </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "country"   "year"      "pop"       "continent" "lifeExp"   "gdpPercap"</code></pre>
</div>
<p>Ahora tenemos un marco de datos intermedio <code>gap_normal</code>
con las mismas dimensiones que el <code>gapminder</code> original, pero
el orden de las variables es diferente. Arreglemos eso antes de
comprobar si son iguales con la función <code>all.equal()</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_normal</span> <span class="op">&lt;-</span> <span class="va">gap_normal</span><span class="op">[</span>,<span class="fu">names</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu">all.equal</span><span class="op">(</span><span class="va">gap_normal</span>,<span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Component \"country\": 1704 string mismatches"
[2] "Component \"pop\": Mean relative difference: 1.634504"
[3] "Component \"continent\": 1212 string mismatches"
[4] "Component \"lifeExp\": Mean relative difference: 0.203822"
[5] "Component \"gdpPercap\": Mean relative difference: 1.162302"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gap_normal</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  country year      pop continent lifeExp gdpPercap
1 Algeria 1952  9279525    Africa  43.077  2449.008
2 Algeria 1957 10270856    Africa  45.685  3013.976
3 Algeria 1962 11000948    Africa  48.303  2550.817
4 Algeria 1967 12760499    Africa  51.407  3246.992
5 Algeria 1972 14760787    Africa  54.518  4182.664
6 Algeria 1977 17152804    Africa  58.014  4910.417</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007
4 Afghanistan 1967 11537966      Asia  34.020  836.1971
5 Afghanistan 1972 13079460      Asia  36.088  739.9811
6 Afghanistan 1977 14880372      Asia  38.438  786.1134</code></pre>
</div>
<p>Ya casi, el <strong>data frame</strong> original está ordenado por
<code>country</code>, <code>continent</code>, y <code>year</code>.
Entonces probemos con la función <code>arrange()</code>.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_normal</span> <span class="op">&lt;-</span> <span class="va">gap_normal</span> <span class="op">%&gt;%</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">country</span>, <span class="va">continent</span>, <span class="va">year</span><span class="op">)</span></span>
<span><span class="fu">all.equal</span><span class="op">(</span><span class="va">gap_normal</span>, <span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<p>¡Muy bien! Pasamos del formato largo al intermedio y no hemos tenido
ningún error en nuestro código.</p>
<p>Ahora pasemos a convertir del formato largo al ancho. En el formato
ancho, nosotros mantendremos el país y el continente como variables de
ID y esto va expandir las observaciones en las tres métricas
(<code>pop</code>,<code>lifeExp</code>, <code>gdpPercap</code>) y año
(<code>year</code>). Primero nosotros necesitamos crear etiquetas
apropiadas para todas nuestras nuevas variables (combinaciones de
métricas*año) y también necesitamos unificar nuestras variables de
<strong>ID</strong> para simplificar el proceso de definir el nuevo
objeto <code>gap_wide</code>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_temp</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span> <span class="fu">unite</span><span class="op">(</span><span class="va">var_ID</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_temp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	5112 obs. of  4 variables:
 $ var_ID    : chr  "Africa_Algeria" "Africa_Angola" "Africa_Benin" "Africa_Botswana" ...
 $ obs_type  : chr  "gdpPercap" "gdpPercap" "gdpPercap" "gdpPercap" ...
 $ year      : int  1952 1952 1952 1952 1952 1952 1952 1952 1952 1952 ...
 $ obs_values: num  2449 3521 1063 851 543 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_temp</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">ID_var</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_temp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	5112 obs. of  3 variables:
 $ ID_var    : chr  "Africa_Algeria" "Africa_Angola" "Africa_Benin" "Africa_Botswana" ...
 $ var_names : chr  "gdpPercap_1952" "gdpPercap_1952" "gdpPercap_1952" "gdpPercap_1952" ...
 $ obs_values: num  2449 3521 1063 851 543 ...</code></pre>
</div>
<p>Usando la función <code>unite()</code> tenemos ahora un único
<strong>ID</strong> que es la combinación de <code>continent</code>,
<code>country</code>, y así definimos nuestras nuevas variables. Ahora
podemos usar ese resultado con la función <code>spread()</code>.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wide_new</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">ID_var</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>,sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">spread</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_values</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_wide_new</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	142 obs. of  37 variables:
 $ ID_var        : chr  "Africa_Algeria" "Africa_Angola" "Africa_Benin" "Africa_Botswana" ...
 $ gdpPercap_1952: num  2449 3521 1063 851 543 ...
 $ gdpPercap_1957: num  3014 3828 960 918 617 ...
 $ gdpPercap_1962: num  2551 4269 949 984 723 ...
 $ gdpPercap_1967: num  3247 5523 1036 1215 795 ...
 $ gdpPercap_1972: num  4183 5473 1086 2264 855 ...
 $ gdpPercap_1977: num  4910 3009 1029 3215 743 ...
 $ gdpPercap_1982: num  5745 2757 1278 4551 807 ...
 $ gdpPercap_1987: num  5681 2430 1226 6206 912 ...
 $ gdpPercap_1992: num  5023 2628 1191 7954 932 ...
 $ gdpPercap_1997: num  4797 2277 1233 8647 946 ...
 $ gdpPercap_2002: num  5288 2773 1373 11004 1038 ...
 $ gdpPercap_2007: num  6223 4797 1441 12570 1217 ...
 $ lifeExp_1952  : num  43.1 30 38.2 47.6 32 ...
 $ lifeExp_1957  : num  45.7 32 40.4 49.6 34.9 ...
 $ lifeExp_1962  : num  48.3 34 42.6 51.5 37.8 ...
 $ lifeExp_1967  : num  51.4 36 44.9 53.3 40.7 ...
 $ lifeExp_1972  : num  54.5 37.9 47 56 43.6 ...
 $ lifeExp_1977  : num  58 39.5 49.2 59.3 46.1 ...
 $ lifeExp_1982  : num  61.4 39.9 50.9 61.5 48.1 ...
 $ lifeExp_1987  : num  65.8 39.9 52.3 63.6 49.6 ...
 $ lifeExp_1992  : num  67.7 40.6 53.9 62.7 50.3 ...
 $ lifeExp_1997  : num  69.2 41 54.8 52.6 50.3 ...
 $ lifeExp_2002  : num  71 41 54.4 46.6 50.6 ...
 $ lifeExp_2007  : num  72.3 42.7 56.7 50.7 52.3 ...
 $ pop_1952      : num  9279525 4232095 1738315 442308 4469979 ...
 $ pop_1957      : num  10270856 4561361 1925173 474639 4713416 ...
 $ pop_1962      : num  11000948 4826015 2151895 512764 4919632 ...
 $ pop_1967      : num  12760499 5247469 2427334 553541 5127935 ...
 $ pop_1972      : num  14760787 5894858 2761407 619351 5433886 ...
 $ pop_1977      : num  17152804 6162675 3168267 781472 5889574 ...
 $ pop_1982      : num  20033753 7016384 3641603 970347 6634596 ...
 $ pop_1987      : num  23254956 7874230 4243788 1151184 7586551 ...
 $ pop_1992      : num  26298373 8735988 4981671 1342614 8878303 ...
 $ pop_1997      : num  29072015 9875024 6066080 1536536 10352843 ...
 $ pop_2002      : num  31287142 10866106 7026113 1630347 12251209 ...
 $ pop_2007      : num  33333216 12420476 8078314 1639131 14326203 ...</code></pre>
</div>
<div id="desafío-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío 3</h3>
<div class="callout-content">
<p>Crea un formato de datos <code>gap_super_wide</code> mediante la
distribución por países, año y las tres métricas. <strong>Ayuda</strong>
este nuevo <strong>data frame</strong> sólo debe tener cinco filas.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solución para el desafío 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_super_wide</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">spread</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_values</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ahora tenemos un gran <strong>data frame</strong> con formato
‘ancho’, pero el <code>ID_var</code> podría ser más mejor, hay que
separarlos en dos variables con <code>separate()</code></p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wide_betterID</span> <span class="op">&lt;-</span> <span class="fu">separate</span><span class="op">(</span><span class="va">gap_wide_new</span>, <span class="va">ID_var</span>, <span class="fu">c</span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"country"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="va">gap_wide_betterID</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">ID_var</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">spread</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_values</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">separate</span><span class="op">(</span><span class="va">ID_var</span>, <span class="fu">c</span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"country"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_wide_betterID</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	142 obs. of  38 variables:
 $ continent     : chr  "Africa" "Africa" "Africa" "Africa" ...
 $ country       : chr  "Algeria" "Angola" "Benin" "Botswana" ...
 $ gdpPercap_1952: num  2449 3521 1063 851 543 ...
 $ gdpPercap_1957: num  3014 3828 960 918 617 ...
 $ gdpPercap_1962: num  2551 4269 949 984 723 ...
 $ gdpPercap_1967: num  3247 5523 1036 1215 795 ...
 $ gdpPercap_1972: num  4183 5473 1086 2264 855 ...
 $ gdpPercap_1977: num  4910 3009 1029 3215 743 ...
 $ gdpPercap_1982: num  5745 2757 1278 4551 807 ...
 $ gdpPercap_1987: num  5681 2430 1226 6206 912 ...
 $ gdpPercap_1992: num  5023 2628 1191 7954 932 ...
 $ gdpPercap_1997: num  4797 2277 1233 8647 946 ...
 $ gdpPercap_2002: num  5288 2773 1373 11004 1038 ...
 $ gdpPercap_2007: num  6223 4797 1441 12570 1217 ...
 $ lifeExp_1952  : num  43.1 30 38.2 47.6 32 ...
 $ lifeExp_1957  : num  45.7 32 40.4 49.6 34.9 ...
 $ lifeExp_1962  : num  48.3 34 42.6 51.5 37.8 ...
 $ lifeExp_1967  : num  51.4 36 44.9 53.3 40.7 ...
 $ lifeExp_1972  : num  54.5 37.9 47 56 43.6 ...
 $ lifeExp_1977  : num  58 39.5 49.2 59.3 46.1 ...
 $ lifeExp_1982  : num  61.4 39.9 50.9 61.5 48.1 ...
 $ lifeExp_1987  : num  65.8 39.9 52.3 63.6 49.6 ...
 $ lifeExp_1992  : num  67.7 40.6 53.9 62.7 50.3 ...
 $ lifeExp_1997  : num  69.2 41 54.8 52.6 50.3 ...
 $ lifeExp_2002  : num  71 41 54.4 46.6 50.6 ...
 $ lifeExp_2007  : num  72.3 42.7 56.7 50.7 52.3 ...
 $ pop_1952      : num  9279525 4232095 1738315 442308 4469979 ...
 $ pop_1957      : num  10270856 4561361 1925173 474639 4713416 ...
 $ pop_1962      : num  11000948 4826015 2151895 512764 4919632 ...
 $ pop_1967      : num  12760499 5247469 2427334 553541 5127935 ...
 $ pop_1972      : num  14760787 5894858 2761407 619351 5433886 ...
 $ pop_1977      : num  17152804 6162675 3168267 781472 5889574 ...
 $ pop_1982      : num  20033753 7016384 3641603 970347 6634596 ...
 $ pop_1987      : num  23254956 7874230 4243788 1151184 7586551 ...
 $ pop_1992      : num  26298373 8735988 4981671 1342614 8878303 ...
 $ pop_1997      : num  29072015 9875024 6066080 1536536 10352843 ...
 $ pop_2002      : num  31287142 10866106 7026113 1630347 12251209 ...
 $ pop_2007      : num  33333216 12420476 8078314 1639131 14326203 ...</code></pre>
</div>
<p>¡Muy bien hiciste el cambio de formato de ida y vuelta!</p>
</section><section><h2 class="section-heading" id="otros-recursos-geniales">Otros recursos geniales<a class="anchor" aria-label="anchor" href="#otros-recursos-geniales"></a>
</h2>
<hr class="half-width">
<ul>
<li>[R para Ciencia de datos] (r4ds.had.co.nz)</li>
<li>[Hoja de trucos para la conversión de datos] (<a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="external-link">https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf</a>)</li>
<li>[Introducción a tidyr] (<a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="external-link">https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html</a>)</li>
<li>[Manipulación de datos con R y RStudio] (<a href="https://www.rstudio.com/resources/webinars/data-wrangling-with-r-and-rstudio/" class="external-link">https://www.rstudio.com/resources/webinars/data-wrangling-with-r-and-rstudio/</a>)</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Usar el paquete <code>tidyr</code> para cambiar el diseño de los
data frames.</li>
<li>Usar <code>gather()</code> para invertir del formato ancho al
formato largo.</li>
<li>Usar <code>spread()</code> para invertir del formato largo al
formato ancho.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-15-knitr-markdown"><p>Content from <a href="15-knitr-markdown.html">Produciendo informes con knitr</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/15-knitr-markdown.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo integrar programas e informes?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Valor de informes reproducibles</li>
<li>Conceptos básicos de <strong>Markdown</strong>
</li>
<li>Fragmentos de código en <strong>R</strong>
</li>
<li>Opciones de fragmentos</li>
<li>Código <strong>R</strong> en línea</li>
<li>Otros formatos de salida</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="informes-de-análisis-de-datos">Informes de análisis de datos<a class="anchor" aria-label="anchor" href="#informes-de-an%C3%A1lisis-de-datos"></a>
</h2>
<hr class="half-width">
<p>Los analistas de datos tienden a escribir muchos informes,
describiendo sus análisis y resultados, para sus colaboradores o para
documentar su trabajo para referencia futura.</p>
<p>Es común que muchos nuevos usuarios comiencen escribiendo una rutina
<strong>R</strong> con todos sus trabajos. Luego simplemente envien el
análisis por un correo electrónico a su colaborador, describiendo los
resultados y adjuntando el <strong>script</strong> y varios gráficos.
Éste método puede ser problemático, ya que al discutir los resultados, a
menudo hay confusión sobre qué gráfico corresponde a cuál resultado.</p>
<p>Escribir informes formales, con <strong>Word</strong> o
<strong>LaTeX</strong>, puede simplificar esto, al incorporar el
análisis y los resultados a un documento único. Pero arreglando el
formato del documento para hacer que las figuras se vean bien y corregir
saltos de página rebeldes puede ser tedioso y llevar mucho tiempo.</p>
<p>Crear una página <strong>web</strong> (como un archivo
<strong>html</strong>) usando <strong>R markdown</strong> hace que el
todo sea mas sencillo. El reporte puede ser muy largo, así que figuras
altas que no cabrían normalmente en una página, pueden incluirse en
tamaño original, ya que el lector las puede ver simplemente desplazando
la página. Dar formato es simple y fácil de modificar, por lo que
podemos dedicar más tiempo a nuestros análisis y no a la redacción de
informes.</p>
</section><section><h2 class="section-heading" id="programación-literaria">Programación literaria<a class="anchor" aria-label="anchor" href="#programaci%C3%B3n-literaria"></a>
</h2>
<hr class="half-width">
<p>Idealmente, dichos informes de análisis son documentos
<em>reproducibles</em>: Si se descubre un error, o si se agregan algunos
temas adicionales a los datos, puedes volver a compilar el informe y
obtener los resultados, nuevo o corregido (en lugar de tener que
reconstruir figuras, pegarlas en un documento de <strong>Word</strong> y
luego editar manualmente varios resultados detallados).</p>
<p>La herramienta clave para <em>R</em> es <a href="https://yihui.name/knitr/" class="external-link">knitr</a>, que te permite crear un
documento que es una mezcla de texto y algunos fragmentos de código.
Cuando el documento es procesado por <strong>knitr</strong>, los
fragmentos del código <strong>R</strong> serán ejecutados, y los
gráficos u otros resultados serán insertados.</p>
<p>Este tipo de idea ha sido llamado “programación literaria”.</p>
<p><strong>knitr</strong> te permite mezclar básicamente cualquier tipo
de texto con cualquier tipo de código, pero te recomendamos que uses
<strong>R Markdown</strong>, que mezcla <strong>Markdown</strong> con
<strong>R</strong>. <strong>Markdown</strong> es un ligero lenguaje de
marcado para crear páginas <strong>web</strong> y también otros
formatos.</p>
</section><section><h2 class="section-heading" id="creando-un-archivo-r-markdown">Creando un archivo <strong>R Markdown</strong>
<a class="anchor" aria-label="anchor" href="#creando-un-archivo-r-markdown"></a>
</h2>
<hr class="half-width">
<p>Dentro de <strong>R Studio</strong>, haz clic en Archivo; Nuevo
archivo; <strong>R Markdown</strong> y obtendrás un cuadro de diálogo
parecido a éste:</p>
<figure><img src="fig/New_R_Markdown.png" class="figure mx-auto d-block"></figure><p>Puedes mantener el valor predeterminado (salida
<strong>HTML</strong>), pero dale un título.</p>
</section><section><h2 class="section-heading" id="componentes-básicos-de-r-markdown">Componentes básicos de <strong>R Markdown</strong>
<a class="anchor" aria-label="anchor" href="#componentes-b%C3%A1sicos-de-r-markdown"></a>
</h2>
<hr class="half-width">
<p>El fragmento inicial de texto contiene instrucciones para
<strong>R</strong>: le das un título, autor y fecha, y díle que va a
querer producir una salida <strong>html</strong> (en otras palabras, una
página <strong>web</strong>).</p>
<pre><code>---
title: "Documento inicial **R Markdown**"
author: "Karl Broman"
date: "23 de Abril de 2015"
output: html_document
---</code></pre>
<p>Puedes eliminar cualquiera de esos campos si no los quieres
incluidos. Las comillas dobles no son estrictamente <em>necesarias</em>
en este caso. Pero en su mayoría son necesarias si deseas incluir dos
puntos en el título.</p>
<p><strong>RStudio</strong> crea el documento con un texto de ejemplo
para ayudarte a empezar. Observa a continuación que hay fragmentos
como</p>
<pre>
```{r}
summary(cars)
```
</pre>
<p>Estos son fragmentos de código <strong>R</strong> que serán
ejecutados por <strong>knitr</strong> y reemplazados por sus resultados.
Más sobre esto más tarde.</p>
<p>También fíjate en la dirección <strong>web</strong> que se coloca
entre corchetes angulares (<code>&lt;&gt;</code>) así como los
asteriscos dobles en <code>**Knit**</code>. Esto es <a href="https://daringfireball.net/projects/markdown/syntax" class="external-link">Markdown</a>.</p>
</section><section><h2 class="section-heading" id="markdown">
<strong>Markdown</strong><a class="anchor" aria-label="anchor" href="#markdown"></a>
</h2>
<hr class="half-width">
<p><strong>Markdown</strong> es un sistema para escribir páginas
<strong>web</strong> marcando el texto tanto como lo haría en un correo
electrónico en lugar de escribir código <strong>html</strong>. El texto
marcado es <em>convertido</em> a <strong>html</strong>, reemplazando las
marcas con el código <strong>HTML</strong>.</p>
<p>Por ahora, borremos todas las cosas que están ahí y escribamos un
poco de <strong>markdown</strong>.</p>
<p>Haces las cosas en <strong>negrita</strong> usando dos asteriscos,
como esto: <code>** negrita **</code>, y haces cosas <em>italicas</em>
usando guiones bajos, como esto: <code>_italics_</code>.</p>
<p>Puedes hacer una lista con viñetas escribiendo una lista con guiones
o asteriscos, como esta:</p>
<pre><code>* negrita con doble asterisco
* itálica con guiones bajos
* tipografía estilo código fuente con acento inverso/grave</code></pre>
<p>o así:</p>
<pre><code>- negrita con doble asterisco
- itálica con guiones bajos
- tipografía estilo código fuente con acento inverso/grave</code></pre>
<p>Cada uno aparecerá como:</p>
<ul>
<li>negrita con doble asterisco</li>
<li>itálica con guiones bajos</li>
<li>tipografía estilo código fuente con acento inverso/grave</li>
</ul>
<p>Puedes usar el método que prefieras (guiones o asteriscos), pero
<em>se consistente</em>. Esto mantiene la legibilidad del código.</p>
<p>Puedes hacer una lista numerada simplemente usando números. Puedes
incluso usar el mismo número una y otra vez si lo deseas:</p>
<pre><code>1. negrita con doble asterisco
1. itálica con guiones bajos
1. tipografía estilo código fuente con acento inverso/grave</code></pre>
<p>Esto aparecerá como:</p>
<ol style="list-style-type: decimal">
<li>negrita con doble asterisco</li>
<li>itálica con guiones bajos</li>
<li>tipografía estilo código fuente con acento inverso/grave</li>
</ol>
<p>Puedes crear encabezados de sección de diferentes tamaños iniciando
una línea con un cierto número de símbolos <code>#</code>:</p>
<pre><code><span><span class="co"># Título</span></span>
<span><span class="co">## Sección principal</span></span>
<span><span class="co">### Subsección</span></span>
<span><span class="co">#### Sub-subsección</span></span></code></pre>
<p>Tú <em>compilas</em> el documento <strong>R Markdown</strong> a una
página <strong>web</strong> <strong>html</strong> haciendo clic en el
<strong>“Knit HTML”</strong> en la esquina superior izquierda. Y ten en
cuenta el pequeño signo de interrogación junto a él; haz clic en el
signo de interrogación y obtendrá un <strong>“Markdown Quick
Reference”</strong> (con la sintaxis <strong>Markdown</strong>) así como
para la documentación de <strong>RStudio</strong> en <strong>R
Markdown</strong>.</p>
<div id="desafío" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío" class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Crea un nuevo documento <strong>R Markdown</strong>. Elimina todos
los fragmentos de código <strong>R</strong> y escribe un poco de
<strong>Markdown</strong> (algunas secciones, algunos textos en itálica,
y una lista de ítemes).</p>
<p>Convierte el documento a una página <strong>web</strong>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="un-poco-más-de-markdown">Un poco más de <strong>Markdown</strong>
<a class="anchor" aria-label="anchor" href="#un-poco-m%C3%A1s-de-markdown"></a>
</h2>
<hr class="half-width">
<p>Puedes hacer un hipervínculo como éste:
<code>[text to show](http://the-web-page.com)</code>.</p>
<p>Puedes incluir un archivo de imagen como éste:
<code>![caption](http://url/for/file)</code></p>
<p>Puedes hacer subíndices (por ejemplo, F<del>2</del>) con
<code>F~2</code> y superíndices (p. F<sup>2</sup>) con
<code>F^2^</code>.</p>
<p>Si sabes cómo escribir ecuaciones en [LaTeX] (<a href="https://www.latex-project.org/" class="external-link">http://www.latex-project.org/</a>),
te alegrará saber que puedes usar <code>$ $</code> y <code>$$ $$</code>
para insertar ecuaciones matemáticas, como <code>$E = mc^2$</code> y</p>
<pre><code>$$y = \mu + \sum_{i=1}^p \beta_i x_i + \epsilon$$</code></pre>
</section><section><h2 class="section-heading" id="fragmentos-de-código-r">Fragmentos de código <strong>R</strong>
<a class="anchor" aria-label="anchor" href="#fragmentos-de-c%C3%B3digo-r"></a>
</h2>
<hr class="half-width">
<p><strong>Markdown</strong> es interesante y útil, pero el poder real
proviene de la mezcla entre <strong>markdown</strong> y fragmentos de
código <strong>R</strong>. Esto es <strong>R Markdown</strong>. Cuando
procesado, el código <strong>R</strong> se ejecutará; si producen
figuras, las figuras se insertarán en el documento final.</p>
<p>Los fragmentos del código principal se ven así:</p>
<pre>
```{r load_data}
gapminder
<p>Es decir, coloca un fragmento de código <strong>R</strong> entre
<code>```{r chunk_name}</code> y <code>```</code>. Es una buena idea
darle a cada fragmento un nombre, ya que te ayudarán a corregir los
errores y, si alugnos gráficos son producidos, los nombres de archivo
estarán basados en el nombre del fragmento de código que los
produjo.</p>
<div id="desafío-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-1" class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Agrega fragmentos de código para</p>
<ul>
<li>Cargar el paquete <strong>ggplot2</strong>
</li>
<li>Leer los datos del <strong>gapminder</strong>
</li>
<li>Crear un gráfico</li>
</ul>
</div>
</div>
</div>
</pre></section><section><h2 class="section-heading" id="cómo-se-compilan-las-cosas">Cómo se compilan las cosas<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-se-compilan-las-cosas"></a>
</h2>
<hr class="half-width">
<p>Cuando presionas el botón <strong>“Knit HTML”</strong>, el documento
<strong>R Markdown</strong> es procesado por <a href="https://yihui.name/knitr" class="external-link">knitr</a> y un documento
<strong>Markdown</strong> simple es producido (así como, potencialmente,
un conjunto de archivos de figuras): el código <strong>R</strong> es
ejecutado y reemplazado por ambas la entrada y la salida; si las figuras
son producidas, se incluyen enlaces a esas figuras.</p>
<p>Los documentos <strong>Markdown</strong> y figura son entones
procesados por la herramienta <a href="https://pandoc.org/" class="external-link">pandoc</a>,
que convierte el archivo <strong>Markdown</strong> en un archivo
<strong>html</strong>, con las figuras embebidas.</p>
<figure><img src="fig/15-knitr-markdown-rendered-rmd_to_html_fig-1.png" style="display: block; margin: auto auto auto 0;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="opciones-de-fragmento">Opciones de fragmento<a class="anchor" aria-label="anchor" href="#opciones-de-fragmento"></a>
</h2>
<hr class="half-width">
<p>Hay una variedad de opciones quen afectan la forma en que los
fragmentos de código son tratado</p>
<ul>
<li>Usa <code>echo=FALSE</code> para evitar que se muestre el código en
sí.</li>
<li>Usa <code>results="hide"</code> para evitar que se impriman los
resultados.</li>
<li>Usa <code>eval=FALSE</code> para tener el código mostrado pero no
evaluado.</li>
<li>Usa <code>warning=FALSE</code> y <code>message=FALSE</code> para
ocultar cualquier advertencia o    mensajes producidos</li>
<li>Usa <code>fig.height</code> y <code>fig.width</code> para controlar
el tamaño de las figuras    producidas (en pulgadas).</li>
</ul>
<p>Entonces podrías escribir:</p>
<pre>
```{r load_libraries, echo=FALSE, message=FALSE}
library("dplyr")
library("ggplot2")
```
</pre>
<p>A menudo habrá opciones particulares que querrás usar repetidamente;
para esto, puede establecer las opciones de fragnento <em>global</em>,
de esta forma:</p>
<pre>
```{r global_options, echo=FALSE}
knitr::opts_chunk$set(fig.path="Figs/", message=FALSE, warning=FALSE,
                      echo=FALSE, results="hide", fig.width=11)
```
</pre>
<p>La opción <code>fig.path</code> define dónde se guardarán las
figuras. El <code>/</code> aquí es realmente importante; sin él, las
figuras se guardarían en el lugar estándar, pero solo con los nombres
que están con <code>Figs</code>.</p>
<p>Si tienes varios archivos <strong>R Markdown</strong> en un
directorio común, es posible que quieras usar <code>fig.path</code> para
definir prefijos separados para los nombres de archivo de figura , como
<code>fig.path="Figs/cleaning-"</code> y
<code>fig.path="Figs/analysis-"</code>.</p>
<div id="desafío-2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-2" class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Usa las opciones de fragmentos para controlar el tamaño de una figura
y ocultar el código.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="código-r-en-línea">Código <strong>R</strong> en línea<a class="anchor" aria-label="anchor" href="#c%C3%B3digo-r-en-l%C3%ADnea"></a>
</h2>
<hr class="half-width">
<p>Puedes hacer cada número de tu informe reproducible. Usa
<code>`r</code> y <code>`</code> para un fragmento de código en línea,
al igual que: <code>`r round(some_value, 2)`</code>. El código será
ejecutado y reemplazado con el <em>valor</em> del resultado.</p>
<p>No dejes que estos fragmentos en línea se dividan en líneas.</p>
<p>Tal vez anteceda el párrafo con un fragmento de código más grande que
hace cálculos y define cosas, con <code>include=FALSE</code> para ese
largo fragmento (que es lo mismo que <code>echo=FALSE</code> y
<code>results="hide"</code>).</p>
<p>Redondear puede generar diferencias en el resultado en tales
situaciones. Es posible que desees <code>2.0</code>,
pero<code>round (2.03, 1)</code>resultará solo<code>2</code>.</p>
<p>La función <a href="https://github.com/kbroman/broman/blob/master/R/myround.R" class="external-link"><code>myround</code></a>
en el paquete <a href="https://github.com/kbroman" class="external-link">R/broman</a> maneja
esi.</p>
<div id="desafío-3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="desafío-3" class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Prueba un poco de código <strong>R</strong> en línea.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="otras-opciones-de-salida">Otras opciones de salida<a class="anchor" aria-label="anchor" href="#otras-opciones-de-salida"></a>
</h2>
<hr class="half-width">
<p>También puedes convertir <strong>R Markdown</strong> en un documento
<strong>PDF</strong> o <strong>Word</strong>. Haz clic en el pequeño
triángulo junto al botón <strong>“Knit HTML”</strong> para obtener un
menú desplegable. O podrías poner
<strong><code>pdf_document</code></strong> o
<strong><code>word_document</code></strong> en el encabezado del
archivo.</p>
<div id="sugerencia-creación-de-documentos-pdf" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sugerencia-creación-de-documentos-pdf" class="callout-inner">
<h3 class="callout-title">Sugerencia: Creación de documentos
<strong>PDF</strong>
</h3>
<div class="callout-content">
<p>La creación de documentos <strong>.pdf</strong> puede requerir la
instalación de algún programa adicional. Si eso es requerido, se detalla
en un mensaje de error.</p>
<p><strong>Tex</strong> para <strong>Windows</strong> está disponible <a href="https://miktex.org/2.9/setup" class="external-link">aquí</a>.</p>
<p><strong>Tex</strong> for <strong>mac</strong> está disponible <a href="https://tug.org/mactex" class="external-link">aquí</a>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="recursos">Recursos<a class="anchor" aria-label="anchor" href="#recursos"></a>
</h2>
<hr class="half-width">
<ul>
<li><p><a href="https://kbroman.org/knitr_knutshell" class="external-link">Knitr in a
knutshell tutorial</a></p></li>
<li><p><a href="https://www.amazon.com/exec/obidos/ASIN/1482203537/7210-20" class="external-link">Dynamic
Documents with R and knitr</a> (book)</p></li>
<li><p><a href="https://rmarkdown.rstudio.com" class="external-link">R Markdown
documentation</a></p></li>
<li><p><a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf" class="external-link">R
Markdown cheat sheet</a></p></li>
<li><p><a href="https://www.rstudio.com/resources/webinars/getting-started-with-r-markdown/" class="external-link">Getting
started with R Markdown</a></p></li>
<li><p><a href="https://www.rstudio.com/resources/webinars/reproducible-reporting/" class="external-link">Reproducible
Reporting</a></p></li>
<li><p><a href="https://www.rstudio.com/resources/webinars/the-ecosystem-of-r-markdown/" class="external-link">The
Ecosystem of R Markdown</a></p></li>
<li><p><a href="https://www.rstudio.com/resources/webinars/introducing-bookdown/" class="external-link">Introducing
Bookdown</a></p></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Informes mixtos escritos en <strong>R Markdown</strong> usando un
programa escrito en <strong>R</strong>.</li>
<li>Especificar opciones de fragmento para controlar el formateo.</li>
<li>Usar <code>knitr</code> para convertir estos documentos en PDF y en
otros formatos.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-16-wrap-up"><p>Content from <a href="16-wrap-up.html">Escribiendo buen software</a></p>
<hr>
<p>Última actualización: 2024-10-16 |

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/episodes/16-wrap-up.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo puedo escribir software que otras personas puedan usar?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>Describir las mejores prácticas para escribir software en R y
explicar la justificación de cada una.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="escribir-código-legible">Escribir código legible<a class="anchor" aria-label="anchor" href="#escribir-c%C3%B3digo-legible"></a>
</h2>
<hr class="half-width">
<p>La parte más importante de escribir código es hacer que sea legible y
comprensible. Quieres que otra persona pueda tener tu código y comprenda
lo que hace: la mayoría de las veces, esta persona serás tú 6 meses
después y si no es comprensible, te estarás culpando por no haber hecho
las cosas bien.</p>
</section><section><h2 class="section-heading" id="documentación-dinos-qué-y-por-qué-no-cómo">Documentación: dinos qué y por qué, no cómo<a class="anchor" aria-label="anchor" href="#documentaci%C3%B3n-dinos-qu%C3%A9-y-por-qu%C3%A9-no-c%C3%B3mo"></a>
</h2>
<hr class="half-width">
<p>Cuando empiezas a programar, tus comentarios a menudo describen lo
que hace un comando, ya que aún te encuentras en aprendizaje y pueden
ayudarte a aclarar conceptos y recordártelos más tarde. Sin embargo,
estos comentarios no son particularmente útiles, sobre todo cuando no
recuerdes qué problema estabas tratando de resolver con tu código.
Intenta incluir comentarios que te digan <em>por qué</em> estás
resolviendo un problema y <em>qué</em> problema es. El <em>cómo</em>
puede venir después de eso: es un detalle de implementación del que
idealmente no deberías preocuparte.</p>
</section><section><h2 class="section-heading" id="mantén-tu-código-modular">Mantén tu código modular<a class="anchor" aria-label="anchor" href="#mant%C3%A9n-tu-c%C3%B3digo-modular"></a>
</h2>
<hr class="half-width">
<p>Nuestra recomendación es que debes separar tus funciones de tus
<strong>scripts</strong> y almacenarlos en un archivo separado ‘source’
que llamarás cuando abras la sesión R en tu proyecto. Este enfoque es
bueno porque te deja un <strong>script</strong> ordenado y un
repositorio de funciones útiles que se pueden cargar en cualquier script
en tu proyecto. También te permite agrupar funciones relacionadas
fácilmente.</p>
</section><section><h2 class="section-heading" id="divide-el-problema-en-bocados-pequeños">Divide el problema en bocados pequeños<a class="anchor" aria-label="anchor" href="#divide-el-problema-en-bocados-peque%C3%B1os"></a>
</h2>
<hr class="half-width">
<p>Al principio la resolución de problemas y la escritura de funciones
pueden ser tareas que te resulten desalentadoras debido a la falta de
experiencia en programación. Trata de dividir tu problema en bloques
digeribles y preocúpate por los detalles de la implementación más
adelante. Es recomendable seguir dividiendo el problema en funciones
cortas de un solo propósito.</p>
</section><section><h2 class="section-heading" id="chequea-que-tu-código-está-haciendo-lo-correcto">Chequea que tu código está haciendo lo correcto<a class="anchor" aria-label="anchor" href="#chequea-que-tu-c%C3%B3digo-est%C3%A1-haciendo-lo-correcto"></a>
</h2>
<hr class="half-width">
<p>¡Asegúrate de probar tus funciones!</p>
</section><section><h2 class="section-heading" id="no-repitas-tu-código">No repitas tu código<a class="anchor" aria-label="anchor" href="#no-repitas-tu-c%C3%B3digo"></a>
</h2>
<hr class="half-width">
<p>Las funciones permiten una fácil reutilización dentro de en proyecto.
Si identificas bloques de código similares en tu proyecto son en general
candidatos a ser convertidos en funciones.</p>
<p>Si tus cálculos se realizan a través de una serie de funciones,
entonces el proyecto se vuelve más modular y más fácil de cambiar. Este
es, especialmente el caso para el cual una entrada particular siempre da
una salida particular.</p>
</section><section><h2 class="section-heading" id="recuerda-ser-elegante">Recuerda ser elegante<a class="anchor" aria-label="anchor" href="#recuerda-ser-elegante"></a>
</h2>
<hr class="half-width">
<p>Manten un mismo estilo en todo tu código.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul>
<li>Documenta qué y por qué, no cómo.</li>
<li>Divide los programas en funciones cortas de un solo propósito.</li>
<li>Escribe pruebas re-ejecutables.</li>
<li>No repitas tu código.</li>
<li>Se coherente en la nomenclatura, indentación y otros aspectos del
estilo.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>Esta lección está sujeta al <a href="CODE_OF_CONDUCT.html">Código de Conducta</a></p>
        <p>

        <a href="https://github.com/swcarpentry/r-novice-gapminder-es/edit/main/README.md" class="external-link">Editar en GitHub</a>

	
        | <a href="https://github.com/swcarpentry/r-novice-gapminder-es/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a>
        | <a href="https://github.com/swcarpentry/r-novice-gapminder-es/" class="external-link">Fuente</a></p>
				<p><a href="https://github.com/swcarpentry/r-novice-gapminder-es/blob/main/CITATION" class="external-link">Cita</a> | <a href="mailto:team@carpentries.org">Contacto</a> | <a href="https://carpentries.org/about/" class="external-link">Acerca de</a></p>
			</div>
			<div class="col-md-6">

        <p>Materiales bajo la <a href="LICENSE.html">CC-BY 4.0</a> por las autoras</p>

        <p>Plantilla compartida bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> por <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construido con <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a> y <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Volver al inicio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Volver</span> al inicio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/r-novice-gapminder-es/aio.html",
  "inLanguage": "es",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Todo en una sola página",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/r-novice-gapminder-es/aio.html",
  "identifier": "https://swcarpentry.github.io/r-novice-gapminder-es/aio.html",
  "dateCreated": "2018-03-20",
  "dateModified": "2024-11-12",
  "datePublished": "2024-11-12"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

