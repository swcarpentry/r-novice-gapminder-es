---
title: "Introducci칩n a R y RStudio 游뷣릖"
teaching: 45
exercises: 10
questions:
- "쮺칩mo orientarse en RStudio?"
- "쮺칩mo interactuar con R?"
- "쮺칩mo administrar tu entorno?"
- "쮺칩mo instalar paquetes?"
objectives:
- "Describir el prop칩sito y el uso de cada panel del RStudio IDE"
- "Ubicar botones y opciones en RStudio IDE"
- "Definir una variable"
- "Asignar un dato a una variable"
- "Administrar un espacio de trabajo en una sesi칩n R interactiva"
- "Usar operadores matem치ticos y de comparaci칩n"
- "Llamar funciones"
- "Gestionar paquetes"
keypoints:
- "Usa RStudio para escribir y correr programas en R."
- "R tiene operadores aritm칠ticos y funciones matem치ticas usuales."
- "Utilizar `<-` para asignar valores a variables."
- "Utilizar `ls()` para listar las variables en el programa."
- "Utilizar `rm()` para eliminar objetos en el programa."
- "Utilizar `install.packages()` para instalar paquetes (libraries)."
source: Rmd
---

```{r, include=FALSE}
source("../bin/chunk-options.R")
knitr_fig_path("01-")
```


## Motivaci칩n


La Ciencia es un proceso de varios pasos: una vez que hayas dise침ado un experimento y recopilado datos, 춰comienza la verdadera diversi칩n! Esta lecci칩n te ense침ar치 c칩mo comenzar este proceso usando R y RStudio. Comenzaremos con datos brutos, realizaremos an치lisis exploratorios y aprenderemos a trazar gr치ficamente los resultados. Este ejemplo comienza con un conjunto de datos de [gapminder.org] (https://www.gapminder.org) que contiene informaci칩n sobre la poblaci칩n de muchos pa칤ses a lo largo del tiempo. 쯇uedes leer estos datos en R? 쯇uedes hacer un gr치fico de la poblaci칩n de Senegal? 쯇uedes calcular el ingreso promedio de los pa칤ses del continente asi치tico? Al final de estas lecciones, 춰podr치s hacer cosas como graficar datos de poblaciones de estos pa칤ses en menos de un minuto!


## Antes de empezar el taller 

Aseg칰rate de tener instalada la 칰ltima versi칩n de R y RStudio en tu m치quina. Esto es importante, ya que algunos paquetes utilizados en el taller pueden no instalarse correctamente (o no funcionar) si R no est치 actualizado.

[Download and install the latest version of R here](https://www.r-project.org/)
[Download and install RStudio here](https://www.rstudio.com/)


## Introducci칩n a RStudio


Bienvenido a la parte R del taller de Software Carpentry.


A lo largo de esta lecci칩n, vamos a ense침arte algunos de los fundamentos del lenguaje R, as칤 como algunas buenas pr치cticas para organizar el c칩digo de proyectos cient칤ficos que har치n tu vida m치s f치cil.


Usaremos RStudio: un entorno de desarrollo integrado y gratuito de c칩digo abierto. Proporciona un editor incorporado, funciona en todas las plataformas (incluso en servidores) y ofrece muchas ventajas, como la integraci칩n de control de versiones y gesti칩n de proyectos.


**Dise침o b치sico**


Cuando abres por primera vez el RStudio, ser치s recibido por tres paneles:


  * La consola interactiva de R (a la izquierda)
  * Ambiente/Historial (en la esquina superior derecha)
  * Archivos/Gr치ficos/Paquetes/Ayuda/Visor (abajo a la derecha)


![RStudio layout](../fig/01-rstudio.png)


Una vez que abres archivos, como los scripts R, tambi칠n se abrir치 un panel de editor en la esquina superior izquierda.


![RStudio layout with .R file open](../fig/01-rstudio-script.png)


## Flujo de trabajo dentro de RStudio
Hay dos formas principales en que uno puede trabajar dentro de RStudio.


1. Probar y jugar dentro de la consola interactiva de R y luego copiar el c칩digo en un archivo .R para ejecutarlo m치s tarde.
   *  Esto funciona bien cuando se hacen peque침as pruebas y se est치 comenzando.
   *  R치pidamente se vuelve laborioso. 
2. Comienza a escribir un archivo en .R y usa las teclas de acceso directo de RStudio para ejecutar la l칤nea actual, las l칤neas seleccionadas o modificadas en la consola interactiva.
   * Esta es una buena forma de comenzar; todo tu c칩digo estar치 guardado para despu칠s.
   * Podr치s ejecutar el archivo que crees desde RStudio o mediante la funci칩n `source ()` de R.


> ## Sugerencia: Ejecutando segmentos/secciones de tu c칩digo 
>
> RStudio ofrece gran flexibilidad para ejecutar c칩digo desde dentro de la ventana del editor
> Hay botones, opciones de men칰 y atajos de teclado. Para ejecutar la l칤nea actual, puedes 
> 1. hacer clic en el bot칩n `Run` arriba en el panel del Editor, o  2. Seleccionar "Run Lines" desde el men칰 
> "Code", o  3. Presionar Ctrl-Enter en Windows o Linux o Command-Enter en OS X. (Este atajo tambi칠n se 
> puede hacer colocando el mouse sobre el bot칩n). Para ejecutar un bloque de c칩digo, selecci칩nalo y luego 
> pulsa `Run`. Si has modificado una l칤nea de c칩digo dentro de un bloque que acabas de ejecutar,
> no es necesario re-seleccionar el bloque y `Run`, puedes usar el bot칩n 
> `Re-run the previous region`. Esto ejecutar치 el bloque de c칩digo anterior, incluidas las modificaciones que 
> hayas realizado.
{: .callout}


## Introducci칩n a R


Gran parte de tu tiempo en R lo gastar치s en la consola interactiva de R. Aqu칤 es donde ejecutar치s todo tu c칩digo, y puede ser un entorno 칰til para probar ideas antes de guardarlas en un script R. La consola en RStudio es la misma que obtendr칤as si escribieras `R` en la terminal de shell/linea de comandos.


Lo primero que ver치s en la sesi칩n interactiva R es un mont칩n de informaci칩n, seguido por un ">" y un cursor parpadeante. Esto es similar al entorno de la terminal de shell que aprendiste durante las lecciones de shell: R opera con la misma idea de "leer, evaluar, mostrar": tu escribes comandos, R intenta ejecutarlos y luego devuelve un resultado.


## Usando R como una calculadora
Lo m치s simple que podr칤as hacer con R es hacer aritm칠tica:


```{r}
1 + 100
```

Y R te mostrar치 la respuesta, precedido de un "[1]". No te preocupes por esto por ahora, lo explicaremos m치s adelante. Por ahora piensa en eso, como parte de la salida.


Al igual que bash, si escribes un comando incompleto, R esperar치 a que lo completes:


~~~
> 1 +
~~~
{: .language-r}


~~~
+
~~~
{: .output}


Cada vez que presionas Enter y R te muestra un "+" en lugar de ">", significa que est치 esperando que completes el comando. Si deseas cancelar un comando, simplemente presiona "Esc" y RStudio te devolver치 el ">" **prompt**.




> ## Sugerencia: Cancelando comandos
>
> Si usas R desde la l칤nea de comandos en lugar de estar dentro de RStudio, 
> debe usar `Ctrl + C` en lugar de` Esc` para cancelar el comando. 
> 춰Esto se aplica tambi칠n a los usuarios de Mac!
>
> La cancelaci칩n de un comando no s칩lo es 칰til para matar comandos incompletos: 
> tambi칠n puedes usarlo para decirle a R que deje de ejecutar el c칩digo (por ejemplo, si tarda 
> mucho m치s de lo que esperabas), o para deshacerte del c칩digo que est치s escribiendo actualmente.
{: .callout}


Cuando usas R como calculadora, el orden de las operaciones es el mismo que has aprendido en la escuela.


De mayor a menor precedencia:


 * Par칠ntesis: `(`, `)`
 * Exponente: `^` o `**`
 * Divisi칩n: `/`
 * Multiplicaci칩n: `*`
 * Suma: `+`
 * Resta: `-`



```{r}
3 + 5 * 2
```


Usa par칠ntesis para agrupar las operaciones a fin de forzar el orden de la evaluaci칩n o para aclarar lo que deseas hacer.


```{r}
(3 + 5) * 2
```


Esto puede ser dif칤cil de manejar cuando no es necesario, pero aclara tus intenciones.
Recuerda que otros pueden leer tu c칩digo.




```{r, eval=FALSE} 
(3 + (5 * (2 ^ 2))) # dif칤cil de leer
3 + 5 * 2 ^ 2       # claro, si recuerdas las reglas
3 + 5 * (2 ^ 2)     # si olvidas algunas reglas, esto podr칤a ayudar
```




El texto despu칠s de cada l칤nea de c칩digo se llama "comentario". Todo lo que sigue despu칠s del s칤mbolo hash (o numeral) `#` es ignorado por R cuando se ejecuta el c칩digo.


Los n칰meros peque침os o grandes tienen una notaci칩n cient칤fica:


```{r}
2/10000
```


Es la abreviatura de "multiplicado por` 10 ^ XX` ". Entonces `2e-4` es la abreviatura de `2 * 10^(-4)`.


T칰 tambi칠n puedes escribir n칰meros en notaci칩n cient칤fica:


```{r}
5e3  # nota la falta del signo menos aqu칤
```

## Funciones matem치ticas


R tiene muchas funciones matem치ticas integradas. Para llamar a una funci칩n, simplemente escribimos su nombre, seguido de par칠ntesis ( ). Todo lo que escribas dentro de los par칠ntesis se llama argumentos de la funci칩n:


```{r}
sin(1)  # funci칩n trigonom칠trica
```

```{r}
log(1)  # logaritmo natural
```


```{r}
log10(10) # logaritmo en base-10
```


```{r}
exp(0.5) # e^(1/2)
```


No te preocupes si no recuerdas todas las funciones en R. Simplemente puede buscarlas en Google, o si puedes recordar el comienzo del nombre de la funci칩n, usa el tabulador para completar su nombre en RStudio.


Esta es una de las ventajas que RStudio tiene sobre R, tiene capacidades de autocompletado que te permiten buscar funciones m치s f치cilmente, sus argumentos y los valores que toman.


Escribir un `?` antes del nombre de un comando abrir치 la p치gina de ayuda para ese comando. Adem치s de proporcionar una descripci칩n detallada del comando y c칩mo funciona, al desplazarse hacia la parte inferior de la p치gina de ayuda generalmente se mostrar치n ejemplos que ilustran el uso del comando. Veremos un ejemplo m치s adelante.


## Comparando


Podemos realizar comparaciones en R:




```{r}
1 == 1  # igualdad (observa dos signos iguales, se lee como "es igual a")
```


```{r}
1 != 2  # desigualdad (le칤da como "no es igual a")
```


```{r}
1 < 2  # menor que
```


```{r}
1 <= 1  # menor o igual que
```

```{r}
1 > 0  # mayor que
```

```{r}
1 >= -9 # mayor o igual que
```


> ## Sugerencia: Comparando n칰meros
>
> Una advertencia sobre la comparaci칩n de n칰meros: 
> nunca debes usar `==` para comparar dos n칰meros a menos que 
> sean enteros (**integer** es un tipo de datos que 
> espec칤fica n칰meros enteros).
>
> Las computadoras s칩lo pueden representar n칰meros decimales con 
> un cierto grado de precisi칩n, as칤 que dos n칰meros que parecen iguales 
> cuando se muestran por R, pueden tener diferentes representaciones 
> subyacentes y por lo tanto ser diferentes por un peque침o margen de error 
> (llamado tolerancia num칠rica de la m치quina).
{: .callout}


> En su lugar, debes usar la funci칩n `all.equal`.
>
> Lectura adicional: [http://floating-point-gui.de/](http://floating-point-gui.de/)
>
{: .callout}


## Variables y asignaciones


Podemos almacenar valores en variables usando el operador de asignaci칩n `<-`, veamos ejemplos:


```{r}
x <- 1/40
```

Observa que la asignaci칩n no muestra el valor. En cambio, lo almacena para m치s adelante, en algo llamado **variable**. `x` ahora contiene el **valor** `0.025`:


```{r}
x
```


M치s precisamente, el valor almacenado es una *aproximaci칩n decimal* de esta fracci칩n, llamado [n칰mero de coma flotante o **floating point**] (http://en.wikipedia.org/wiki/Floating_point).


Busca la pesta침a `Environment` en uno de los paneles de RStudio, y ver치s que` x` y su valor han aparecido. Nuestra variable `x` se puede usar en lugar de un n칰mero en cualquier c치lculo que espere un n칰mero:


```{r}
log(x)
```

Ten en cuenta que las variables pueden reasignarse, es decir, puedes cambiar el valor almacenado en la variable:


```{r}
x <- 100
```


`x` ten칤a el valor `0.025` y ahora tiene el valor `100`.

Tambi칠n, los valores de asignaci칩n pueden contener la variable asignada:


```{r}
x <- x + 1 # observa c칩mo RStudio actualiza la descripci칩n de x en la pesta침a superior derecha
y <- x * 2
```

El lado derecho de la asignaci칩n puede ser cualquier expresi칩n de R v치lida.
La expresi칩n del lado derecho *se eval칰a por completo* antes de que se realice la asignaci칩n.


Los nombres de las variables pueden contener letras, n칰meros, guiones bajos y puntos. No pueden comenzar con un n칰mero ni contener espacios en absoluto. Diferentes personas usan diferentes convenciones para nombres largos de variables, estos incluyen


  * puntos.entre.palabras
  * guiones bajos_entre_palabras
  * May칰sculasMin칰sculasParaSepararPalabras


Lo que uses depende de t칤, pero **s칠 consistente**.


Tambi칠n es posible utilizar el operador `=` para la asignaci칩n:



```{r}
x = 1/40
```

Esta forma es menos com칰n entre los usuarios R. Lo m치s importante es
**ser consistente** con el operador que usas. Ocasionalmente hay lugares
donde es menos confuso usar `<-` que `=`, y es el s칤mbolo m치s com칰n usado en la comunidad. 
Entonces la recomendaci칩n es usar `<-`.

> ## Desaf칤o 1
>
> De los siguientes ejemplos, 쮺u치les son nombres de variables v치lidas en R?
> ```{r, eval=FALSE}
> min_height
> max.height
> _age
> .mass
> MaxLength
> min-length
> 2widths
> celsius2kelvin
> ```
>
> > ## Soluci칩n al desaf칤o 1
> >
> > Los siguientes nombres de variables son v치lidos en R:
> > ```{r ch1pt1-sol, eval=FALSE}
> > min_height
> > max.height
> > MaxLength
> > celsius2kelvin
> > ```
> >
> > El punto al inicio crea una variable oculta:
> > ```{r ch1pt2-sol, eval=FALSE}
> > .mass
> > ```
> >
> > Los siguientes no son nombres de variables v치lidos en R칌
> > ```{r ch1pt3-sol, eval=FALSE}
> > _age
> > min-length
> > 2widths
> > ```
> {: .solution}
{: .challenge}


## Vectorizaci칩n


Muy importante para tomar en cuenta, es que R es *vectorizado*, lo que significa que las variables y funciones pueden tener vectores como valores y R puede operar en vectores completos a la vez. 
En contraste con los conceptos de vectores de f칤sica y matem치ticas, un vector en R describe un conjunto de valores del
mismo tipo de datos en un cierto orden. Por ejemplo:

```{r}
1:5
2^(1:5)
x <- 1:5
2^x
```

Esto es incre칤blemente poderoso; discutiremos esto en una pr칩xima lecci칩n.




## Administrando tu entorno


Hay algunos comandos 칰tiles que puedes usar para interactuar con la sesi칩n R.


`ls` listar치 todas las variables y funciones almacenadas en el entorno global
(tu sesi칩n R de trabajo):


```{r}
ls()
```

> ## Sugerencia: ocultando objetos
>
> Al igual que en el shell, `ls` oculta por defecto cualquier variable o funci칩n que comience
> con un ".". Para listar todos los objetos, escribe `ls(all.names = TRUE)` 
>
{: .callout}


Ten en cuenta que no se di칩 ning칰n argumento a `ls`, pero s칤 se necesita poner los par칠ntesis 
para decirle a R que llame a la funci칩n.


Si escribimos `ls` nada m치s, 춰R mostrar치 el c칩digo fuente de esa funci칩n!

```{r}
ls
```


Puedes usar `rm` para eliminar objetos que ya no necesitas:


```{r}
rm(x)
```


Si tienes muchas cosas en tu entorno y deseas borrarlas todas, 
puedes pasar los resultados de `ls` y mandarlos a la funci칩n` rm`:


```{r}
rm(list = ls())
```

En este caso, hemos combinado los dos. Al igual que el orden de las operaciones, todo lo que se encuentre dentro de los par칠ntesis m치s internos se eval칰a primero, y as칤 sucesivamente.


En este caso, hemos especificado que los resultados de `ls` se deben usar para el argumento `list` y luego remover la lista con `rm`. Cuando asignes valores a argumentos por su nombre, *debes* usar el operador `=`.


Si, en cambio, usamos `<-`, habr치 efectos secundarios no deseados, o puedes recibir un mensaje de error:

```{r, error=TRUE}
rm(list <- ls())
```

> ## Sugerencia: Advertencias vs. Errores
>
> 춰Presta atenci칩n cuando R hace algo inesperado! Los errores, como el anterior, 
> se lanzan cuando R no puede proceder a un c치lculo. Por otro lado, las advertencias 
> generalmente significan que la funci칩n se ha ejecutado, pero probablemente 
> no funcion칩 como se esperaba.
>
> En ambos casos, el mensaje que muestra R usualmente te da pistas sobre c칩mo 
> solucionar el problema.
>
{: .callout}


## Paquetes en R


Es posible agregar funciones a R escribiendo un paquete u obteniendo un paquete escrito 
por otra persona. Hay m치s de 10,000 paquetes disponibles en CRAN (la red completa de archivos R). 
R y RStudio tienen funcionalidad para administrar paquetes:


* Puedes ver qu칠 paquetes est치n instalados escribiendo `installed.packages()`
* Puedes instalar paquetes escribiendo `install.packages("packagename")`, donde `packagename` es el nombre del paquete entre comillas.
* Puedes actualizar los paquetes instalados escribiendo `update.packages()`
* Puedes eliminar un paquete con `remove.packages("packagename")`
* Puedes hacer que un paquete est칠 disponible para su uso con `library(packagename)`

> ## Desaf칤o 2
>
> 쮺u치l ser치 el valor de cada variable despu칠s de cada comando en el siguiente programa?
>
> ```{r, eval=FALSE}
> mass <- 47.5
> age <- 122
> mass <- mass * 2.3
> age <- age - 20
> ```
>
> > ## Soluci칩n al desaf칤o 2
> >
> > ```{r ch2pt1-sol}
> > mass <- 47.5
> > ```
> > Esto dar치 un valor de 47.5 para la variable mass
> >
> > 
> > ```{r ch2pt2-sol}
> > age <- 122
> > ```
> >
> > Esto dar치 un valor de 122 para la variable age
> >
> > 
> > ```{r ch2pt3-sol}
> > mass <- mass * 2.3
> > ```
> >
> > Multiplica el valor existente en mass 47.5 por 2.3 para dar un nuevo valor 
> > 109.25 a la variable mass.
> >
> > 
> > ```{r ch2pt4-sol}
> > age <- age - 20
> > ```
> > Resta 20 del valor existente de 122 para obtener un nuevo valor
> > de 102 para la variable age.
> {: .solution}
{: .challenge}



> ## Desaf칤o 3
>
> Ejecuta el c칩digo del desaf칤o anterior y escribe un comando para comparar la variable mass con age. 
> 쮼s la variable `mass` m치s grande que `age`?
>
> > ## Soluci칩n del desaf칤o 3
> >
> > Una forma de responder esta pregunta en R es usar `>` para hacer lo siguiente:
> > 
> > ```{r ch3-sol}
> > mass > age
> >```
> > 
> > Esto deber칤a dar un valor booleano TRUE ya que 109.25 es mayor que 102.
> {: .solution}
{: .challenge}


> ## Desaf칤o 4
>
> > Limpia tu entorno de trabajo borrando las variables de mass y age.
> >
> > ## Soluci칩n al desaf칤o 4
> >
> > Podemos usar el comando `rm` para realizar esta tarea
> > 
> > ```{r ch4-sol}
> > rm(age, mass)
> > ```
> {: .solution}
{: .challenge}


> ## Desaf칤o 5
>
> Instala los siguientes paquetes: `ggplot2`, `plyr`, `gapminder`
>
> > ## Soluci칩n al desaf칤o 5
> >
> > Puedes utilizar el comando `install.packages()` para instalar los paquetes requeridos.
> > 
> > ```{r ch5-sol, eval=FALSE}
> > install.packages("ggplot2")
> > install.packages("plyr")
> > install.packages("gapminder")
> >```
> {: .solution}
{: .challenge}

{% include links.md %}
